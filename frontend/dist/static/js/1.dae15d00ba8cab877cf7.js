webpackJsonp([1],{Vh2V:function(t,e){},mvHQ:function(t,e,s){t.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(t,e,s){var i=s("FeBl"),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},xJsL:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),r=s.n(i),a=s("Tk3H"),o=s("Okpk"),n=s("+cKO"),c={name:"Login",components:{ThemeButton:o.a},data:function(){return{baseurl:"",switch1:!0,otpScreen:!1,otpError:!1,loginId:0,signUpOption:!1,versionOption:"v1.0.0",activeUser:{user:null,token:""},user:{email:"",password:""},otpForm:{otp:""},submitted:!1,submitted2:!1,signupRoute:""}},validations:{user:{email:{required:n.required,minLength:Object(n.minLength)(2)},password:{required:n.required,minLength:Object(n.minLength)(6)}}},mounted:function(){this.signupRoute="/"+this.$route.params.appdirectory+"/signup",this.$cookie.get("access_token")&&this.$router.push("/"+this.$route.params.appdirectory+"/dashboard"),this.getsignup(),this.getVersion()},methods:{getsignup:function(){var t=this;this.$store.dispatch(a.c,{data:{},url:"auth/get-signup"}).then(function(e){e&&"on"===e.data?t.signUpOption=!0:t.signUpOption=!1}).catch(function(e){t.signUpOption=!1})},getVersion:function(){var t=this;this.$store.dispatch(a.c,{data:{},url:"auth/get-version"}).then(function(e){e&&(t.versionOption=e.data)}).catch(function(t){})},handleSubmit:function(t){var e=this;if(t.preventDefault(),this.submitted=!0,this.$v.$touch(),!this.$v.$invalid){var s={data:this.user,url:"auth/login"};this.$store.dispatch(a.c,s).then(function(t){t&&("mfa"===t.status?(e.activeUser.token=t.token,e.activeUser.user=t.data,e.otpScreen=!0):(e.$cookie.set("access_token",t.token,30),e.$cookie.set("userdata",r()(t.data),30),console.log(e.$cookie.get("access_token")),console.log(e.$cookie.get("userdata")),e.$router.push("/"+e.$route.params.appdirectory+"/dashboard")))}).catch(function(t){})}},handleSubmit2:function(t){var e=this;if(this.submitted2=!0,""!==this.otpForm.otp.trim()){var s={data:{user:this.activeUser.user._id,verification_code:this.otpForm.otp},url:"auth/otp-verify"};this.$store.dispatch(a.c,s).then(function(t){t&&"true"===t.status&&(e.$cookie.set("access_token",e.activeUser.token,30),e.$cookie.set("userdata",r()(e.activeUser.user),30),e.activeUser.token="",e.activeUser.user=null,e.$router.push("/"+e.$route.params.appdirectory+"/dashboard"))}).catch(function(t){})}else this.otpError=!0}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"login-box dark-mode p-3"},[s("theme-button",{attrs:{"id-hide":"false"}}),t._v(" "),s("h1",{staticClass:"dark-mode"},[t._v("Login")]),t._v(" "),t.otpScreen?t._e():s("form",{staticClass:"ml-2 mr-2",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"person-fill"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control chat-input",class:{"is-invalid":t.submitted&&t.$v.user.email.$error},attrs:{type:"text",placeholder:"Username",title:"Enter Username"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})],1),t._v(" "),t.submitted&&t.$v.user.email.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.user.email.required?t._e():s("span",[t._v("Username is required")]),t._v(" "),t.$v.user.email.minLength?t._e():s("span",[t._v("Username is invalid")])]):t._e()],1),t._v(" "),s("div",{staticClass:"form-group mb-2 mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"shield-lock"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"chat-input form-control",class:{"is-invalid":t.submitted&&t.$v.user.password.$error},attrs:{type:"password",placeholder:"Password",title:"Enter Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})],1),t._v(" "),t.submitted&&t.$v.user.password.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.user.password.required?t._e():s("span",[t._v("Password is required")]),t._v(" "),t.$v.user.password.minLength?t._e():s("span",[t._v("Password is invalid")])]):t._e()],1),t._v(" "),t._m(0),t._v(" "),t.signUpOption?s("div",{staticClass:"my-2 small"},[t._v("\n            Donâ€™t have an account yet? "),s("router-link",{staticClass:"mx-2",attrs:{to:t.signupRoute}},[t._v(" Sign up")])],1):s("div",{staticClass:"d-grid d-md-flex mt-2 small"},[t._v("\n            New registrations are disabled\n          ")])]),t._v(" "),s("form",{staticClass:"ml-2 mr-2 text-center",class:{"d-none":!t.otpScreen}},[s("div",{staticClass:"form-group my-4"},[s("label",[t._v("Enter Verification Code")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.otpForm.otp,expression:"otpForm.otp"}],staticClass:"totp",class:{"is-invalid":t.submitted2&&t.otpError},attrs:{type:"form-control",maxlength:"6",placeholder:"000000"},domProps:{value:t.otpForm.otp},on:{input:function(e){e.target.composing||t.$set(t.otpForm,"otp",e.target.value)}}}),t._v(" "),t.submitted2&&t.otpError?s("div",{staticClass:"invalid-feedback"},[s("span",[t._v("Verification code is required")])]):t._e()]),t._v(" "),s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-success m-3 px-5",attrs:{type:"button",id:"login-button2"},on:{click:function(e){return t.handleSubmit2(e)}}},[t._v("Verify")])])]),t._v(" "),s("div",{staticClass:"d-flex my-4 justify-content-center"},[s("a",{attrs:{href:"https://www.twitter.com/0perationP",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",title:"Twitter"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"twitter",variant:"secondary"}})],1),t._v(" "),s("a",{attrs:{href:"https://github.com/0perationPrivacy/",target:"_blank",rel:"noopener noreferrer","aria-label":"Github",title:"Github"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"github",variant:"secondary"}})],1),t._v(" "),s("a",{attrs:{href:"https://www.OperationPrivacy.com/Donate",target:"_blank",rel:"noopener noreferrer","aria-label":"Donate",title:"Donate"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"credit-card",variant:"secondary"}})],1)])],1),t._v(" "),s("p",{staticClass:"version"},[t._v(t._s(t.versionOption))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-grid"},[e("button",{staticClass:"btn btn-success mt-3",attrs:{type:"submit",id:"login-button"}},[this._v("Login")])])}]};var l=s("VU/8")(c,u,!1,function(t){s("Vh2V")},"data-v-832b9726",null);e.default=l.exports}});
//# sourceMappingURL=1.dae15d00ba8cab877cf7.js.map