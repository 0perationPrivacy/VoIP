webpackJsonp([3],{"+8Fp":function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n("vzCy"),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=new r.EventEmitter}return i(e,[{key:"addEventListener",value:function(e,t){return this._eventEmitter.addListener(e,t)}},{key:"dispatchEvent",value:function(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=this._eventEmitter).emit.apply(t,[e].concat(i))}},{key:"removeEventListener",value:function(e,t){return this._eventEmitter.removeListener(e,t)}}]),e}();t.default=o},"+fTR":function(e,t,n){var i=n("OMJi"),r=n("oYPl"),o=n("/+tP");function s(e){o.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=s.DEFAULT_FACTOR,e&&void 0!==e.factor&&(r.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}i.inherits(s,o),s.DEFAULT_FACTOR=2,s.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},s.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},e.exports=s},"+lzb":function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},"/+tP":function(e,t,n){n("vzCy"),n("OMJi");function i(e){return void 0!==e&&null!==e}function r(e){if(i((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(i(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(i(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}r.prototype.getMaxDelay=function(){return this.maxDelay_},r.prototype.getInitialDelay=function(){return this.initialDelay_},r.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},r.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},r.prototype.reset=function(){this.reset_()},r.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},e.exports=r},"/6PD":function(e,t){},"/n6Q":function(e,t,n){n("zQR9"),n("+tPU"),e.exports=n("Kh4W").f("iterator")},"/rKa":function(e,t,n){"use strict";var i=n("K4Q2"),r=n("VAe1").test;e.exports={enabled:function(){return r()},getMediaEngine:function(){return"undefined"!=typeof RTCIceGatherer?"ORTC":"WebRTC"},PeerConnection:i}},"/rf/":function(e,t,n){var i=n("vzCy").EventEmitter;function r(){Object.defineProperties(this,{_eventEmitter:{value:new i},_handlers:{value:{}}})}r.prototype.dispatchEvent=function(e){return this._eventEmitter.emit(e.type,e)},r.prototype.addEventListener=function(){var e;return(e=this._eventEmitter).addListener.apply(e,arguments)},r.prototype.removeEventListener=function(){var e;return(e=this._eventEmitter).removeListener.apply(e,arguments)},r.prototype._defineEventHandler=function(e){var t=this;Object.defineProperty(this,"on"+e,{get:function(){return t._handlers[e]},set:function(n){var i=t._handlers[e];!i||"function"!=typeof n&&void 0!==n&&null!==n||(t._handlers[e]=null,t.removeEventListener(e,i)),"function"==typeof n&&(t._handlers[e]=n,t.addEventListener(e,n))}})},e.exports=r},"/tGp":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const i=n("fOB9"),r=n("Fy0/")("socket.io-client:url");t.url=function(e,t="",n){let o=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),r("parse %s",e),o=i(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port+t,o.href=o.protocol+"://"+s+(n&&n.port===o.port?"":":"+o.port),o}},"06OY":function(e,t,n){var i=n("3Eo+")("meta"),r=n("EqjI"),o=n("D2L2"),s=n("evD5").f,a=0,c=Object.isExtensible||function(){return!0},l=!n("S82l")(function(){return c(Object.preventExtensions({}))}),u=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!o(e,i)&&u(e),e}}},"0Owv":function(e,t,n){"use strict";(function(e,i){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function r(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function o(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})}n.d(t,"a",function(){return He});var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),a=new Uint8Array(16);function c(){if(!s)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(a)}for(var l=[],u=0;u<256;++u)l[u]=(u+256).toString(16).substr(1);function d(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[i+o]=r[o];return t||function(e,t){var n=0,i=l;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}(r)}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},f=function(e,t){return function(e){var t,n;t=p,n=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?o:void 0!==console[i]?r(console,i):void 0!==console.log?r(console,"log"):e)}function a(t,n){for(var r=0;r<i.length;r++){var o=i[r];this[o]=r<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function c(e,n,i){return function(){typeof console!==t&&(a.call(this,n,i),this[e].apply(this,arguments))}}function l(e,t,n){return s(e)||c.apply(this,arguments)}function u(e,n,r){var o,s=this,c="loglevel";function u(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(c)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=r||l,s.getLevel=function(){return o},s.setLevel=function(n,r){if("string"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==r&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(e){}}}(n),a.call(s,n,e),typeof console===t&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){u()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var d=u();null==d&&(d=null==n?"WARN":n),s.setLevel(d,!1)}var d=new u,p={};d.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new u(e,d.getLevel(),d.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=f),d},d.getLoggers=function(){return p},d.default=d,d},e.exports?e.exports=n():t.log=n()}(t={exports:{}}),t.exports}();const h=f.getLogger("telnyx"),m=h.methodFactory;h.methodFactory=((e,t,n)=>{const i=m(e,t,n);return function(){const e=[(()=>(new Date).toISOString().replace("T"," ").replace("Z",""))(),"-"];for(let t=0;t<arguments.length;t++)e.push(arguments[t]);i.apply(void 0,e)}}),h.setLevel(h.getLevel());const v={urls:"stun:stun.telnyx.com:3478"},g={urls:"turn:turn.telnyx.com:3478?transport=tcp",username:"testuser",credential:"testpassword"};var _;!function(e){e.SocketOpen="telnyx.socket.open",e.SocketClose="telnyx.socket.close",e.SocketError="telnyx.socket.error",e.SocketMessage="telnyx.socket.message",e.SpeedTest="telnyx.internal.speedtest",e.Ready="telnyx.ready",e.Error="telnyx.error",e.Notification="telnyx.notification",e.Messages="telnyx.messages",e.Calls="telnyx.calls",e.MediaError="telnyx.rtc.mediaError"}(_||(_={}));const A=e=>0===Object.keys(e).length,y=e=>"@telnyx:"+e,b=e=>{const[t,n,i,r,o,s]=e;let a={};try{a=JSON.parse(o.replace(/ID"/g,'Id"'))}catch(e){h.warn("Verto LA invalid media JSON string:",o)}return{participantId:Number(t),participantNumber:n,participantName:i,codec:r,media:a,participantData:s}},w=e=>{if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}},C=e=>e instanceof Function||"function"==typeof e,S=e=>"object"==typeof document&&"getElementById"in document?"string"==typeof e?document.getElementById(e)||null:"function"==typeof e?e():e instanceof HTMLMediaElement?e:null:null,E=/^(ws|wss):\/\//,k=(e,t=null)=>{const{result:n={},error:i}=e;if(i)return{error:i};const{result:r=null}=n;if(null===r)return null!==t&&(n.node_id=t),{result:n};const{code:o=null,node_id:s=null,result:a=null}=r;return o&&"200"!==o?{error:r}:a?k(a,s):{result:r}},x=({login:e,passwd:t,password:n,login_token:i})=>Boolean(e&&(t||n)||i),T={},I=(e,t)=>`${e}|${t}`,P=(e,t="GLOBAL")=>I(e,t)in T,R=(e,t,n="GLOBAL")=>{const i=I(e,n);i in T||(T[i]=[]),T[i].push(t)},D=(e,t,n="GLOBAL")=>{const i=function(r){O(e,i,n),t(r)};return i.prototype.targetRef=t,R(e,i,n)},O=(e,t,n="GLOBAL")=>{if(!P(e,n))return!1;const i=I(e,n);if(C(t))for(let e=T[i].length-1;e>=0;e--){const n=T[i][e];(t===n||n.prototype&&t===n.prototype.targetRef)&&T[i].splice(e,1)}else T[i]=[];return 0===T[i].length&&delete T[i],!0},B=(e,t,n="GLOBAL",i=!0)=>{const r=i&&"GLOBAL"!==n;if(!P(e,n))return r&&B(e,t),!1;const o=I(e,n),s=T[o].length;if(!s)return r&&B(e,t),!1;for(let e=s-1;e>=0;e--)T[o][e](t);return r&&B(e,t),!0},M=e=>{const t=I(e,"");Object.keys(T).filter(e=>0===e.indexOf(t)).forEach(e=>delete T[e])};let N="undefined"!=typeof WebSocket?WebSocket:null;const L=0,F=1,j=2,$=3;class U{constructor(e){this.session=e,this._wsClient=null,this._host="wss://rtc.telnyx.com:14938",this._timers={},this.upDur=null,this.downDur=null;const{host:t,env:n}=e.options;t&&(this._host=(e=>`${E.test(e)?"":"wss://"}${e}`)(t)),n&&(this._host="development"===n?"wss://rtcdev.telnyx.com:14938":"wss://rtc.telnyx.com:14938")}get connected(){return this._wsClient&&this._wsClient.readyState===F}get connecting(){return this._wsClient&&this._wsClient.readyState===L}get closing(){return this._wsClient&&this._wsClient.readyState===j}get closed(){return this._wsClient&&this._wsClient.readyState===$}get isAlive(){return this.connecting||this.connected}get isDead(){return this.closing||this.closed}connect(){this._wsClient=new N(this._host),this._wsClient.onopen=(e=>B(_.SocketOpen,e,this.session.uuid)),this._wsClient.onclose=(e=>B(_.SocketClose,e,this.session.uuid)),this._wsClient.onerror=(e=>B(_.SocketError,e,this.session.uuid)),this._wsClient.onmessage=(e=>{const t=w(e.data);"string"!=typeof t?(this._unsetTimer(t.id),h.debug("RECV: \n",JSON.stringify(t,null,2),"\n"),B(t.id,t)||B(_.SocketMessage,t,this.session.uuid)):this._handleStringResponse(t)})}sendRawText(e){this._wsClient.send(e)}send(e){const{request:t}=e,n=new Promise((e,n)=>{if(t.hasOwnProperty("result"))return e();D(t.id,t=>{const{result:i,error:r}=k(t);return r?n(r):e(i)}),this._setTimer(t.id)});return h.debug("SEND: \n",JSON.stringify(t,null,2),"\n"),this._wsClient.send(JSON.stringify(t)),n}close(){this._wsClient&&(C(this._wsClient._beginClose)?this._wsClient._beginClose():this._wsClient.close()),this._wsClient=null}_unsetTimer(e){clearTimeout(this._timers[e]),delete this._timers[e]}_setTimer(e){this._timers[e]=setTimeout(()=>{B(e,{error:{code:this.session.timeoutErrorCode,message:"Timeout"}}),this._unsetTimer(e)},1e4)}_handleStringResponse(e){if(/^#SP/.test(e))switch(e[3]){case"U":this.upDur=parseInt(e.substring(4));break;case"D":this.downDur=parseInt(e.substring(4)),B(_.SpeedTest,{upDur:this.upDur,downDur:this.downDur},this.session.uuid)}else h.warn("Unknown message from socket",e)}}const q=()=>"undefined"==typeof window&&void 0!==i,V=e=>((e,t)=>o(void 0,void 0,void 0,function*(){if(q())return null;const e=window.sessionStorage.getItem(y(t));return w(e)}))(0,e),z=(e,t)=>((e,t,n)=>o(void 0,void 0,void 0,function*(){if(q())return null;"object"==typeof n&&(n=JSON.stringify(n)),window.sessionStorage.setItem(y(t),n)}))(0,e,t),G=e=>((e,t)=>o(void 0,void 0,void 0,function*(){return q()?null:window.sessionStorage.removeItem(y(t))}))(0,e);var Y,Q,H;!function(e){e.Offer="offer",e.Answer="answer"}(Y||(Y={})),function(e){e.Inbound="inbound",e.Outbound="outbound"}(Q||(Q={})),function(e){e.Invite="telnyx_rtc.invite",e.Attach="telnyx_rtc.attach",e.Answer="telnyx_rtc.answer",e.Info="telnyx_rtc.info",e.Display="telnyx_rtc.display",e.Media="telnyx_rtc.media",e.Event="telnyx_rtc.event",e.Bye="telnyx_rtc.bye",e.Punt="telnyx_rtc.punt",e.Broadcast="telnyx_rtc.broadcast",e.Subscribe="telnyx_rtc.subscribe",e.Unsubscribe="telnyx_rtc.unsubscribe",e.ClientReady="telnyx_rtc.clientReady",e.Modify="telnyx_rtc.modify",e.Ringing="telnyx_rtc.ringing",e.GatewayState="telnyx_rtc.gatewayState"}(H||(H={}));const W={generic:"event",[H.Display]:"participantData",[H.Attach]:"participantData",conferenceUpdate:"conferenceUpdate",callUpdate:"callUpdate",vertoClientReady:"vertoClientReady",userMediaError:"userMediaError"},J={destinationNumber:"",remoteCallerName:"Outbound Call",remoteCallerNumber:"",callerName:"",callerNumber:"",audio:!0,video:!1,useStereo:!1,attach:!1,screenShare:!1,userVariables:{},mediaSettings:{useSdpASBandwidthKbps:!1,sdpASBandwidthKbps:0}};var K,X,Z,ee;!function(e){e[e.New=0]="New",e[e.Requesting=1]="Requesting",e[e.Trying=2]="Trying",e[e.Recovering=3]="Recovering",e[e.Ringing=4]="Ringing",e[e.Answering=5]="Answering",e[e.Early=6]="Early",e[e.Active=7]="Active",e[e.Held=8]="Held",e[e.Hangup=9]="Hangup",e[e.Destroy=10]="Destroy",e[e.Purge=11]="Purge"}(K||(K={})),function(e){e.Participant="participant",e.Moderator="moderator"}(X||(X={})),function(e){e.Join="join",e.Leave="leave",e.Bootstrap="bootstrap",e.Add="add",e.Modify="modify",e.Delete="delete",e.Clear="clear",e.ChatMessage="chatMessage",e.LayerInfo="layerInfo",e.LogoInfo="logoInfo",e.LayoutInfo="layoutInfo",e.LayoutList="layoutList",e.ModCmdResponse="modCommandResponse"}(Z||(Z={})),function(e){e.Video="videoinput",e.AudioIn="audioinput",e.AudioOut="audiooutput"}(ee||(ee={}));const te=e=>navigator.mediaDevices.getUserMedia(e),ne=e=>e&&e instanceof MediaStream,ie=(e,t)=>{const n=S(e);null!==n&&(n.getAttribute("autoplay")||n.setAttribute("autoplay","autoplay"),n.getAttribute("playsinline")||n.setAttribute("playsinline","playsinline"),n.srcObject=t)},re=(e,t)=>o(void 0,void 0,void 0,function*(){const n=S(e);if(null===n)return h.info("No HTMLMediaElement to attach the speakerId"),!1;if("string"!=typeof t)return h.info(`Invalid speaker deviceId: '${t}'`),!1;try{return yield n.setSinkId(t),!0}catch(e){return!1}}),oe=e=>{e&&"live"===e.readyState&&e.stop()},se=e=>{ne(e)&&e.getTracks().forEach(oe),e=null},ae=e=>o(void 0,void 0,void 0,function*(){h.info("RTCService.getUserMedia",e);const{audio:t,video:n}=e;if(!t&&!n)return null;try{return yield te(e)}catch(e){throw h.error("getUserMedia error: ",e),e}}),ce=(e=null,t=!1)=>o(void 0,void 0,void 0,function*(){let n=yield navigator.mediaDevices.enumerateDevices().catch(e=>(console.error("enumerateDevices",e),[]));if(e&&(n=n.filter(t=>t.kind===e)),!n.length||!n.every(e=>e.deviceId&&e.label)){const t=yield te(((e=null)=>({audio:!e||e===ee.AudioIn||e===ee.AudioOut,video:!e||e===ee.Video}))(e));return se(t),ce(e)}if(!0===t)return n;const i=[];return n=n.filter(({kind:e,groupId:t})=>{if(!t)return!0;const n=`${e}-${t}`;return!i.includes(n)&&(i.push(n),!0)})}),le=[[320,240],[640,360],[640,480],[1280,720],[1920,1080]],ue=(e,t,n)=>o(void 0,void 0,void 0,function*(){const i=yield ce(n,!0);for(let n=0;n<i.length;n++){const{deviceId:r,label:o}=i[n];if(e===r||t===o)return r}return null}),de=e=>{const t=navigator.mediaDevices.getSupportedConstraints();Object.keys(e).map(n=>{t.hasOwnProperty(n)&&null!==e[n]&&void 0!==e[n]||delete e[n]})},pe=(e,t,n,i)=>o(void 0,void 0,void 0,function*(){const{deviceId:r}=i;if(void 0===r&&(e||t)){const r=yield ue(e,t,n).catch(e=>null);r&&(i.deviceId={exact:r})}return i}),fe=e=>{const t="\r\n",n=e.split(t),i=n.findIndex(e=>/^a=rtpmap/.test(e)&&/opus\/48000/.test(e));if(i<0)return e;const r=(e=>{const t=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),n=e.match(t);return n&&2==n.length?n[1]:null})(n[i]),o=new RegExp("a=fmtp:"+r),s=n.findIndex(e=>o.test(e));return s>=0?/stereo=1;/.test(n[s])||(n[s]+="; stereo=1; sprop-stereo=1"):n[i]+=`\r\na=fmtp:${r} stereo=1; sprop-stereo=1`,n.join(t)},he=e=>/^m=audio/.test(e),me=e=>/^m=video/.test(e),ve=(e,t)=>{const n="\r\n",i=t.split(n);if(i.findIndex(he)<i.findIndex(me))return e;const r=e.split(n),o=r.findIndex(he),s=r.findIndex(me),a=r.slice(o,s),c=r.slice(s,r.length-1);return[...r.slice(0,o),...c,...a,""].join(n)},ge=(e,t)=>{if(!e)return!1;const{subscribed:n,alreadySubscribed:i}=_e(e);return n.includes(t)||i.includes(t)},_e=e=>{const t={subscribed:[],alreadySubscribed:[],unauthorized:[],unsubscribed:[],notSubscribed:[]};return Object.keys(t).forEach(n=>{t[n]=e[n+"Channels"]||[]}),t},Ae=(e,t=null,n=null)=>{if(!ne(e))return null;let i=[];switch(t){case"audio":i=e.getAudioTracks();break;case"video":i=e.getVideoTracks();break;default:i=e.getTracks()}i.forEach(e=>{switch(n){case"on":case!0:e.enabled=!0;break;case"off":case!1:e.enabled=!1;break;default:e.enabled=!e.enabled}})},ye=e=>{Ae(e,"audio",!0)},be=e=>{Ae(e,"audio",!1)},we=e=>{Ae(e,"audio",null)};var Ce;function Se(e,t){const n=document.getElementById(t);if(n)return n;if(e&&t){const n=document.createElement("audio");return n.id=t,n.loop=!0,n.src=e,n.preload="auto",n.load(),document.body.appendChild(n),n}return null}function Ee(e){e&&(e._playFulfilled=!1,e._promise=e.play(),e._promise.then(()=>{e._playFulfilled=!0}).catch(t=>{console.error("playAudio",t),e._playFulfilled=!0}))}function ke(e){e&&(e._playFulfilled?(e.pause(),e.currentTime=0):e._promise&&e._promise.then?e._promise.then(()=>{e.pause(),e.currentTime=0}):setTimeout(()=>{e.pause(),e.currentTime=0},1e3))}!function(e){e.not_supported="not supported",e.full="full",e.partial="partial"}(Ce||(Ce={}));const xe={id:"callID",destinationNumber:"destination_number",remoteCallerName:"remote_caller_id_name",remoteCallerNumber:"remote_caller_id_number",callerName:"caller_id_name",callerNumber:"caller_id_number"};class Te extends class{buildRequest(e){this.request=Object.assign({jsonrpc:"2.0",id:d()},e)}}{constructor(e={}){if(super(),e.hasOwnProperty("dialogParams")){const t=r(e.dialogParams,["remoteSdp","localStream","remoteStream","onNotification","camId","micId","speakerId"]);for(const e in xe)e&&t.hasOwnProperty(e)&&(t[xe[e]]=t[e],delete t[e]);e.dialogParams=t}this.buildRequest({method:this.toString(),params:e})}}class Ie extends Te{constructor(e,t,n,i,r={}){super(),this.method="login";const o={login:e,passwd:t,login_token:n,userVariables:r,loginParams:{}};i&&(o.sessid=i),this.buildRequest({method:this.method,params:o})}}class Pe extends Te{constructor(e,t){super(),this.buildRequest({id:e,result:{method:t}})}}class Re extends Te{toString(){return H.Invite}}class De extends Te{toString(){return H.Answer}}class Oe extends Te{toString(){return H.Attach}}class Be extends Te{toString(){return H.Bye}}class Me extends Te{toString(){return H.Modify}}class Ne extends Te{toString(){return H.Info}}class Le extends Te{toString(){return H.Broadcast}}class Fe extends Te{toString(){return H.Subscribe}}class je extends Te{toString(){return H.Unsubscribe}}class $e{constructor(e,t){this.type=e,this.options=t,this.onSdpReadyTwice=null,this._negotiating=!1,h.info("New Peer with type:",this.type,"Options:",this.options),this._constraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0},this._sdpReady=this._sdpReady.bind(this),this.handleSignalingStateChangeEvent=this.handleSignalingStateChangeEvent.bind(this),this.handleNegotiationNeededEvent=this.handleNegotiationNeededEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.createPeerConnection=this.createPeerConnection.bind(this),this._init()}get isOffer(){return this.type===Y.Offer}get isAnswer(){return this.type===Y.Answer}startNegotiation(){this._negotiating=!0,this._isOffer()?this._createOffer():this._createAnswer()}_logTransceivers(){h.info("Number of transceivers:",this.instance.getTransceivers().length),this.instance.getTransceivers().forEach((e,t)=>{h.info(`>> Transceiver [${t}]:`,e.mid,e.direction,e.stopped),h.info(`>> Sender Params [${t}]:`,JSON.stringify(e.sender.getParameters(),null,2))})}handleSignalingStateChangeEvent(e){switch(h.info("signalingState:",this.instance.signalingState),this.instance.signalingState){case"stable":this._negotiating=!1;break;case"closed":this.instance=null;break;default:this._negotiating=!0}}handleNegotiationNeededEvent(){h.info("Negotiation needed event"),"stable"===this.instance.signalingState&&this.startNegotiation()}handleTrackEvent(e){const{streams:[t]}=e,{remoteElement:n,screenShare:i}=this.options;let{remoteStream:r}=this.options;!1===i&&ie(n,r=t)}createPeerConnection(){return o(this,void 0,void 0,function*(){var e;this.instance=(e=this._config(),new window.RTCPeerConnection(e)),this.instance.onsignalingstatechange=this.handleSignalingStateChangeEvent,this.instance.onnegotiationneeded=this.handleNegotiationNeededEvent,this.instance.ontrack=this.handleTrackEvent,this.instance.addEventListener("addstream",e=>{this.options.remoteStream=e.stream}),this.options.localStream=yield this._retrieveLocalStream().catch(e=>(B(_.MediaError,e,this.options.id),null))})}_init(){return o(this,void 0,void 0,function*(){yield this.createPeerConnection();const{localElement:e,localStream:t=null,screenShare:n=!1}=this.options;if(ne(t)){const i=t.getAudioTracks();h.info("Local audio tracks: ",i);const r=t.getVideoTracks();if(h.info("Local video tracks: ",r),this.isOffer&&"function"==typeof this.instance.addTransceiver){i.forEach(e=>{this.options.userVariables.microphoneLabel=e.label,this.instance.addTransceiver(e,{direction:"sendrecv",streams:[t]})});const e={direction:"sendrecv",streams:[t]};console.debug("Applying video transceiverParams",e),r.forEach(t=>{this.options.userVariables.cameraLabel=t.label,this.instance.addTransceiver(t,e)})}else"function"==typeof this.instance.addTrack?(i.forEach(e=>{this.options.userVariables.microphoneLabel=e.label,this.instance.addTrack(e,t)}),r.forEach(e=>{this.options.userVariables.cameraLabel=e.label,this.instance.addTrack(e,t)})):this.instance.addStream(t);!1===n&&((e=>{const t=S(e);t&&(t.muted=!0)})(e),ie(e,t))}this.isOffer?(this.options.negotiateAudio&&this._checkMediaToNegotiate("audio"),this.options.negotiateVideo&&this._checkMediaToNegotiate("video")):this.startNegotiation(),this._logTransceivers()})}_getSenderByKind(e){return this.instance.getSenders().find(({track:t})=>t&&t.kind===e)}_checkMediaToNegotiate(e){if(!this._getSenderByKind(e)){const t=this.instance.addTransceiver(e);h.info("Add transceiver",e,t)}}_createOffer(){this._isOffer()&&(this._constraints.offerToReceiveAudio=Boolean(this.options.audio),this._constraints.offerToReceiveVideo=Boolean(this.options.video),h.info("_createOffer - this._constraints",this._constraints),this.instance.createOffer(this._constraints).then(this._setLocalDescription.bind(this)).then(this._sdpReady).catch(e=>h.error("Peer _createOffer error:",e)))}_setRemoteDescription(e){this.options.useStereo&&(e.sdp=fe(e.sdp)),this.instance.localDescription&&(e.sdp=ve(e.sdp,this.instance.localDescription.sdp));const t=e;return h.info("REMOTE SDP \n","Type: "+e.type,"\n\n",e.sdp),this.instance.setRemoteDescription(t)}_createAnswer(){return o(this,void 0,void 0,function*(){if(!this._isAnswer())return;if("stable"!==this.instance.signalingState)return console.log("  - But the signaling state isn't stable, so triggering rollback"),void(yield Promise.all([this.instance.setLocalDescription({type:"rollback"}),this.instance.setRemoteDescription({sdp:this.options.remoteSdp,type:Y.Offer})]));yield this._setRemoteDescription({sdp:this.options.remoteSdp,type:Y.Offer}),this._logTransceivers();const e=yield this.instance.createAnswer();yield this._setLocalDescription(e)})}_setLocalDescription(e){const{useStereo:t,googleMaxBitrate:n,googleMinBitrate:i,googleStartBitrate:r,mediaSettings:o}=this.options;return t&&(e.sdp=fe(e.sdp)),n&&i&&r&&(e.sdp=((e,t,n,i)=>{const r=e.split("\r\n");return r.forEach((e,o)=>{/^a=fmtp:\d*/.test(e)?r[o]+=`;x-google-max-bitrate=${t};x-google-min-bitrate=${n};x-google-start-bitrate=${i}`:/^a=mid:(1|video)/.test(e)&&(r[o]+="\r\nb=AS:"+t)}),r.join("\r\n")})(e.sdp,n,i,r)),o&&o.useSdpASBandwidthKbps&&null!==o.sdpASBandwidthKbps&&(e.sdp=((e,t)=>{let n="AS",i=t;return!navigator.userAgent.match(/firefox/gim)||navigator.userAgent.match(/OPR\/[0-9]{2}/gi)||navigator.userAgent.match(/edg/gim)||(n="TIAS",i=1e3*(t>>>0)),-1===e.indexOf("b="+n+":")?e.replace(/c=IN (.*)\r\n/,"c=IN $1\r\nb="+n+":"+i+"\r\n"):e.replace(new RegExp("b="+n+":.*\r\n"),"b="+n+":"+i+"\r\n")})(e.sdp,o.sdpASBandwidthKbps)),this.instance.setLocalDescription(e)}_sdpReady(){C(this.onSdpReadyTwice)&&this.onSdpReadyTwice(this.instance.localDescription)}_retrieveLocalStream(){return o(this,void 0,void 0,function*(){if(ne(this.options.localStream))return this.options.localStream;const e=yield(t=this.options,o(void 0,void 0,void 0,function*(){let{audio:e=!0,micId:n}=t;const{micLabel:i=""}=t;n&&((n=yield ue(n,i,ee.AudioIn).catch(e=>null))&&("boolean"==typeof e&&(e={}),e.deviceId={exact:n}));let{video:r=!1,camId:o}=t;const{camLabel:s=""}=t;return o&&((o=yield ue(o,s,ee.Video).catch(e=>null))&&("boolean"==typeof r&&(r={}),r.deviceId={exact:o})),{audio:e,video:r}}));var t;return ae(e)})}_isOffer(){return this.type===Y.Offer}_isAnswer(){return this.type===Y.Answer}_config(){const{iceServers:e=[]}=this.options,t={bundlePolicy:"max-compat",iceServers:e};return h.info("RTC config",t),t}}const Ue=(e,t)=>{const{contentType:n,canvasType:i,callID:r,canvasInfo:o=null,currentLayerIdx:s=-1}=t;o&&"mcu-personal-canvas"!==i&&delete o.memberID;const a={type:W.conferenceUpdate,call:e.calls[r],canvasInfo:qe(o),currentLayerIdx:s};switch(n){case"layer-info":{const t=Object.assign({action:Z.LayerInfo},a);B(_.Notification,t,e.uuid);break}case"layout-info":{const t=Object.assign({action:Z.LayoutInfo},a);B(_.Notification,t,e.uuid);break}}},qe=e=>{const t=JSON.stringify(e).replace(/memberID/g,"participantId").replace(/ID"/g,'Id"').replace(/POS"/g,'Pos"');return w(t)},Ve="2.5.6";class ze{constructor(e,t){this.session=e,this.id="",this.state=K[K.New],this.prevState="",this.channels=[],this.role=X.Participant,this.extension=null,this._state=K.New,this._prevState=K.New,this.gotAnswer=!1,this.gotEarly=!1,this._lastSerno=0,this._targetNodeId=null,this._iceTimeout=null,this._iceDone=!1,this._statsBindings=[],this._statsIntervalId=null,this._checkConferenceSerno=(e=>{const t=e<0||!this._lastSerno||this._lastSerno&&e===this._lastSerno+1;return t&&e>=0&&(this._lastSerno=e),t}),this._doStats=(()=>{this.peer&&this.peer.instance&&0!==this._statsBindings.length&&this.peer.instance.getStats().then(e=>{e.forEach(e=>{this._statsBindings.forEach(t=>{if(t.callback){if(t.constraints)for(var n in t.constraints)if(t.constraints.hasOwnProperty(n)&&t.constraints[n]!==e[n])return;t.callback(e)}})})})});const{iceServers:n,speaker:i,micId:r,micLabel:o,camId:s,camLabel:a,localElement:c,remoteElement:l,mediaConstraints:{audio:u,video:d},ringtoneFile:p,ringbackFile:f}=e;this.options=Object.assign({},J,{audio:u,video:d,iceServers:n,localElement:c,remoteElement:l,micId:r,micLabel:o,camId:s,camLabel:a,speakerId:i,ringtoneFile:p,ringbackFile:f},t),this._onMediaError=this._onMediaError.bind(this),this._init(),this.options&&(this._ringtone=Se(this.options.ringtoneFile,"_ringtone"),this._ringback=Se(this.options.ringbackFile,"_ringback"))}get nodeId(){return this._targetNodeId}set nodeId(e){this._targetNodeId=e}get telnyxIDs(){return{telnyxCallControlId:this.options.telnyxCallControlId,telnyxSessionId:this.options.telnyxSessionId,telnyxLegId:this.options.telnyxLegId}}get localStream(){return this.options.localStream}get remoteStream(){return this.options.remoteStream}get memberChannel(){return"conference-member."+this.id}invite(){this.direction=Q.Outbound,this.peer=new $e(Y.Offer,this.options),this._registerPeerEvents()}answer(){this.stopRingtone(),this.direction=Q.Inbound,this.peer=new $e(Y.Answer,this.options),this._registerPeerEvents()}playRingtone(){Ee(this._ringtone)}stopRingtone(){ke(this._ringtone)}playRingback(){Ee(this._ringback)}stopRingback(){ke(this._ringback)}hangup(e,t){let n=e||{},i=!1!==t;this.cause=n.cause||"NORMAL_CLEARING",this.causeCode=n.causeCode||16,this.sipCode=n.sipCode||null,this.sipReason=n.sipReason||null,this.sipCallId=n.sip_call_id||null,this.setState(K.Hangup);const r=()=>{this.peer&&this.peer.instance.close(),this.setState(K.Destroy)};if(this.stopRingtone(),i){const e=new Be({sessid:this.session.sessionid,dialogParams:this.options,cause:"USER_BUSY",causeCode:17});this._execute(e).catch(e=>h.error("telnyl_rtc.bye failed!",e)).then(r.bind(this))}else r()}transfer(e){console.warn("The call.transfer method is not currently implemented.");const t=new Me({sessid:this.session.sessionid,action:"transfer",destination:e,dialogParams:this.options});this._execute(t)}replace(e){const t=new Me({sessid:this.session.sessionid,action:"replace",replaceCallID:e,dialogParams:this.options});this._execute(t)}hold(){const e=new Me({sessid:this.session.sessionid,action:"hold",dialogParams:this.options});return this._execute(e).then(this._handleChangeHoldStateSuccess.bind(this)).catch(this._handleChangeHoldStateError.bind(this))}unhold(){const e=new Me({sessid:this.session.sessionid,action:"unhold",dialogParams:this.options});return this._execute(e).then(this._handleChangeHoldStateSuccess.bind(this)).catch(this._handleChangeHoldStateError.bind(this))}toggleHold(){const e=new Me({sessid:this.session.sessionid,action:"toggleHold",dialogParams:this.options});return this._execute(e).then(this._handleChangeHoldStateSuccess.bind(this)).catch(this._handleChangeHoldStateError.bind(this))}dtmf(e){const t=new Ne({sessid:this.session.sessionid,dtmf:e,dialogParams:this.options});this._execute(t)}message(e,t){const n={from:this.session.options.login,to:e,body:t},i=new Ne({sessid:this.session.sessionid,msg:n,dialogParams:this.options});this._execute(i)}muteAudio(){be(this.options.localStream)}unmuteAudio(){ye(this.options.localStream)}toggleAudioMute(){we(this.options.localStream)}setAudioInDevice(e){return o(this,void 0,void 0,function*(){const{instance:t}=this.peer,n=t.getSenders().find(({track:{kind:e}})=>"audio"===e);if(n){const t=yield te({audio:{deviceId:{exact:e}}}),i=t.getAudioTracks()[0];n.replaceTrack(i),this.options.micId=e;const{localStream:r}=this.options;r.getAudioTracks().forEach(e=>e.stop()),r.getVideoTracks().forEach(e=>t.addTrack(e)),this.options.localStream=t}})}muteVideo(){var e;e=this.options.localStream,Ae(e,"video",!1)}unmuteVideo(){var e;e=this.options.localStream,Ae(e,"video",!0)}toggleVideoMute(){var e;e=this.options.localStream,Ae(e,"video",null)}setVideoDevice(e){return o(this,void 0,void 0,function*(){const{instance:t}=this.peer,n=t.getSenders().find(({track:{kind:e}})=>"video"===e);if(n){const t=yield te({video:{deviceId:{exact:e}}}),i=t.getVideoTracks()[0];n.replaceTrack(i);const{localElement:r,localStream:o}=this.options;ie(r,t),this.options.camId=e,o.getAudioTracks().forEach(e=>t.addTrack(e)),o.getVideoTracks().forEach(e=>e.stop()),this.options.localStream=t}})}deaf(){be(this.options.remoteStream)}undeaf(){ye(this.options.remoteStream)}toggleDeaf(){we(this.options.remoteStream)}setBandwidthEncodingsMaxBps(e,t){return o(this,void 0,void 0,function*(){if(!this||!this.peer)return void h.error("Could not set bandwidth (reason: no peer connection). Dynamic bandwidth can only be set when there is a call running - is there any call running?)");const{instance:n}=this.peer,i=n.getSenders();if(!i)return void h.error("Could not set bandwidth (reason: no senders). Dynamic bandwidth can only be set when there is a call running - is there any call running?)");const r=i.find(({track:{kind:e}})=>e===t);if(r){const n=r.getParameters();n.encodings||(n.encodings=[{rid:"h"}]),h.info("Parameters: ",n),h.info("Setting max ","audio"===t?"audio":"video"," bandwidth to: ",e," [bps]"),n.encodings[0].maxBitrate=e,yield r.setParameters(n).then(()=>{h.info("audio"===t?"New audio":"New video"," bandwidth settings in use: ",r.getParameters())}).catch(e=>console.error(e))}else h.error("Could not set bandwidth (reason: no "+t+" sender). Dynamic bandwidth can only be set when there is a call running - is there any call running?)")})}setAudioBandwidthEncodingsMaxBps(e){this.setBandwidthEncodingsMaxBps(e,"audio")}setVideoBandwidthEncodingsMaxBps(e){this.setBandwidthEncodingsMaxBps(e,"video")}getStats(e,t){if(!e)return;const n={callback:e,constraints:t};if(this._statsBindings.push(n),!this._statsIntervalId){const e=2e3;this._startStats(e)}}setState(e){switch(this._prevState=this._state,this._state=e,this.state=K[this._state].toLowerCase(),this.prevState=K[this._prevState].toLowerCase(),h.info(`Call ${this.id} state change from ${this.prevState} to ${this.state}`),this._dispatchNotification({type:W.callUpdate,call:this}),e){case K.Purge:this.hangup({cause:"PURGE",causeCode:"01"},!1);break;case K.Active:setTimeout(()=>{const{remoteElement:e,speakerId:t}=this.options;e&&t&&re(e,t)},0);break;case K.Destroy:this._finalize()}}handleMessage(e){const{method:t,params:n}=e;switch(t){case H.Answer:if(this.gotAnswer=!0,this._state>=K.Active)return;this._state>=K.Early&&this.setState(K.Active),this.gotEarly||this._onRemoteSdp(n.sdp),this.stopRingback(),this.stopRingtone();break;case H.Media:if(this._state>=K.Early)return;this.gotEarly=!0,this._onRemoteSdp(n.sdp);break;case H.Display:case H.Attach:{const{display_name:e,display_number:i,display_direction:r}=n;this.extension=i;const o=r===Q.Inbound?Q.Outbound:Q.Inbound,s={type:W[t],call:this,displayName:e,displayNumber:i,displayDirection:o};B(_.Notification,s,this.id)||B(_.Notification,s,this.session.uuid);break}case H.Info:case H.Event:{const e=Object.assign(Object.assign({},n),{type:W.generic,call:this});B(_.Notification,e,this.id)||B(_.Notification,e,this.session.uuid);break}case H.Ringing:this.playRingback();break;case H.Bye:this.stopRingback(),this.stopRingtone(),this.hangup(n,!1)}}handleConferenceUpdate(e,t){return o(this,void 0,void 0,function*(){if(!this._checkConferenceSerno(e.wireSerno)&&e.name!==t.laName)return h.error("ConferenceUpdate invalid wireSerno or packet name:",e),"INVALID_PACKET";const{action:n,data:i,hashKey:r=String(this._lastSerno),arrIndex:o}=e;switch(n){case"bootObj":{this._lastSerno=0;const{chatChannel:e,infoChannel:n,modChannel:r,laName:o,conferenceMemberID:s,role:a}=t;this._dispatchConferenceUpdate({action:Z.Join,conferenceName:o,participantId:Number(s),role:a}),e&&(yield this._subscribeConferenceChat(e)),n&&(yield this._subscribeConferenceInfo(n)),r&&a===X.Moderator&&(yield this._subscribeConferenceModerator(r));const c=[];for(const e in i)c.push(Object.assign({callId:i[e][0],index:Number(e)},b(i[e][1])));this._dispatchConferenceUpdate({action:Z.Bootstrap,participants:c});break}case"add":this._dispatchConferenceUpdate(Object.assign({action:Z.Add,callId:r,index:o},b(i)));break;case"modify":this._dispatchConferenceUpdate(Object.assign({action:Z.Modify,callId:r,index:o},b(i)));break;case"del":this._dispatchConferenceUpdate(Object.assign({action:Z.Delete,callId:r,index:o},b(i)));break;case"clear":this._dispatchConferenceUpdate({action:Z.Clear});break;default:this._dispatchConferenceUpdate({action:n,data:i,callId:r,index:o})}})}_addChannel(e){this.channels.includes(e)||this.channels.push(e);const t=this.session.relayProtocol;this.session._existsSubscription(t,e)&&(this.session.subscriptions[t][e]=Object.assign(Object.assign({},this.session.subscriptions[t][e]),{callId:this.id}))}_subscribeConferenceChat(e){return o(this,void 0,void 0,function*(){const t={nodeId:this.nodeId,channels:[e],handler:e=>{const{direction:t,from:n,fromDisplay:i,message:r,type:o}=e.data;this._dispatchConferenceUpdate({action:Z.ChatMessage,direction:t,participantNumber:n,participantName:i,messageText:r,messageType:o,messageId:e.eventSerno})}},n=yield this.session.vertoSubscribe(t).catch(e=>{h.error("ConfChat subscription error:",e)});ge(n,e)&&(this._addChannel(e),Object.defineProperties(this,{sendChatMessage:{configurable:!0,value:(t,n)=>{this.session.vertoBroadcast({nodeId:this.nodeId,channel:e,data:{action:"send",message:t,type:n}})}}}))})}_subscribeConferenceInfo(e){return o(this,void 0,void 0,function*(){const t={nodeId:this.nodeId,channels:[e],handler:e=>{const{eventData:t}=e;switch(t.contentType){case"layout-info":t.callID=this.id,Ue(this.session,t);break;default:h.error("Conference-Info unknown contentType",e)}}},n=yield this.session.vertoSubscribe(t).catch(e=>{h.error("ConfInfo subscription error:",e)});ge(n,e)&&this._addChannel(e)})}_confControl(e,t={}){const n=Object.assign({application:"conf-control",callID:this.id,value:null},t);this.session.vertoBroadcast({nodeId:this.nodeId,channel:e,data:n})}_subscribeConferenceModerator(e){return o(this,void 0,void 0,function*(){const t=(t,n=null,i=null)=>{const r=parseInt(n)||null;this._confControl(e,{command:t,id:r,value:i})},n=()=>{const{video:e}=this.options;if("boolean"==typeof e&&!e||"object"==typeof e&&A(e))throw`Conference ${this.id} has no video!`},i={nodeId:this.nodeId,channels:[e],handler:e=>{const{data:t}=e;switch(t["conf-command"]){case"list-videoLayouts":if(t.responseData){const e=JSON.stringify(t.responseData).replace(/IDS"/g,'Ids"');this._dispatchConferenceUpdate({action:Z.LayoutList,layouts:JSON.parse(e)})}break;default:this._dispatchConferenceUpdate({action:Z.ModCmdResponse,command:t["conf-command"],response:t.response})}}},r=yield this.session.vertoSubscribe(i).catch(e=>{h.error("ConfMod subscription error:",e)});ge(r,e)&&(this.role=X.Moderator,this._addChannel(e),Object.defineProperties(this,{listVideoLayouts:{configurable:!0,value:()=>{t("list-videoLayouts")}},playMedia:{configurable:!0,value:e=>{t("play",null,e)}},stopMedia:{configurable:!0,value:()=>{t("stop",null,"all")}},deaf:{configurable:!0,value:e=>{t("deaf",e)}},undeaf:{configurable:!0,value:e=>{t("undeaf",e)}},startRecord:{configurable:!0,value:e=>{t("recording",null,["start",e])}},stopRecord:{configurable:!0,value:()=>{t("recording",null,["stop","all"])}},snapshot:{configurable:!0,value:e=>{n(),t("vid-write-png",null,e)}},setVideoLayout:{configurable:!0,value:(e,i)=>{n(),t("vid-layout",null,i?[e,i]:e)}},kick:{configurable:!0,value:e=>{t("kick",e)}},muteMic:{configurable:!0,value:e=>{t("tmute",e)}},muteVideo:{configurable:!0,value:e=>{n(),t("tvmute",e)}},presenter:{configurable:!0,value:e=>{n(),t("vid-res-id",e,"presenter")}},videoFloor:{configurable:!0,value:e=>{n(),t("vid-floor",e,"force")}},banner:{configurable:!0,value:(e,i)=>{n(),t("vid-banner",e,encodeURI(i))}},volumeDown:{configurable:!0,value:e=>{t("volume_out",e,"down")}},volumeUp:{configurable:!0,value:e=>{t("volume_out",e,"up")}},gainDown:{configurable:!0,value:e=>{t("volume_in",e,"down")}},gainUp:{configurable:!0,value:e=>{t("volume_in",e,"up")}},transfer:{configurable:!0,value:(e,n)=>{t("transfer",e,n)}}}))})}_handleChangeHoldStateSuccess(e){return"active"===e.holdState?this.setState(K.Active):this.setState(K.Held),!0}_handleChangeHoldStateError(e){return h.error(`Failed to ${e.action} on call ${this.id}`),!1}_onRemoteSdp(e){let t=ve(e,this.peer.instance.localDescription.sdp);this.options.useStereo&&(t=fe(t));const n={sdp:t,type:Y.Answer};this.peer.instance.setRemoteDescription(n).then(()=>{this.gotEarly&&this.setState(K.Early),this.gotAnswer&&this.setState(K.Active)}).catch(e=>{h.error("Call setRemoteDescription Error: ",e),this.hangup()})}_requestAnotherLocalDescription(){C(this.peer.onSdpReadyTwice)?B(_.Error,new Error("SDP without candidates for the second time!"),this.session.uuid):(Object.defineProperty(this.peer,"onSdpReadyTwice",{value:this._onIceSdp.bind(this)}),this._iceDone=!1,this.peer.startNegotiation())}_onIceSdp(e){this._iceTimeout&&clearTimeout(this._iceTimeout),this._iceTimeout=null,this._iceDone=!0;const{sdp:t,type:n}=e;if(-1===t.indexOf("candidate"))return h.info("No candidate - retry \n"),void this._requestAnotherLocalDescription();this.peer.instance.removeEventListener("icecandidate",this._onIce);let i=null;const r={sessid:this.session.sessionid,sdp:t,dialogParams:this.options,"User-Agent":"Web-"+Ve};switch(n){case Y.Offer:this.setState(K.Requesting),i=new Re(r);break;case Y.Answer:this.setState(K.Answering),i=!0===this.options.attach?new Oe(r):new De(r);break;default:return h.error(this.id+" - Unknown local SDP type:",e),this.hangup({},!1)}this._execute(i).then(e=>{const{node_id:t=null}=e;this._targetNodeId=t,n===Y.Offer?this.setState(K.Trying):this.setState(K.Active)}).catch(e=>{h.error(`${this.id} - Sending ${n} error:`,e),this.hangup()})}_onIce(e){const{instance:t}=this.peer;null===this._iceTimeout&&(this._iceTimeout=setTimeout(()=>this._onIceSdp(t.localDescription),1e3)),e.candidate?h.debug("RTCPeer Candidate:",e.candidate):this._onIceSdp(t.localDescription)}_registerPeerEvents(){const{instance:e}=this.peer;this._iceDone=!1,e.onicecandidate=(e=>{this._iceDone||this._onIce(e)}),e.addEventListener("addstream",e=>{this.options.remoteStream=e.stream}),e.addEventListener("track",e=>{this.options.remoteStream=e.streams[0];const{remoteElement:t,remoteStream:n,screenShare:i}=this.options;!1===i&&ie(t,n)})}_onMediaError(e){this._dispatchNotification({type:W.userMediaError,error:e}),this.hangup({},!1)}_dispatchConferenceUpdate(e){this._dispatchNotification(Object.assign({type:W.conferenceUpdate,call:this},e))}_dispatchNotification(e){!0!==this.options.screenShare&&(B(_.Notification,e,this.id,!1)||B(_.Notification,e,this.session.uuid))}_execute(e){return this.nodeId&&(e.targetNodeId=this.nodeId),this.session.execute(e)}_init(){const{id:e,userVariables:t,remoteCallerNumber:n,onNotification:i}=this.options;e||(this.options.id=d()),this.id=this.options.id,t&&!A(t)||(this.options.userVariables=this.session.options.userVariables||{}),n||(this.options.remoteCallerNumber=this.options.destinationNumber),this.session.calls[this.id]=this,R(_.MediaError,this._onMediaError,this.id),C(i)&&R(_.Notification,i.bind(this),this.id),this.setState(K.New),h.info("New Call with Options:",this.options)}_finalize(){this._stopStats(),this.peer&&this.peer.instance&&(this.peer.instance.close(),this.peer=null);const{remoteStream:e,localStream:t}=this.options;se(e),se(t),O(_.MediaError,null,this.id),this.session.calls[this.id]=null,delete this.session.calls[this.id]}_startStats(e){this._statsIntervalId=setInterval(this._doStats,e),h.info("Stats started")}_stopStats(){this._statsIntervalId&&(clearInterval(this._statsIntervalId),this._statsIntervalId=null),h.info("Stats stopped")}}ze.setStateTelnyx=(e=>{if(e){switch(e._state){case K.Requesting:case K.Recovering:case K.Trying:case K.Early:e.state="connecting";break;case K.Active:e.state="active";break;case K.Held:e.state="held";break;case K.Hangup:case K.Destroy:e.state="done";break;case K.Answering:e.state="ringing";break;case K.New:e.state="new"}return e}});class Ge extends ze{constructor(){super(...arguments),this._statsInterval=null}hangup(e={},t=!0){this.screenShare instanceof Ge&&this.screenShare.hangup(e,t),super.hangup(e,t)}startScreenShare(e){return o(this,void 0,void 0,function*(){const t=yield(n={video:!0},navigator.mediaDevices.getDisplayMedia(n));var n;t.getTracks().forEach(e=>{e.addEventListener("ended",()=>{this.screenShare&&this.screenShare.hangup()})});const{remoteCallerName:i,remoteCallerNumber:r,callerName:o,callerNumber:s}=this.options,a=Object.assign({screenShare:!0,localStream:t,destinationNumber:this.extension+"-screen",remoteCallerName:i,remoteCallerNumber:r+"-screen",callerName:o+" (Screen)",callerNumber:s+" (Screen)"},e);return this.screenShare=new Ge(this.session,a),this.screenShare.invite(),this.screenShare})}stopScreenShare(){this.screenShare instanceof Ge&&this.screenShare.hangup()}setAudioOutDevice(e){return o(this,void 0,void 0,function*(){this.options.speakerId=e;const{remoteElement:t,speakerId:n}=this.options;return!(!t||!n)&&re(t,n)})}_finalize(){this._stats(!1),super._finalize()}_stats(e=!0){if(!1===e)return clearInterval(this._statsInterval);h.setLevel(2),this._statsInterval=window.setInterval(()=>o(this,void 0,void 0,function*(){let e="";const t=["certificate","codec","peer-connection","stream","local-candidate","remote-candidate"],n=["id","type","timestamp"];(yield this.peer.instance.getStats(null)).forEach(i=>{t.includes(i.type)||(e+=`\n${i.type}\n`,Object.keys(i).forEach(t=>{n.includes(t)||(e+=`\t${t}: ${i[t]}\n`)}))}),h.info(e)}),2e3)}}class Ye extends Te{constructor(){super(),this.method=H.GatewayState;const e={method:H.GatewayState,jsonrpc:"2.0",params:{}};this.buildRequest({method:this.method,params:e})}}class Qe{constructor(e){this.session=e,this.retriedRegister=0}_ack(e,t){const n=new Pe(e,t);this.nodeId&&(n.targetNodeId=this.nodeId),this.session.execute(n)}handleMessage(e){const{session:t}=this,{id:n,method:i,params:r}=e,{callID:o,eventChannel:s,eventType:a}=r,c=i===H.Attach;if("channelPvtData"===a)return this._handlePvtEvent(r.pvtData);if(o&&t.calls.hasOwnProperty(o)){if(!c)return t.calls[o].handleMessage(e),void this._ack(n,i);t.calls[o].hangup({},!1)}const l=()=>{const e={id:o,remoteSdp:r.sdp,destinationNumber:r.callee_id_number,remoteCallerName:r.caller_id_name,remoteCallerNumber:r.caller_id_number,callerName:r.callee_id_name,callerNumber:r.callee_id_number,attach:c,mediaSettings:r.mediaSettings};r.telnyx_call_control_id&&(e.telnyxCallControlId=r.telnyx_call_control_id),r.telnyx_session_id&&(e.telnyxSessionId=r.telnyx_session_id),r.telnyx_leg_id&&(e.telnyxLegId=r.telnyx_leg_id),r.client_state&&(e.clientState=r.client_state);const n=new Ge(t,e);return n.nodeId=this.nodeId,n},u=new Ye;switch(i){case H.Punt:t.disconnect();break;case H.Invite:{const e=l();e.playRingtone(),e.setState(K.Ringing),this._ack(n,i);break}case H.Attach:{const t=l();this.session.autoRecoverCalls?t.answer():t.setState(K.Recovering),t.handleMessage(e);break}case H.Event:case"webrtc.event":if(!s)return void h.error("Verto received an unknown event:",r);const o=t.relayProtocol,a=s.split(".")[0];t._existsSubscription(o,s)?B(o,r,s):s===t.sessionid?this._handleSessionEvent(r.eventData):t._existsSubscription(o,a)?B(o,r,a):t.calls.hasOwnProperty(s)?t.calls[s].handleMessage(e):B(_.Notification,r,t.uuid);break;case H.Info:r.type=W.generic,B(_.Notification,r,t.uuid);break;case H.ClientReady:this.session.execute(u);break;case H.GatewayState:if(e.params&&e.params.state&&"REGED"===e.params.state){this.retriedRegister=0,r.type=W.vertoClientReady,B(_.Notification,r,t.uuid);break}if(e.params&&e.params.state&&"NOREG"===e.params.state){if(this.retriedRegister+=1,3===this.retriedRegister){this.retriedRegister=0,B(_.Error,r,t.uuid);break}this.session.execute(u)}break;default:h.warn("Verto message unknown method:",e)}}_retrieveCallId(e,t){const n=Object.keys(this.session.calls);if("bootObj"!==e.action)return n.find(e=>this.session.calls[e].channels.includes(t));{const t=e.data.find(e=>n.includes(e[0]));if(t instanceof Array)return t[0]}}_handlePvtEvent(e){return o(this,void 0,void 0,function*(){const{session:t}=this,n=t.relayProtocol,{action:i,laChannel:r,laName:o,chatChannel:s,infoChannel:a,modChannel:c,conferenceMemberID:l,role:u,callID:d}=e;switch(i){case"conference-liveArray-join":{const n=()=>{t.vertoBroadcast({nodeId:this.nodeId,channel:r,data:{liveArray:{command:"bootstrap",context:r,name:o}}})},i={nodeId:this.nodeId,channels:[r],handler:({data:i})=>{const s=d||this._retrieveCallId(i,r);if(s&&t.calls.hasOwnProperty(s)){const a=t.calls[s];a._addChannel(r),a.extension=o,a.handleConferenceUpdate(i,e).then(e=>{"INVALID_PACKET"===e&&n()})}}},s=yield t.vertoSubscribe(i).catch(e=>{h.error("liveArray subscription error:",e)});ge(s,r)&&n();break}case"conference-liveArray-part":{let e=null;if(r&&t._existsSubscription(n,r)){const{callId:i=null}=t.subscriptions[n][r];if(e=t.calls[i]||null,null!==i){const n={type:W.conferenceUpdate,action:Z.Leave,conferenceName:o,participantId:Number(l),role:u};B(_.Notification,n,i,!1)||B(_.Notification,n,t.uuid),null===e&&O(_.Notification,null,i)}}const i=[r,s,a,c];t.vertoUnsubscribe({nodeId:this.nodeId,channels:i}).then(({unsubscribedChannels:t=[]})=>{e&&(e.channels=e.channels.filter(e=>!t.includes(e)))}).catch(e=>{h.error("liveArray unsubscribe error:",e)});break}}})}_handleSessionEvent(e){switch(e.contentType){case"layout-info":case"layer-info":Ue(this.session,e);break;case"logo-info":{const t={type:W.conferenceUpdate,action:Z.LogoInfo,logo:e.logoURL};B(_.Notification,t,this.session.uuid);break}}}}class He extends class extends class extends class{constructor(e){if(this.options=e,this.uuid=d(),this.sessionid="",this.subscriptions={},this.signature=null,this.relayProtocol=null,this.contexts=[],this.timeoutErrorCode=-32e3,this.connection=null,this._jwtAuth=!1,this._doKeepAlive=!1,this._autoReconnect=!0,this._idle=!1,this._executeQueue=[],!this.validateOptions())throw new Error("Invalid init options");this._onSocketOpen=this._onSocketOpen.bind(this),this._onSocketCloseOrError=this._onSocketCloseOrError.bind(this),this._onSocketMessage=this._onSocketMessage.bind(this),this._handleLoginError=this._handleLoginError.bind(this),this._attachListeners(),this.connection=new U(this)}get __logger(){return h}get connected(){return this.connection&&this.connection.connected}get reconnectDelay(){return 1e3*(6,2,Math.floor(-3*Math.random()+6))}execute(e){return this._idle?new Promise(t=>this._executeQueue.push({resolve:t,msg:e})):this.connected?this.connection.send(e).catch(e=>{throw e.code&&e.code===this.timeoutErrorCode&&this._closeConnection(),e}):new Promise(t=>{this._executeQueue.push({resolve:t,msg:e}),this.connect()})}executeRaw(e){this._idle?this._executeQueue.push({msg:e}):this.connection.sendRawText(e)}validateOptions(){return x(this.options)}broadcast(e){}disconnect(){return o(this,void 0,void 0,function*(){clearTimeout(this._reconnectTimeout),this.subscriptions={},this._autoReconnect=!1,this.relayProtocol=null,this._closeConnection(),yield G(this.signature),this._executeQueue=[],this._detachListeners()})}on(e,t){return R(e,t,this.uuid),this}off(e,t){return O(e,t,this.uuid),this}connect(){return o(this,void 0,void 0,function*(){this.connection||(this.connection=new U(this)),this._attachListeners(),this.connection.isAlive||this.connection.connect()})}_handleLoginError(e){B(_.Error,e,this.uuid)}_onSocketOpen(){return o(this,void 0,void 0,function*(){})}_onSocketCloseOrError(e){h.error(`Socket ${e.type} ${e.message}`),this.relayProtocol&&M(this.relayProtocol);for(const e in this.subscriptions)M(e);this.subscriptions={},this.contexts=[],this._autoReconnect&&(this._reconnectTimeout=setTimeout(()=>this.connect(),this.reconnectDelay))}_onSocketMessage(e){}_removeSubscription(e,t){this._existsSubscription(e,t)&&(t?(delete this.subscriptions[e][t],O(e,null,t)):(delete this.subscriptions[e],M(e)))}_addSubscription(e,t=null,n){this._existsSubscription(e,n)||(this._existsSubscription(e)||(this.subscriptions[e]={}),this.subscriptions[e][n]={},C(t)&&R(e,t,n))}_existsSubscription(e,t){return!(!this.subscriptions.hasOwnProperty(e)||!(!t||t&&this.subscriptions[e].hasOwnProperty(t)))}_attachListeners(){this._detachListeners(),this.on(_.SocketOpen,this._onSocketOpen),this.on(_.SocketClose,this._onSocketCloseOrError),this.on(_.SocketError,this._onSocketCloseOrError),this.on(_.SocketMessage,this._onSocketMessage)}_detachListeners(){this.off(_.SocketOpen,this._onSocketOpen),this.off(_.SocketClose,this._onSocketCloseOrError),this.off(_.SocketError,this._onSocketCloseOrError),this.off(_.SocketMessage,this._onSocketMessage)}_emptyExecuteQueues(){this._executeQueue.forEach(({resolve:e,msg:t})=>{"string"==typeof t?this.executeRaw(t):e(this.execute(t))})}_closeConnection(){this._idle=!0,clearTimeout(this._keepAliveTimeout),this.connection&&this.connection.close()}_keepAlive(){if(!0===this._doKeepAlive){if(!1===this._pong)return this._closeConnection();this._pong=!1,this._keepAliveTimeout=setTimeout(()=>this._keepAlive(),1e4)}}static on(e,t){R(e,t)}static off(e){O(e)}static uuid(){return d()}}{constructor(e){super(e),this.calls={},this.autoRecoverCalls=!0,this._iceServers=[],this._localElement=null,this._remoteElement=null,this._jwtAuth=!0,this._audioConstraints=!0,this._videoConstraints=!1,this._speaker=null,this.iceServers=e.iceServers,this.ringtoneFile=e.ringtoneFile,this.ringbackFile=e.ringbackFile}get reconnectDelay(){return 1e3}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return o(this,void 0,void 0,function*(){this.sessionid=yield V("sessId"),e.connect.call(this)})}checkPermissions(e=!0,t=!0){return o(this,void 0,void 0,function*(){try{const n=yield ae({audio:e,video:t});return se(n),!0}catch(e){return!1}})}logout(){this.disconnect()}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return o(this,void 0,void 0,function*(){Object.keys(this.calls).forEach(e=>this.calls[e].setState(K.Purge)),this.calls={},yield e.disconnect.call(this)})}speedTest(e){return new Promise((t,n)=>{if(D(_.SpeedTest,n=>{const{upDur:i,downDur:r}=n,o=r?8*e/(r/1e3)/1024:0;t({upDur:i,downDur:r,upKps:(i?8*e/(i/1e3)/1024:0).toFixed(0),downKps:o.toFixed(0)})},this.uuid),!(e=Number(e)))return n("Invalid parameter 'bytes': "+e);this.executeRaw("#SPU "+e);let i=e/1024;e%1024&&i++;const r=".".repeat(1024);for(let e=0;e<i;e++)this.executeRaw("#SPB "+r);this.executeRaw("#SPE")})}getDevices(){return ce().catch(e=>(B(_.MediaError,e,this.uuid),[]))}getVideoDevices(){return ce(ee.Video).catch(e=>(B(_.MediaError,e,this.uuid),[]))}getAudioInDevices(){return ce(ee.AudioIn).catch(e=>(B(_.MediaError,e,this.uuid),[]))}getAudioOutDevices(){return ce(ee.AudioOut).catch(e=>(console.error("getAudioOutDevices",e),B(_.MediaError,e,this.uuid),[]))}validateDeviceId(e,t,n){return ue(e,t,n)}getDeviceResolutions(e){return o(this,void 0,void 0,function*(){try{return yield(e=>o(void 0,void 0,void 0,function*(){const t=[],n=yield ae({video:{deviceId:{exact:e}}}),i=n.getVideoTracks()[0];for(let e=0;e<le.length;e++){const[n,r]=le[e];(yield i.applyConstraints({width:{exact:n},height:{exact:r}}).then(()=>!0).catch(()=>!1))&&t.push({resolution:`${n}x${r}`,width:n,height:r})}return se(n),t}))(e)}catch(e){throw e}})}get mediaConstraints(){return{audio:this._audioConstraints,video:this._videoConstraints}}setAudioSettings(e){return o(this,void 0,void 0,function*(){if(!e)throw new Error("You need to provide the settings object");const{micId:t,micLabel:n}=e,i=r(e,["micId","micLabel"]);return de(i),this._audioConstraints=yield pe(t,n,"audioinput",i),this.micId=t,this.micLabel=n,this._audioConstraints})}disableMicrophone(){this._audioConstraints=!1}enableMicrophone(){this._audioConstraints=!0}setVideoSettings(e){return o(this,void 0,void 0,function*(){if(!e)throw new Error("You need to provide the settings object");const{camId:t,camLabel:n}=e,i=r(e,["camId","camLabel"]);return de(i),this._videoConstraints=yield pe(t,n,"videoinput",i),this.camId=t,this.camLabel=n,this._videoConstraints})}disableWebcam(){this._videoConstraints=!1}enableWebcam(){this._videoConstraints=!0}set iceServers(e){this._iceServers="boolean"==typeof e?e?[{urls:["stun:stun.l.google.com:19302"]}]:[]:e||[g,v]}get iceServers(){return this._iceServers}set speaker(e){this._speaker=e}get speaker(){return this._speaker}set localElement(e){this._localElement=S(e)}get localElement(){return this._localElement}set remoteElement(e){this._remoteElement=S(e)}get remoteElement(){return this._remoteElement}vertoBroadcast({nodeId:e,channel:t="",data:n}){if(!t)throw new Error("Invalid channel for broadcast: "+t);const i=new Le({sessid:this.sessionid,eventChannel:t,data:n});e&&(i.targetNodeId=e),this.execute(i).catch(e=>e)}vertoSubscribe({nodeId:e,channels:t=[],handler:n}){return o(this,void 0,void 0,function*(){if(!(t=t.filter(e=>e&&!this._existsSubscription(this.relayProtocol,e))).length)return{};const i=new Fe({sessid:this.sessionid,eventChannel:t});e&&(i.targetNodeId=e);const r=yield this.execute(i),{unauthorized:o=[],subscribed:s=[]}=_e(r);return o.length&&o.forEach(e=>this._removeSubscription(this.relayProtocol,e)),s.forEach(e=>this._addSubscription(this.relayProtocol,n,e)),r})}vertoUnsubscribe({nodeId:e,channels:t=[]}){return o(this,void 0,void 0,function*(){if(!(t=t.filter(e=>e&&this._existsSubscription(this.relayProtocol,e))).length)return{};const n=new je({sessid:this.sessionid,eventChannel:t});e&&(n.targetNodeId=e);const i=yield this.execute(n),{unsubscribed:r=[],notSubscribed:o=[]}=_e(i);return r.forEach(e=>this._removeSubscription(this.relayProtocol,e)),o.forEach(e=>this._removeSubscription(this.relayProtocol,e)),i})}static telnyxStateCall(e){return Ge.setStateTelnyx(e)}}{constructor(){super(...arguments),this.relayProtocol="verto-protocol",this.timeoutErrorCode=-329990}validateOptions(){return x(this.options)}newCall(e){if(!e||!e.destinationNumber)throw new Error("Verto.newCall() error: destinationNumber is required.");const t=new Ge(this,e);return t.invite(),t}broadcast(e){return this.vertoBroadcast(e)}subscribe(e){return this.vertoSubscribe(e)}unsubscribe(e){return this.vertoUnsubscribe(e)}_onSocketOpen(){return o(this,void 0,void 0,function*(){this._idle=!1;const{login:e,password:t,passwd:n,login_token:i,userVariables:r}=this.options,o=new Ie(e,t||n,i,this.sessionid,r),s=yield this.execute(o).catch(this._handleLoginError);s&&(this._autoReconnect=!0,this.sessionid=s.sessid,z("sessId",this.sessionid),B(_.Ready,this,this.uuid),h.info("Session Ready!"))})}_onSocketMessage(e){new Qe(this).handleMessage(e)}}{constructor(e){super(e)}newCall(e){return super.newCall(e)}static webRTCInfo(){return function(){try{const{browserInfo:e,name:t,version:n,supportAudio:i,supportVideo:r}=function(){if(!window||!window.navigator||!window.navigator.userAgent)throw new Error("You should use @telnyx/webrtc in a web browser such as Chrome|Firefox|Safari");if(navigator.userAgent.match(/chrom(e|ium)/gim)&&!navigator.userAgent.match(/OPR\/[0-9]{2}/gi)&&!navigator.userAgent.match(/edg/gim)){const e=navigator.userAgent.match(/chrom(e|ium)\/[0-9]+\./gim)[0].split("/"),t=e[0],n=parseInt(e[1],10);return{browserInfo:navigator.userAgent,name:t,version:n,supportAudio:!0,supportVideo:!0}}if(navigator.userAgent.match(/firefox/gim)&&!navigator.userAgent.match(/OPR\/[0-9]{2}/gi)&&!navigator.userAgent.match(/edg/gim)){const e=navigator.userAgent.match(/firefox\/[0-9]+\./gim)[0].split("/"),t=e[0],n=parseInt(e[1],10);return{browserInfo:navigator.userAgent,name:t,version:n,supportAudio:!0,supportVideo:!1}}if(navigator.userAgent.match(/safari/gim)&&!navigator.userAgent.match(/OPR\/[0-9]{2}/gi)&&!navigator.userAgent.match(/edg/gim)){const e=navigator.userAgent.match(/safari/gim)[0],t=navigator.userAgent.match(/version\/[0-9]+\./gim)[0].split("/"),n=parseInt(t[1],10);return{browserInfo:navigator.userAgent,name:e,version:n,supportAudio:!0,supportVideo:!0}}if(navigator.userAgent.match(/edg/gim)&&!navigator.userAgent.match(/OPR\/[0-9]{2}/gi)){const e=navigator.userAgent.match(/edg\/[0-9]+\./gim)[0].split("/"),t=e[0],n=parseInt(e[1],10);return{browserInfo:navigator.userAgent,name:t,version:n,supportAudio:!0,supportVideo:!0}}throw new Error("This browser does not support @telnyx/webrtc. To see browser support list: `TelnyxRTC.webRTCSupportedBrowserList()`")}(),o=window.RTCPeerConnection,s=window.RTCSessionDescription,a=window.RTCIceCandidate,c=window.navigator&&window.navigator.mediaDevices,l=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;return{browserInfo:e,browserName:t,browserVersion:n,supportWebRTC:!!(o&&s&&a&&c&&l),supportWebRTCAudio:i,supportWebRTCVideo:r,supportRTCPeerConnection:!!o,supportSessionDescription:!!s,supportIceCandidate:!!a,supportMediaDevices:!!c,supportGetUserMedia:!!ae}}catch(e){return e.message}}()}static webRTCSupportedBrowserList(){return[{operationSystem:"Android",supported:[{browserName:"Chrome",features:["audio"],supported:Ce.full},{browserName:"Firefox",features:["audio"],supported:Ce.partial},{browserName:"Safari",supported:Ce.not_supported},{browserName:"Edge",supported:Ce.not_supported}]},{operationSystem:"iOS",supported:[{browserName:"Chrome",supported:Ce.not_supported},{browserName:"Firefox",supported:Ce.not_supported},{browserName:"Safari",features:["video","audio"],supported:Ce.full},{browserName:"Edge",supported:Ce.not_supported}]},{operationSystem:"Linux",supported:[{browserName:"Chrome",features:["video","audio"],supported:Ce.full},{browserName:"Firefox",features:["audio"],supported:Ce.partial},{browserName:"Safari",supported:Ce.not_supported},{browserName:"Edge",supported:Ce.not_supported}]},{operationSystem:"MacOS",supported:[{browserName:"Chrome",features:["video","audio"],supported:Ce.full},{browserName:"Firefox",features:["audio"],supported:Ce.partial},{browserName:"Safari",features:["video","audio"],supported:Ce.full},{browserName:"Edge",features:["audio"],supported:Ce.partial}]},{operationSystem:"Windows",supported:[{browserName:"Chrome",features:["video","audio"],supported:Ce.full},{browserName:"Firefox",features:["audio"],supported:Ce.partial},{browserName:"Safari",supported:Ce.not_supported},{browserName:"Edge",features:["audio"],supported:Ce.partial}]}]}}}).call(t,n("DuR2"),n("W2nU"))},"1kS7":function(e,t){t.f=Object.getOwnPropertySymbols},"3+sl":function(e,t,n){var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i},r=n("6D9g"),o=r.NotSupportedError,s=r.InvalidArgumentError,a=n("pA9u"),c="PeerConnection is null",l="WebRTC statistics are unsupported";function u(e){if(!e)return Promise.reject(new s(c));if("function"!=typeof e.getStats)return Promise.reject(new o(l));var t;try{t=e.getStats()}catch(n){t=new Promise(function(t){return e.getStats(t)}).then(a.fromRTCStatsResponse)}return t}function d(e){var t,n=null,i=new function(){};Array.from(e.values()).forEach(function(r){if(!r.isRemote){var o=r.type.replace("-","");if(t=t||r.timestamp,r.remoteId){var s=e.get(r.remoteId);s&&s.roundTripTime&&(i.rtt=1e3*s.roundTripTime)}switch(o){case"inboundrtp":i.timestamp=i.timestamp||r.timestamp,i.jitter=1e3*r.jitter,i.packetsLost=r.packetsLost,i.packetsReceived=r.packetsReceived,i.bytesReceived=r.bytesReceived;break;case"outboundrtp":if(i.timestamp=r.timestamp,i.packetsSent=r.packetsSent,i.bytesSent=r.bytesSent,r.codecId){var a=e.get(r.codecId);i.codecName=a?a.mimeType&&a.mimeType.match(/(.*\/)?(.*)/)[2]:r.codecId}break;case"transport":n=r.id}}}),i.timestamp||(i.timestamp=t);var r=e.get(n);if(!r)return i;var o=e.get(r.selectedCandidatePairId);if(!o)return i;var s=e.get(o.localCandidateId),a=e.get(o.remoteCandidateId);return i.rtt||(i.rtt=o&&1e3*o.currentRoundTripTime),Object.assign(i,{localAddress:s&&s.ip,remoteAddress:a&&a.ip}),i}e.exports={getRTCStats:function(e,t){return t=Object.assign({createRTCSample:d},t),u(e).then(t.createRTCSample)},getRTCIceCandidateStatsReport:function(e){return u(e).then(function(e){var t,n=Array.from(e.values()).reduce(function(e,t){switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(function(t){e[t]||(e[t]=[])}),t.type){case"candidate-pair":e.candidatePairs.push(t);break;case"local-candidate":e.localCandidates.push(t);break;case"remote-candidate":e.remoteCandidates.push(t);break;case"transport":t.selectedCandidatePairId&&(e.transport=t)}return e},{}),r=n.candidatePairs,o=n.localCandidates,s=n.remoteCandidates,a=n.transport,c=r.find(function(e){return e.selected||a&&e.id===a.selectedCandidatePairId});return c&&(t={localCandidate:o.find(function(e){return e.id===c.localCandidateId}),remoteCandidate:s.find(function(e){return e.id===c.remoteCandidateId})}),{iceCandidateStats:i(o,s),selectedIceCandidatePairStats:t}})}}},"30zq":function(e,t,n){"use strict";e.exports=WebSocket},"3bUl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Atx/"),r=n("6D9g"),o=i.SOUNDS_BASE_URL+"/outgoing.mp3",s=function(){function e(e,t,n,i){this._name=e,this._availableDevices=t,this._beforeChange=n,this._isSupported=i,this._activeDevices=new Set}return e.prototype.delete=function(e){var t=!!this._activeDevices.delete(e),n=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&n&&this._activeDevices.add(n);var i=Array.from(this._activeDevices.values()).map(function(e){return e.deviceId});return this._beforeChange(this._name,i),!!t},e.prototype.get=function(){return this._activeDevices},e.prototype.set=function(e){var t=this;if(!this._isSupported)return Promise.reject(new r.NotSupportedError("This browser does not support audio output selection"));var n=Array.isArray(e)?e:[e];if(!n.length)return Promise.reject(new r.InvalidArgumentError("Must specify at least one device to set"));var i=[],o=n.map(function(e){var n=t._availableDevices.get(e);return n||i.push(e),n});return i.length?Promise.reject(new r.InvalidArgumentError("Devices not found: "+i.join(", "))):new Promise(function(e){e(t._beforeChange(t._name,n))}).then(function(){t._activeDevices.clear(),o.forEach(t._activeDevices.add,t._activeDevices)})},e.prototype.test=function(e){return void 0===e&&(e=o),this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(function(t){var n;return new Promise(function(t){(n=new Audio(e)).oncanplay=t}).then(function(){return n.setSinkId(t.deviceId).then(function(){return n.play()})})})):Promise.reject(new r.InvalidStateError("No active output devices to test")):Promise.reject(new r.NotSupportedError("This browser does not support audio output selection"))},e}();t.default=s},"3r+w":function(e,t){},"5+9/":function(e,t,n){const i=n("ZOjo"),r=n("gVZZ"),o=n("qFti"),s=n("9rXv"),a=n("Fy0/")("engine.io-client:polling");e.exports=class extends i{get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{a("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(a("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){a("pre-pause polling complete"),--e||t()})),this.writable||(a("we are currently writing - waiting to pause"),e++,this.once("drain",function(){a("pre-pause writing complete"),--e||t()}))}else t()}poll(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){a("polling got data %s",e),o.decodePayload(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose(),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{a("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,o.encodePayload(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}},"5PS0":function(e,t,n){"use strict";var i,r,o,s;Object.defineProperty(t,"__esModule",{value:!0});var a,c,l,u=n("6D9g");!function(e){e.Au="au",e.Br="br",e.Ie="ie",e.Jp="jp",e.Sg="sg",e.UsOr="us-or",e.UsVa="us-va"}(a=t.DeprecatedRegion||(t.DeprecatedRegion={})),function(e){e.Sydney="sydney",e.SaoPaulo="sao-paulo",e.Dublin="dublin",e.Frankfurt="frankfurt",e.Tokyo="tokyo",e.Singapore="singapore",e.Ashburn="ashburn",e.Umatilla="umatilla",e.Roaming="roaming",e.AshburnIx="ashburn-ix",e.SanJoseIx="san-jose-ix",e.LondonIx="london-ix",e.FrankfurtIx="frankfurt-ix",e.SingaporeIx="singapore-ix",e.SydneyIx="sydney-ix",e.TokyoIx="tokyo-ix"}(c=t.Edge||(t.Edge={})),function(e){e.Au1="au1",e.Au1Ix="au1-ix",e.Br1="br1",e.De1="de1",e.De1Ix="de1-ix",e.Gll="gll",e.Ie1="ie1",e.Ie1Ix="ie1-ix",e.Ie1Tnx="ie1-tnx",e.Jp1="jp1",e.Jp1Ix="jp1-ix",e.Sg1="sg1",e.Sg1Ix="sg1-ix",e.Sg1Tnx="sg1-tnx",e.Us1="us1",e.Us1Ix="us1-ix",e.Us1Tnx="us1-tnx",e.Us2="us2",e.Us2Ix="us2-ix",e.Us2Tnx="us2-tnx"}(l=t.Region||(t.Region={})),t.deprecatedRegions=((i={})[a.Au]=l.Au1,i[a.Br]=l.Br1,i[a.Ie]=l.Ie1,i[a.Jp]=l.Jp1,i[a.Sg]=l.Sg1,i[a.UsOr]=l.Us1,i[a.UsVa]=l.Us1,i),t.regionShortcodes={ASIAPAC_SINGAPORE:l.Sg1,ASIAPAC_SYDNEY:l.Au1,ASIAPAC_TOKYO:l.Jp1,EU_FRANKFURT:l.De1,EU_IRELAND:l.Ie1,SOUTH_AMERICA_SAO_PAULO:l.Br1,US_EAST_VIRGINIA:l.Us1,US_WEST_OREGON:l.Us2};(r={})[l.Au1]="chunderw-vpc-gll-au1.twilio.com",r[l.Au1Ix]="chunderw-vpc-gll-au1-ix.twilio.com",r[l.Br1]="chunderw-vpc-gll-br1.twilio.com",r[l.De1]="chunderw-vpc-gll-de1.twilio.com",r[l.De1Ix]="chunderw-vpc-gll-de1-ix.twilio.com",r[l.Gll]="chunderw-vpc-gll.twilio.com",r[l.Ie1]="chunderw-vpc-gll-ie1.twilio.com",r[l.Ie1Ix]="chunderw-vpc-gll-ie1-ix.twilio.com",r[l.Ie1Tnx]="chunderw-vpc-gll-ie1-tnx.twilio.com",r[l.Jp1]="chunderw-vpc-gll-jp1.twilio.com",r[l.Jp1Ix]="chunderw-vpc-gll-jp1-ix.twilio.com",r[l.Sg1]="chunderw-vpc-gll-sg1.twilio.com",r[l.Sg1Ix]="chunderw-vpc-gll-sg1-ix.twilio.com",r[l.Sg1Tnx]="chunderw-vpc-gll-sg1-tnx.twilio.com",r[l.Us1]="chunderw-vpc-gll-us1.twilio.com",r[l.Us1Ix]="chunderw-vpc-gll-us1-ix.twilio.com",r[l.Us1Tnx]="chunderw-vpc-gll-us1-tnx.twilio.com",r[l.Us2]="chunderw-vpc-gll-us2.twilio.com",r[l.Us2Ix]="chunderw-vpc-gll-us2-ix.twilio.com",r[l.Us2Tnx]="chunderw-vpc-gll-us2-tnx.twilio.com";function d(e){return e===t.defaultRegion?t.defaultChunderRegionURI:"chunderw-vpc-gll-"+e+".twilio.com"}t.edgeToRegion=((o={})[c.Sydney]=l.Au1,o[c.SaoPaulo]=l.Br1,o[c.Dublin]=l.Ie1,o[c.Frankfurt]=l.De1,o[c.Tokyo]=l.Jp1,o[c.Singapore]=l.Sg1,o[c.Ashburn]=l.Us1,o[c.Umatilla]=l.Us2,o[c.Roaming]=l.Gll,o[c.AshburnIx]=l.Us1Ix,o[c.SanJoseIx]=l.Us2Ix,o[c.LondonIx]=l.Ie1Ix,o[c.FrankfurtIx]=l.De1Ix,o[c.SingaporeIx]=l.Sg1Ix,o[c.SydneyIx]=l.Au1Ix,o[c.TokyoIx]=l.Jp1Ix,o),t.regionToEdge=((s={})[l.Au1]=c.Sydney,s[l.Br1]=c.SaoPaulo,s[l.Ie1]=c.Dublin,s[l.De1]=c.Frankfurt,s[l.Jp1]=c.Tokyo,s[l.Sg1]=c.Singapore,s[l.Us1]=c.Ashburn,s[l.Us2]=c.Umatilla,s[l.Gll]=c.Roaming,s[l.Us1Ix]=c.AshburnIx,s[l.Us2Ix]=c.SanJoseIx,s[l.Ie1Ix]=c.LondonIx,s[l.De1Ix]=c.FrankfurtIx,s[l.Sg1Ix]=c.SingaporeIx,s[l.Au1Ix]=c.SydneyIx,s[l.Jp1Ix]=c.TokyoIx,s[l.Us1Tnx]=c.AshburnIx,s[l.Us2Tnx]=c.AshburnIx,s[l.Ie1Tnx]=c.LondonIx,s[l.Sg1Tnx]=c.SingaporeIx,s),t.defaultRegion="gll",t.defaultEdge=c.Roaming,t.defaultChunderRegionURI="chunderw-vpc-gll.twilio.com",t.getChunderURIs=function(e,n,i){if(n&&"string"!=typeof n)throw new u.InvalidArgumentError("If `region` is provided, it must be of type `string`.");if(e&&"string"!=typeof e&&!Array.isArray(e))throw new u.InvalidArgumentError("If `edge` is provided, it must be of type `string` or an array of strings.");var r,o=[];if(n&&e)throw new u.InvalidArgumentError("You cannot specify `region` when `edge` is specified in`Twilio.Device.Options`.");if(n){var s=n;if(o.push("Regions are deprecated in favor of edges. Please see this page for documentation: https://www.twilio.com/docs/voice/client/edges."),Object.values(a).includes(s)&&(s=t.deprecatedRegions[s]),Object.values(l).includes(s)){var p=t.regionToEdge[s];o.push('Region "'+s+'" is deprecated, please use `edge` "'+p+'".')}r=[d(s)]}else if(e){var f=Object.values(c);r=(Array.isArray(e)?e:[e]).map(function(e){return f.includes(e)?d(t.edgeToRegion[e]):"voice-js."+e+".twilio.com"})}else r=[t.defaultChunderRegionURI];return i&&o.length&&setTimeout(function(){return i(o.join("\n"))}),r},t.getRegionShortcode=function(e){return t.regionShortcodes[e]||null}},"5Q7Q":function(e,t,n){
/*!
 * pulltorefreshjs v0.1.22
 * (c) Rafael Soto
 * Released under the MIT License.
 */var i;i=function(){"use strict";var e={pullStartY:null,pullMoveY:null,handlers:[],styleEl:null,events:null,dist:0,state:"pending",timeout:null,distResisted:0,supportsPassive:!1,supportsPointerEvents:"undefined"!=typeof window&&!!window.PointerEvent};try{window.addEventListener("test",null,{get passive(){e.supportsPassive=!0}})}catch(e){}var t,n={setupDOM:function(t){if(!t.ptrElement){var n=document.createElement("div");t.mainElement!==document.body?t.mainElement.parentNode.insertBefore(n,t.mainElement):document.body.insertBefore(n,document.body.firstChild),n.classList.add(t.classPrefix+"ptr"),n.innerHTML=t.getMarkup().replace(/__PREFIX__/g,t.classPrefix),t.ptrElement=n,"function"==typeof t.onInit&&t.onInit(t),e.styleEl||(e.styleEl=document.createElement("style"),e.styleEl.setAttribute("id","pull-to-refresh-js-style"),document.head.appendChild(e.styleEl)),e.styleEl.textContent=t.getStyles().replace(/__PREFIX__/g,t.classPrefix).replace(/\s+/g," ")}return t},onReset:function(t){t.ptrElement&&(t.ptrElement.classList.remove(t.classPrefix+"refresh"),t.ptrElement.style[t.cssProp]="0px",setTimeout(function(){t.ptrElement&&t.ptrElement.parentNode&&(t.ptrElement.parentNode.removeChild(t.ptrElement),t.ptrElement=null),e.state="pending"},t.refreshTimeout))},update:function(t){var n=t.ptrElement.querySelector("."+t.classPrefix+"icon"),i=t.ptrElement.querySelector("."+t.classPrefix+"text");n&&("refreshing"===e.state?n.innerHTML=t.iconRefreshing:n.innerHTML=t.iconArrow),i&&("releasing"===e.state&&(i.innerHTML=t.instructionsReleaseToRefresh),"pulling"!==e.state&&"pending"!==e.state||(i.innerHTML=t.instructionsPullToRefresh),"refreshing"===e.state&&(i.innerHTML=t.instructionsRefreshing))}},i=function(t){return e.pointerEventsEnabled&&e.supportsPointerEvents?t.screenY:t.touches[0].screenY},r=function(){var r;function o(t){var o=e.handlers.filter(function(e){return e.contains(t.target)})[0];e.enable=!!o,o&&"pending"===e.state&&(r=n.setupDOM(o),o.shouldPullToRefresh()&&(e.pullStartY=i(t)),clearTimeout(e.timeout),n.update(o))}function s(t){r&&r.ptrElement&&e.enable&&(e.pullStartY?e.pullMoveY=i(t):r.shouldPullToRefresh()&&(e.pullStartY=i(t)),"refreshing"!==e.state?("pending"===e.state&&(r.ptrElement.classList.add(r.classPrefix+"pull"),e.state="pulling",n.update(r)),e.pullStartY&&e.pullMoveY&&(e.dist=e.pullMoveY-e.pullStartY),e.distExtra=e.dist-r.distIgnore,e.distExtra>0&&(t.cancelable&&t.preventDefault(),r.ptrElement.style[r.cssProp]=e.distResisted+"px",e.distResisted=r.resistanceFunction(e.distExtra/r.distThreshold)*Math.min(r.distMax,e.distExtra),"pulling"===e.state&&e.distResisted>r.distThreshold&&(r.ptrElement.classList.add(r.classPrefix+"release"),e.state="releasing",n.update(r)),"releasing"===e.state&&e.distResisted<r.distThreshold&&(r.ptrElement.classList.remove(r.classPrefix+"release"),e.state="pulling",n.update(r)))):t.cancelable&&r.shouldPullToRefresh()&&e.pullStartY<e.pullMoveY&&t.preventDefault())}function a(){if(r&&r.ptrElement&&e.enable){if(clearTimeout(t),t=setTimeout(function(){r&&r.ptrElement&&"pending"===e.state&&n.onReset(r)},500),"releasing"===e.state&&e.distResisted>r.distThreshold)e.state="refreshing",r.ptrElement.style[r.cssProp]=r.distReload+"px",r.ptrElement.classList.add(r.classPrefix+"refresh"),e.timeout=setTimeout(function(){var e=r.onRefresh(function(){return n.onReset(r)});e&&"function"==typeof e.then&&e.then(function(){return n.onReset(r)}),e||r.onRefresh.length||n.onReset(r)},r.refreshTimeout);else{if("refreshing"===e.state)return;r.ptrElement.style[r.cssProp]="0px",e.state="pending"}n.update(r),r.ptrElement.classList.remove(r.classPrefix+"release"),r.ptrElement.classList.remove(r.classPrefix+"pull"),e.pullStartY=e.pullMoveY=null,e.dist=e.distResisted=0}}function c(){r&&r.mainElement.classList.toggle(r.classPrefix+"top",r.shouldPullToRefresh())}var l=e.supportsPassive?{passive:e.passive||!1}:void 0;return e.pointerEventsEnabled&&e.supportsPointerEvents?(window.addEventListener("pointerup",a),window.addEventListener("pointerdown",o),window.addEventListener("pointermove",s,l)):(window.addEventListener("touchend",a),window.addEventListener("touchstart",o),window.addEventListener("touchmove",s,l)),window.addEventListener("scroll",c),{onTouchEnd:a,onTouchStart:o,onTouchMove:s,onScroll:c,destroy:function(){e.pointerEventsEnabled&&e.supportsPointerEvents?(window.removeEventListener("pointerdown",o),window.removeEventListener("pointerup",a),window.removeEventListener("pointermove",s,l)):(window.removeEventListener("touchstart",o),window.removeEventListener("touchend",a),window.removeEventListener("touchmove",s,l)),window.removeEventListener("scroll",c)}}},o={distThreshold:60,distMax:80,distReload:50,distIgnore:0,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"Pull down to refresh",instructionsReleaseToRefresh:"Release to refresh",instructionsRefreshing:"Refreshing",refreshTimeout:500,getMarkup:function(){return'\n<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>\n'},getStyles:function(){return"\n.__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n\n.__PREFIX__pull {\n  transition: none;\n}\n\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n\n/*\nWhen at the top of the page, disable vertical overscroll so passive touch\nlisteners can take over.\n*/\n.__PREFIX__top {\n  touch-action: pan-x pan-down pinch-zoom;\n}\n\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}\n"},onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(e){return Math.min(1,e/2.5)},shouldPullToRefresh:function(){return!window.scrollY}},s=["mainElement","ptrElement","triggerElement"],a=function(t){var n={};return Object.keys(o).forEach(function(e){n[e]=t[e]||o[e]}),n.refreshTimeout="number"==typeof t.refreshTimeout?t.refreshTimeout:o.refreshTimeout,s.forEach(function(e){"string"==typeof n[e]&&(n[e]=document.querySelector(n[e]))}),e.events||(e.events=r()),n.contains=function(e){return n.triggerElement.contains(e)},n.destroy=function(){clearTimeout(e.timeout);var t=e.handlers.indexOf(n);e.handlers.splice(t,1)},n};return{setPassiveMode:function(t){e.passive=t},setPointerEventsMode:function(t){e.pointerEventsEnabled=t},destroyAll:function(){e.events&&(e.events.destroy(),e.events=null),e.handlers.forEach(function(e){e.destroy()})},init:function(t){void 0===t&&(t={});var n=a(t);return e.handlers.push(n),n},_:{setupHandler:a,setupEvents:r,setupDOM:n.setupDOM,onReset:n.onReset,update:n.update}}},e.exports=i()},"5QVw":function(e,t,n){e.exports={default:n("BwfY"),__esModule:!0}},"5e3N":function(e,t){const n=Object.create(null);n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";const i=Object.create(null);Object.keys(n).forEach(e=>{i[n[e]]=e});e.exports={PACKET_TYPES:n,PACKET_TYPES_REVERSE:i,ERROR_PACKET:{type:"error",data:"parser error"}}},"5zde":function(e,t,n){n("zQR9"),n("qyJz"),e.exports=n("FeBl").Array.from},"63Gd":function(e,t,n){var i=n("OMJi"),r=e.exports=n("VRsY");function o(e,t,n,r){n=n||"";var o=new e(i.format.apply(this,[n].concat(r)));throw Error.captureStackTrace(o,t),o}function s(e,t,n){o(r.IllegalArgumentError,e,t,n)}function a(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function c(e){return function(t,n){var i=a(t);if(i==e)return t;s(arguments.callee,n||'Expected "'+e+'" but got "'+i+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||s(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,t){e||function(e,t,n){o(r.IllegalStateError,e,t,n)}(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;s(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;s(arguments.callee,t||'Expected value to be defined and not null but got "'+a(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=c("string"),e.exports.checkIsArray=c("array"),e.exports.checkIsNumber=c("number"),e.exports.checkIsBoolean=c("boolean"),e.exports.checkIsFunction=c("function"),e.exports.checkIsObject=c("object")},"6D9g":function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wodx");t.AuthorizationErrors=o.AuthorizationErrors,t.ClientErrors=o.ClientErrors,t.GeneralErrors=o.GeneralErrors,t.MediaErrors=o.MediaErrors,t.SignalingErrors=o.SignalingErrors;var s=function(e){function t(t){var n=e.call(this,t)||this;return n.name="InvalidArgumentError",n}return r(t,e),t}(Error);t.InvalidArgumentError=s;var a=function(e){function t(t){var n=e.call(this,t)||this;return n.name="InvalidStateError",n}return r(t,e),t}(Error);t.InvalidStateError=a;var c=function(e){function t(t){var n=e.call(this,t)||this;return n.name="NotSupportedError",n}return r(t,e),t}(Error);t.NotSupportedError=c,t.getErrorByCode=function(e){var t=o.errorsByCode.get(e);if(!t)throw new s("Error code "+e+" not found");return t}},"6ycC":function(e,t){},"7UMu":function(e,t,n){var i=n("R9M2");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"7mji":function(e,t,n){const i=n("vveS");e.exports.pick=((e,...t)=>t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{}));const r=setTimeout,o=clearTimeout;e.exports.installTimerFunctions=((e,t)=>{t.useNativeTimers?(e.setTimeoutFn=r.bind(i),e.clearTimeoutFn=o.bind(i)):(e.setTimeoutFn=setTimeout.bind(i),e.clearTimeoutFn=clearTimeout.bind(i))})},"8+ir":function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,s=n("vzCy"),a=n("30zq"),c=n("6D9g"),l=n("o8cY"),u=n("e21k"),d=5e3;!function(e){e.Connecting="connecting",e.Closed="closed",e.Open="open"}(o=t.WSTransportState||(t.WSTransportState={}));var p=function(e){function t(t,n){void 0===n&&(n={});var i=e.call(this)||this;i.state=o.Closed,i._log=l.default.getInstance(),i._shouldFallback=!1,i._uriIndex=0,i._moveUriIndex=function(){i._uriIndex++,i._uriIndex>=i._uris.length&&(i._uriIndex=0)},i._onSocketClose=function(e){if(i._log.info("Received websocket close event code: "+e.code+". Reason: "+e.reason),1006===e.code||1015===e.code){i.emit("error",{code:31005,message:e.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new c.SignalingErrors.ConnectionError});var t=i.state===o.Open||i._previousState===o.Open;!i._shouldFallback&&t||i._moveUriIndex(),i._shouldFallback=!0}i._closeSocket()},i._onSocketError=function(e){i._log.info("WebSocket received error: "+e.message),i.emit("error",{code:31e3,message:e.message||"WSTransport socket error",twilioError:new c.SignalingErrors.ConnectionDisconnected})},i._onSocketMessage=function(e){i._setHeartbeatTimeout(),i._socket&&"\n"===e.data?i._socket.send("\n"):i.emit("message",e)},i._onSocketOpen=function(){i._log.info("WebSocket opened successfully."),i._timeOpened=Date.now(),i._shouldFallback=!1,i._setState(o.Open),clearTimeout(i._connectTimeout),i._setHeartbeatTimeout(),i.emit("open")},i._connectTimeoutMs=n.connectTimeoutMs||d;var r=100;t&&t.length>1&&(r=Math.floor(4001*Math.random())+1e3);var s={factor:2,initialDelay:r,maxDelay:"number"==typeof n.backoffMaxMs?Math.max(n.backoffMaxMs,3e3):2e4,randomisationFactor:.4};return i._log.info("Initializing transport backoff using config: ",s),i._backoff=u.exponential(s),i._uris=t,i._WebSocket=n.WebSocket||a,i._backoff.on("backoff",function(e,t){i.state!==o.Closed&&i._log.info("Will attempt to reconnect WebSocket in "+t+"ms")}),i._backoff.on("ready",function(e){i.state!==o.Closed&&i._connect(e+1)}),i}return r(t,e),t.prototype.close=function(){this._log.info("WSTransport.close() called..."),this._close()},t.prototype.open=function(){this._log.info("WSTransport.open() called..."),!this._socket||this._socket.readyState!==a.CONNECTING&&this._socket.readyState!==a.OPEN?this._connect():this._log.info("WebSocket already open.")},t.prototype.send=function(e){if(!this._socket||this._socket.readyState!==a.OPEN)return!1;try{this._socket.send(e)}catch(e){return this._log.info("Error while sending message:",e.message),this._closeSocket(),!1}return!0},t.prototype._close=function(){this._setState(o.Closed),this._closeSocket()},t.prototype._closeSocket=function(){clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),this._socket?(this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),this._socket.readyState!==a.CONNECTING&&this._socket.readyState!==a.OPEN||this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>1e4&&this._backoff.reset(),this._backoff.backoff(),delete this._socket,this.emit("close")):this._log.info("No WebSocket to clean up.")},t.prototype._connect=function(e){var t=this;e?this._log.info("Attempting to reconnect (retry #"+e+")..."):this._log.info("Attempting to connect..."),this._closeSocket(),this._setState(o.Connecting);var n=null;try{n=new this._WebSocket(this._uris[this._uriIndex])}catch(e){return this._log.info("Could not connect to endpoint:",e.message),this._close(),void this.emit("error",{code:31e3,message:e.message||"Could not connect to "+this._uris[this._uriIndex],twilioError:new c.SignalingErrors.ConnectionDisconnected})}delete this._timeOpened,this._connectTimeout=setTimeout(function(){t._log.info("WebSocket connection attempt timed out."),t._moveUriIndex(),t._closeSocket()},this._connectTimeoutMs),n.addEventListener("close",this._onSocketClose),n.addEventListener("error",this._onSocketError),n.addEventListener("message",this._onSocketMessage),n.addEventListener("open",this._onSocketOpen),this._socket=n},t.prototype._setHeartbeatTimeout=function(){var e=this;clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(function(){e._log.info("No messages received in 15 seconds. Reconnecting..."),e._shouldFallback=!0,e._closeSocket()},15e3)},t.prototype._setState=function(e){this._previousState=this.state,this.state=e},Object.defineProperty(t.prototype,"uri",{get:function(){return this._uris[this._uriIndex]},enumerable:!0,configurable:!0}),t}(s.EventEmitter);t.default=p},"9GJz":function(e,t){},"9rXv":function(e,t,n){"use strict";var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,c=0;function l(e){var t="";do{t=r[e%o]+t,e=Math.floor(e/o)}while(e>0);return t}function u(){var e=l(+new Date);return e!==i?(a=0,i=e):e+"."+l(a++)}for(;c<o;c++)s[r[c]]=c;u.encode=l,u.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*o+s[e.charAt(c)];return t},e.exports=u},"Atx/":function(e,t){var n="https://sdk.twilio.com/js/client/sounds/releases/1.0.0";e.exports.COWBELL_AUDIO_URL=n+"/cowbell.mp3?cache=1.14.0",e.exports.ECHO_TEST_DURATION=2e4,e.exports.PACKAGE_NAME="twilio-client",e.exports.RELEASE_VERSION="1.14.0",e.exports.SOUNDS_BASE_URL=n,e.exports.USED_ERRORS=["AuthorizationErrors.AccessTokenExpired","AuthorizationErrors.AccessTokenInvalid","AuthorizationErrors.AuthenticationFailed","ClientErrors.BadRequest","GeneralErrors.ConnectionError","GeneralErrors.TransportError","GeneralErrors.UnknownError","MediaErrors.ClientLocalDescFailed","MediaErrors.ClientRemoteDescFailed","MediaErrors.ConnectionError","SignalingErrors.ConnectionDisconnected","SignalingErrors.ConnectionError"]},BO1k:function(e,t,n){e.exports={default:n("fxRn"),__esModule:!0}},BV0x:function(e,t,n){"use strict";var i=n("IbSi").XMLHttpRequest;var r=function(e,t,n){var r={};r.XMLHttpRequest=r.XMLHttpRequest||i;var o=new r.XMLHttpRequest;for(var s in o.open(e,t.url,!0),o.onreadystatechange=function(){4===o.readyState&&(200<=o.status&&o.status<300?n(null,o.responseText):n(new Error(o.responseText)))},t.headers)o.setRequestHeader(s,t.headers[s]);o.send(JSON.stringify(t.body))};r.get=function(e,t){return new this("GET",e,t)},r.post=function(e,t){return new this("POST",e,t)},e.exports=r},BwfY:function(e,t,n){n("fWfb"),n("M6a0"),n("OYls"),n("QWe/"),e.exports=n("FeBl").Symbol},ClGK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const i=n("psuf"),r=n("7mji"),o=n("hlye"),s=n("TUo+"),a=n("VedT"),c=n("+lzb"),l=n("zXjU"),u=n("Fy0/")("socket.io-client:manager");t.Manager=class extends l.StrictEventEmitter{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,(0,r.installTimerFunctions)(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new c({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||s;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(u("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=i(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=(0,a.on)(t,"open",function(){n.onopen(),e&&e()}),o=(0,a.on)(t,"error",t=>{u("error"),n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()});if(!1!==this._timeout){const e=this._timeout;u("connect attempt will timeout after %d",e),0===e&&r();const n=this.setTimeoutFn(()=>{u("connect attempt timed out after %d",e),r(),t.close(),t.emit("error",new Error("timeout"))},e);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){u("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push((0,a.on)(e,"ping",this.onping.bind(this)),(0,a.on)(e,"data",this.ondata.bind(this)),(0,a.on)(e,"error",this.onerror.bind(this)),(0,a.on)(e,"close",this.onclose.bind(this)),(0,a.on)(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){u("error",e),this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new o.Socket(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return void u("socket %s is still active, skipping close",e);this._close()}_packet(e){u("writing packet %j",e);const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){u("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){u("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){u("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(u("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(u("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(u("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}},"D+HT":function(e,t,n){"use strict";var i=n("wkuB");function r(e,t,n,r,o){var s=i.writeRtpDescription(e.kind,t);if(s+=i.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(r?r.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),s}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},r=function(e,t,n,r){var o=i(e.parameters.apt,n),s=i(t.parameters.apt,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(i){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(i.name.toLowerCase()===s.name.toLowerCase()&&i.clockRate===s.clockRate){if("rtx"===i.name.toLowerCase()&&i.parameters&&s.parameters.apt&&!r(i,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(i.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var i=0;i<t.headerExtensions.length;i++){var r=t.headerExtensions[i];if(e.uri===r.uri){n.headerExtensions.push(r);break}}}),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function l(t,n,i,r){var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=r,e.setTimeout(function(){t._dispatchEvent("track",o)})}var u=function(n){var r=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof i;return r&&(i=[i]),i=i.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=r?i[0]:i,!!i.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=i.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},u.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(e){var t=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&t)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return this.transceivers.push(n),n},u.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var i;if(this.transceivers.find(function(e){return e.track===t}))throw c("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(i=this.transceivers[r]);return i||(i=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),i.track=t,i.stream=n,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),i.rtpSender},u.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var i=e.clone();e.getTracks().forEach(function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),i.getTracks().forEach(function(e){n.addTrack(e,i)})}},u.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var i=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(i)&&this.localStreams.indexOf(i)>-1&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},u.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},u.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},u.prototype._createIceGatherer=function(t,n){var i=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;r.state=n?"completed":"gathering",null!==i.transceivers[t].bufferedCandidateEvents&&i.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},u.prototype._gather=function(t,n){var r=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1;var l=i.writeCandidate(a);s.candidate=Object.assign(s.candidate,i.parseCandidate(l)),s.candidate.candidate=l}var u=i.getMediaSections(r.localDescription.sdp);u[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",r.localDescription.sdp=i.getDescription(r.localDescription.sdp)+u.join("");var d=r.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),c||r._dispatchEvent("icecandidate",s),d&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout(function(){s.forEach(function(e){o.onlocalcandidate(e)})},0)}},u.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateConnectionState()};var i=new e.RTCDtlsTransport(n);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:i}},u.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},u.prototype._transceive=function(e,n,r){var s=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:i.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),r&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},u.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=i.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=i.parseRtpParameters(e);r.transceivers[t].localCapabilities=n}),r.transceivers.forEach(function(e,t){r._gather(e.mid,t)});else if("answer"===e.type){t=i.splitSections(r.remoteDescription.sdp),n=t.shift();var a=i.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var s=r.transceivers[t],c=s.iceGatherer,l=s.iceTransport,u=s.dtlsTransport,d=s.localCapabilities,p=s.remoteCapabilities;if(!(i.isRejected(e)&&0===i.matchPrefix(e,"a=bundle-only").length)&&!s.isDatachannel){var f=i.getIceParameters(e,n),h=i.getDtlsParameters(e,n);a&&(h.role="server"),r.usingBundle&&0!==t||(r._gather(s.mid,t),"new"===l.state&&l.start(c,f,a?"controlling":"controlled"),"new"===u.state&&u.start(h));var m=o(d,p);r._transceive(s,m.codecs.length>0,!1)}})}return r.localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(r){var o=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(c("TypeError",'Unsupported type "'+r.type+'"'));if(!s("setRemoteDescription",r.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+r.type+" in state "+o.signalingState));var u={};o.remoteStreams.forEach(function(e){u[e.id]=e});var d=[],p=i.splitSections(r.sdp),f=p.shift(),h=i.matchPrefix(f,"a=ice-lite").length>0,m=i.matchPrefix(f,"a=group:BUNDLE ").length>0;o.usingBundle=m;var v=i.matchPrefix(f,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!v&&v.substr(14).split(" ").indexOf("trickle")>=0,p.forEach(function(s,c){var l=i.splitLines(s),p=i.getKind(s),v=i.isRejected(s)&&0===i.matchPrefix(s,"a=bundle-only").length,g=l[0].substr(2).split(" ")[2],_=i.getDirection(s,f),A=i.parseMsid(s),y=i.getMid(s)||i.generateIdentifier();if("application"!==p||"DTLS/SCTP"!==g){var b,w,C,S,E,k,x,T,I,P,R,D=i.parseRtpParameters(s);v||(P=i.getIceParameters(s,f),(R=i.getDtlsParameters(s,f)).role="client"),x=i.parseRtpEncodingParameters(s);var O=i.parseRtcpParameters(s),B=i.matchPrefix(s,"a=end-of-candidates",f).length>0,M=i.matchPrefix(s,"a=candidate:").map(function(e){return i.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===r.type||"answer"===r.type)&&!v&&m&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==r.type||v)"answer"!==r.type||v||(w=(b=o.transceivers[c]).iceGatherer,C=b.iceTransport,S=b.dtlsTransport,E=b.rtpReceiver,k=b.sendEncodingParameters,T=b.localCapabilities,o.transceivers[c].recvEncodingParameters=x,o.transceivers[c].remoteCapabilities=D,o.transceivers[c].rtcpParameters=O,M.length&&"new"===C.state&&(!h&&!B||m&&0!==c?M.forEach(function(e){a(b.iceTransport,e)}):C.setRemoteCandidates(M)),m&&0!==c||("new"===C.state&&C.start(w,P,"controlling"),"new"===S.state&&S.start(R)),o._transceive(b,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!E||"sendrecv"!==_&&"sendonly"!==_?delete b.rtpReceiver:(I=E.track,A?(u[A.stream]||(u[A.stream]=new e.MediaStream),n(I,u[A.stream]),d.push([I,E,u[A.stream]])):(u.default||(u.default=new e.MediaStream),n(I,u.default),d.push([I,E,u.default]))));else{(b=o.transceivers[c]||o._createTransceiver(p)).mid=y,b.iceGatherer||(b.iceGatherer=o._createIceGatherer(c,m)),M.length&&"new"===b.iceTransport.state&&(!B||m&&0!==c?M.forEach(function(e){a(b.iceTransport,e)}):b.iceTransport.setRemoteCandidates(M)),T=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(T.codecs=T.codecs.filter(function(e){return"rtx"!==e.name})),k=b.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var N,L=!1;if("sendrecv"===_||"sendonly"===_){if(L=!b.rtpReceiver,E=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,p),L)I=E.track,A&&"-"===A.stream||(A?(u[A.stream]||(u[A.stream]=new e.MediaStream,Object.defineProperty(u[A.stream],"id",{get:function(){return A.stream}})),Object.defineProperty(I,"id",{get:function(){return A.track}}),N=u[A.stream]):(u.default||(u.default=new e.MediaStream),N=u.default)),N&&(n(I,N),b.associatedRemoteMediaStreams.push(N)),d.push([I,E,N])}else b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach(function(t){var n,i,r=t.getTracks().find(function(e){return e.id===b.rtpReceiver.track.id});r&&(n=r,(i=t).removeTrack(n),i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:n})))}),b.associatedRemoteMediaStreams=[]);b.localCapabilities=T,b.remoteCapabilities=D,b.rtpReceiver=E,b.rtcpParameters=O,b.sendEncodingParameters=k,b.recvEncodingParameters=x,o._transceive(o.transceivers[c],!1,L)}}else o.transceivers[c]={mid:y,isDatachannel:!0}}),void 0===o._dtlsRole&&(o._dtlsRole="offer"===r.type?"active":"passive"),o.remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(u).forEach(function(t){var n=u[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout(function(){o._dispatchEvent("addstream",i)})}d.forEach(function(e){var t=e[0],i=e[1];n.id===e[2].id&&l(o,t,i,[n])})}}),d.forEach(function(e){e[2]||l(o,e[0],e[1],[])}),e.setTimeout(function(){o&&o.transceivers&&o.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},u.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},u.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0||t.checking>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":(t.connected>0||t.completed>0)&&(e="connected"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},u.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter(function(e){return"audio"===e.kind}).length,s=n.transceivers.filter(function(e){return"video"===e.kind}).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)});o>0||s>0;)o>0&&(n._createTransceiver("audio"),o--),s>0&&(n._createTransceiver("video"),s--);var l=i.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(r,o){var s=r.track,a=r.kind,c=r.mid||i.generateIdentifier();r.mid=c,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(o,n.usingBundle));var l=e.RTCRtpSender.getCapabilities(a);t<15019&&(l.codecs=l.codecs.filter(function(e){return"rtx"!==e.name})),l.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),l.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var u=r.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,a)),r.localCapabilities=l,r.sendEncodingParameters=u}),"max-compat"!==n._config.bundlePolicy&&(l+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){l+=r(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,l+="a="+i.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))});var u=new e.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(u)},u.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));var s=i.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n");var a=i.getMediaSections(n.remoteDescription.sdp).length;n.transceivers.forEach(function(e,i){if(!(i+1>a))if(e.isDatachannel)s+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+e.mid+"\r\n";else{var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var l=o(e.localCapabilities,e.remoteCapabilities);!l.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=r(e,l,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}});var l=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(l)},u.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(r,o){if(!n.remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var l=0;l<n.transceivers.length;l++)if(n.transceivers[l].mid===e.sdpMid){s=l;break}var u=n.transceivers[s];if(!u)return o(c("OperationError","Can not add ICE candidate"));if(u.isDatachannel)return r();var d=Object.keys(e.candidate).length>0?i.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return r();if(d.component&&1!==d.component)return r();if((0===s||s>0&&u.iceTransport!==n.transceivers[0].iceTransport)&&!a(u.iceTransport,d))return o(c("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=i.getMediaSections(n.remoteDescription.sdp))[s]+="a="+(d.type?p:"end-of-candidates")+"\r\n",n.remoteDescription.sdp=t.join("")}else for(var f=0;f<n.transceivers.length&&(n.transceivers[f].isDatachannel||(n.transceivers[f].iceTransport.addRemoteCandidate({}),(t=i.getMediaSections(n.remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",n.remoteDescription.sdp=i.getDescription(n.remoteDescription.sdp)+t.join(""),!n.usingBundle));f++);r()})},u.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});return new Promise(function(t){var n=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){var i;e[t].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(i=e[t]).type]||i.type,n.set(t,e[t])})}),t(n)})})};var d=["createOffer","createAnswer"];return d.forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),u}},DxTx:function(e,t){},EKta:function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=l(e),s=i[0],a=i[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(u(e,s,s+16383>a?a:s+16383));1===r?(t=e[n-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var r,o,s=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},EarI:function(e,t){var n=1e3,i=60*n,r=60*i,o=24*r,s=7*o,a=365.25*o;function c(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}e.exports=function(e,t){t=t||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return c(e,t,o,"day");if(t>=r)return c(e,t,r,"hour");if(t>=i)return c(e,t,i,"minute");if(t>=n)return c(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=r)return Math.round(e/r)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},EjNl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("6D9g"),r={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]},o=function(){function e(e){var t=this;this._context=e,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(function(e){e.connect(t._context.destination),e.gain.value=.1,t._gainNodes.push(e)})}return e.prototype.cleanup=function(){this._gainNodes.forEach(function(e){e.disconnect()})},e.prototype.play=function(e){var t=this,n=r[e];if(!n)throw new i.InvalidArgumentError("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach(function(e,i){e.type="sine",e.frequency.value=n[i],e.connect(t._gainNodes[i]),e.start(),e.stop(t._context.currentTime+.1),e.addEventListener("ended",function(){return e.disconnect()})})},e}();t.default=o},EuP9:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n("EKta"),r=n("ujcs"),o=n("sOR5");function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|h(t,n),r=(e=a(e,i)).write(t,n);r!==i&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=a(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(i)return $(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:g(e,t,n,i,r);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,i,r){var o,s=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var u=-1;for(o=n;o<a;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var d=!0,p=0;p<c;p++)if(l(e,o+p)!==l(t,p)){d=!1;break}if(d)return o}return-1}function _(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function A(e,t,n,i){return q($(t,e.length-n),e,n,i)}function y(e,t,n,i){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function b(e,t,n,i){return y(e,t,n,i)}function w(e,t,n,i){return q(U(t),e,n,i)}function C(e,t,n,i){return q(function(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function S(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,s,a,c,l=e[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[r+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[r+1],s=e[r+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[r+1],s=e[r+2],a=e[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=k));return n}(i)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,i){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof i?a(e,t).fill(n,i):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):function(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,r){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,r>>>=0,this===e)return 0;for(var o=r-i,s=n-t,a=Math.min(o,s),l=this.slice(i,r),u=e.slice(t,n),d=0;d<a;++d)if(l[d]!==u[d]){o=l[d],s=u[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function x(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function T(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function I(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=j(e[o]);return r}function P(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,i,r,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function O(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function B(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function M(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,i,o){return o||M(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function L(e,t,n,i,o){return o||M(e,0,n,8),r.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n,i=this.length;if(e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var r=t-e;n=new c(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},c.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),r.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),r.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),r.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),r.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);D(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);D(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&n<t&&t<i)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:$(new c(e,i).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(t,n("DuR2"))},FDmz:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n("aXuZ"),s=function(){function e(){this._operations=[]}return e.prototype.enqueue=function(e){var t=!!this._operations.length,n=new o.default;return this._operations.push({deferred:n,callback:e}),t||this._processQueue(),n.promise},e.prototype._processQueue=function(){return i(this,void 0,void 0,function(){var e,t,n,i,o,s,a;return r(this,function(r){switch(r.label){case 0:if(!this._operations.length)return[3,5];e=this._operations[0],t=e.deferred,n=e.callback,i=void 0,o=void 0,s=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n()];case 2:return i=r.sent(),s=!0,[3,4];case 3:return a=r.sent(),o=a,[3,4];case 4:return this._operations.shift(),s?t.resolve(i):t.reject(o),[3,0];case 5:return[2]}})})},e}();t.AsyncQueue=s},FIts:function(e,t,n){"use strict";var i=n("LnYC");e.exports=i.default},"Fy0/":function(e,t,n){(function(i){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&"%c"===e&&(r=++i)}),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==i&&"env"in i&&(e=Object({NODE_ENV:"production"}).DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n("ZQIL")(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(t,n("W2nU"))},Gu7T:function(e,t,n){"use strict";t.__esModule=!0;var i,r=n("c/Tr"),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},H2mp:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n("6D9g").NotSupportedError,o=n("SBlr");e.exports=function(e,t){return(t=t||{}).util=t.util||o,t.navigator=t.navigator||("undefined"!=typeof navigator?navigator:null),new Promise(function(n,o){if(!t.navigator)throw new r("getUserMedia is not supported");switch("function"){case i(t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia):return n(t.navigator.mediaDevices.getUserMedia(e));case i(t.navigator.webkitGetUserMedia):return t.navigator.webkitGetUserMedia(e,n,o);case i(t.navigator.mozGetUserMedia):return t.navigator.mozGetUserMedia(e,n,o);case i(t.navigator.getUserMedia):return t.navigator.getUserMedia(e,n,o);default:throw new r("getUserMedia is not supported")}}).catch(function(e){throw t.util.isFirefox()&&"NotReadableError"===e.name?new r("Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.\nRelated Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324"):e})}},IbSi:function(e,t,n){"use strict";e.exports={XMLHttpRequest:XMLHttpRequest}},Irnv:function(e,t){},Izth:function(e,t){},JBKJ:function(e,t,n){"use strict";var i=n("vzCy").EventEmitter,r=n("BV0x");function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);var i=(n=Object.assign({defaultPayload:function(){return{}},host:"eventgw.twilio.com"},n)).defaultPayload;"function"!=typeof i&&(i=function(){return Object.assign({},n.defaultPayload)});var s=!0,a=Object.assign({app_name:void 0,app_version:void 0},n.metadata);Object.defineProperties(this,{_defaultPayload:{value:i},_isEnabled:{get:function(){return s},set:function(e){s=e}},_host:{value:n.host},_request:{value:n.request||r,writable:!0},_token:{value:t,writable:!0},isEnabled:{enumerable:!0,get:function(){return s}},metadata:{enumerable:!0,get:function(){return a}},productName:{enumerable:!0,value:e},token:{enumerable:!0,get:function(){return this._token}}})}function s(e){return{timestamp:new Date(e.timestamp).toISOString(),total_packets_received:e.totals.packetsReceived,total_packets_lost:e.totals.packetsLost,total_packets_sent:e.totals.packetsSent,total_bytes_received:e.totals.bytesReceived,total_bytes_sent:e.totals.bytesSent,packets_received:e.packetsReceived,packets_lost:e.packetsLost,packets_lost_fraction:e.packetsLostFraction&&Math.round(100*e.packetsLostFraction)/100,bytes_received:e.bytesReceived,bytes_sent:e.bytesSent,audio_codec:e.codecName,audio_level_in:e.audioInputLevel,audio_level_out:e.audioOutputLevel,call_volume_input:e.inputVolume,call_volume_output:e.outputVolume,jitter:e.jitter,rtt:e.rtt,mos:e.mos&&Math.round(100*e.mos)/100}}n("OMJi").inherits(o,i),o.prototype._post=function(e,t,n,i,r,o,s){var a=this;if(!this.isEnabled&&!s)return Promise.resolve();if(!(o&&(o.parameters&&o.parameters.CallSid||o.outboundConnectionId)))return Promise.resolve();var c={publisher:this.productName,group:n,name:i,timestamp:(new Date).toISOString(),level:t.toUpperCase(),payload_type:"application/json",private:!1,payload:r&&r.forEach?r.slice(0):Object.assign(this._defaultPayload(o),r)};this.metadata&&(c.publisher_metadata=this.metadata);var l={url:"https://"+this._host+"/v4/"+e,body:c,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token}},u=this;return new Promise(function(e,t){u._request.post(l,function(n){n?(a.emit("error",n),t(n)):e()})})},o.prototype.post=function(e,t,n,i,r,o){return this._post("EndpointEvents",e,t,n,i,r,o)},o.prototype.debug=function(e,t,n,i){return this.post("debug",e,t,n,i)},o.prototype.info=function(e,t,n,i){return this.post("info",e,t,n,i)},o.prototype.warn=function(e,t,n,i){return this.post("warning",e,t,n,i)},o.prototype.error=function(e,t,n,i){return this.post("error",e,t,n,i)},o.prototype.postMetrics=function(e,t,n,i,r){var o=this;return new Promise(function(a){var c=n.map(s).map(function(e){return Object.assign(e,i)});a(o._post("EndpointMetrics","info",e,t,c,r))})},o.prototype.setToken=function(e){this._token=e},o.prototype.enable=function(){this._isEnabled=!0},o.prototype.disable=function(){this._isEnabled=!1},e.exports=o},JHvc:function(e,t,n){var i=n("vzCy"),r=n("oYPl");function o(e){i.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}n("OMJi").inherits(o,i.EventEmitter),o.prototype.failAfter=function(e){r.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},o.prototype.backoff=function(e){r.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},o.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},o.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},e.exports=o},Jm5Q:function(e,t,n){"use strict";e.exports=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{deviceId:{get:function(){return t.deviceId}},groupId:{get:function(){return t.groupId}},kind:{get:function(){return t.kind}},label:{get:function(){return t.label}}})}},K4Q2:function(e,t,n){"use strict";var i=n("6D9g"),r=i.InvalidArgumentError,o=i.MediaErrors,s=i.NotSupportedError,a=i.SignalingErrors,c=n("o8cY").default,l=n("SBlr"),u=n("VAe1"),d=n("fTPN").setIceAggressiveNomination,p="new";function f(e,t,n,i){if(!e||!t||!n)throw new r("Audiohelper, pstream and getUserMedia are required arguments");if(!(this instanceof f))return new f(e,t,n,i);function o(){}this.onopen=o,this.onerror=o,this.onclose=o,this.ondisconnected=o,this.onfailed=o,this.onconnected=o,this.onreconnected=o,this.onsignalingstatechange=o,this.ondtlstransportstatechange=o,this.onicegatheringfailure=o,this.onicegatheringstatechange=o,this.oniceconnectionstatechange=o,this.onpcconnectionstatechange=o,this.onicecandidate=o,this.onselectedcandidatepairchange=o,this.onvolume=o,this.version=null,this.pstream=t,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1,this.getUserMedia=n;var s="undefined"!=typeof window&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!s&&"undefined"!=typeof HTMLAudioElement&&HTMLAudioElement.prototype.setSinkId,this._audioContext=s&&e._audioContext,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=o,this._onHangup=o,this._remoteStream=null,this._shouldManageStream=!0,this._iceState=p,this._isUnifiedPlan=i.isUnifiedPlan,this.options=i=i||{},this.navigator=i.navigator||("undefined"!=typeof navigator?navigator:null),this.util=i.util||l,this.codecPreferences=i.codecPreferences,this._log=c.getInstance(),this}function h(e,t){"function"==typeof e.addTrack?t.getAudioTracks().forEach(function(n){e.addTrack(n,t)}):e.addStream(t)}function m(e){var t="undefined"!=typeof MediaStream?new MediaStream:new webkitMediaStream;return e.getAudioTracks().forEach(t.addTrack,t),t}function v(e,t){if(void 0!==e.srcObject)e.srcObject=t;else if(void 0!==e.mozSrcObject)e.mozSrcObject=t;else{if(void 0===e.src)return!1;var n=e.options.window||window;e.src=(n.URL||n.webkitURL).createObjectURL(t)}return!0}f.prototype.uri=function(){return this._uri},f.prototype.openWithConstraints=function(e){return this.getUserMedia({audio:e}).then(this._setInputTracksFromStream.bind(this,!1))},f.prototype.setInputTracksFromStream=function(e){var t=this;return this._setInputTracksFromStream(!0,e).then(function(){t._shouldManageStream=!1})},f.prototype._createAnalyser=function(e,t){t=Object.assign({fftSize:32,smoothingTimeConstant:.3},t);var n=e.createAnalyser();for(var i in t)n[i]=t[i];return n},f.prototype._setVolumeHandler=function(e){this.onvolume=e},f.prototype._startPollingVolume=function(){if(this._audioContext&&this.stream&&this._remoteStream){var e=this._audioContext,t=(this._inputAnalyser=this._createAnalyser(e)).frequencyBinCount,n=new Uint8Array(t);this._inputAnalyser2=this._createAnalyser(e,{minDecibels:-127,maxDecibels:0,smoothingTimeConstant:0});var i=(this._outputAnalyser=this._createAnalyser(e)).frequencyBinCount,r=new Uint8Array(i);this._outputAnalyser2=this._createAnalyser(e,{minDecibels:-127,maxDecibels:0,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);var o=this;setTimeout(function e(){if(o._audioContext){if("closed"===o.status)return o._inputAnalyser.disconnect(),o._outputAnalyser.disconnect(),o._inputAnalyser2.disconnect(),void o._outputAnalyser2.disconnect();o._inputAnalyser.getByteFrequencyData(n);var t=o.util.average(n);o._inputAnalyser2.getByteFrequencyData(n);var i=o.util.average(n);o._outputAnalyser.getByteFrequencyData(r);var s=o.util.average(r);o._outputAnalyser2.getByteFrequencyData(r);var a=o.util.average(r);o.onvolume(t/255,s/255,i,a),setTimeout(e,50)}},50)}},f.prototype._stopStream=function(e){this._shouldManageStream&&("function"==typeof MediaStreamTrack.prototype.stop?("function"==typeof e.getAudioTracks?e.getAudioTracks():e.audioTracks).forEach(function(e){e.stop()}):e.stop())},f.prototype._updateInputStreamSource=function(e){this._inputStreamSource&&this._inputStreamSource.disconnect(),this._inputStreamSource=this._audioContext.createMediaStreamSource(e),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)},f.prototype._updateOutputStreamSource=function(e){this._outputStreamSource&&this._outputStreamSource.disconnect(),this._outputStreamSource=this._audioContext.createMediaStreamSource(e),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)},f.prototype._setInputTracksFromStream=function(e,t){return this._isUnifiedPlan?this._setInputTracksForUnifiedPlan(e,t):this._setInputTracksForPlanB(e,t)},f.prototype._setInputTracksForPlanB=function(e,t){var n=this;if(!t)return Promise.reject(new r("Can not set input stream to null while in a call"));if(!t.getAudioTracks().length)return Promise.reject(new r("Supplied input stream has no audio tracks"));var i,o,s=this.stream;return s?(this._stopStream(s),i=this.version.pc,o=s,"function"==typeof i.removeTrack?i.getSenders().forEach(function(e){i.removeTrack(e)}):i.removeStream(o),s.getAudioTracks().forEach(s.removeTrack,s),t.getAudioTracks().forEach(s.addTrack,s),h(this.version.pc,t),this._updateInputStreamSource(this.stream)):this.stream=e?m(t):t,this.mute(this.isMuted),this.version?new Promise(function(e,t){n.version.createOffer(n.options.maxAverageBitrate,n.codecPreferences,{audio:!0},function(){n.version.processAnswer(n.codecPreferences,n._answerSdp,function(){e(n.stream)},t)},t)}):Promise.resolve(this.stream)},f.prototype._setInputTracksForUnifiedPlan=function(e,t){var n=this;if(!t)return Promise.reject(new r("Can not set input stream to null while in a call"));if(!t.getAudioTracks().length)return Promise.reject(new r("Supplied input stream has no audio tracks"));var i=this.stream,o=function(){return n.mute(n.isMuted),Promise.resolve(n.stream)};return i?(this._shouldManageStream&&this._stopStream(i),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(t.getAudioTracks()[0]).then(function(){return n._updateInputStreamSource(t),o()})):(this.stream=e?m(t):t,o())},f.prototype._onInputDevicesChanged=function(){this.stream&&(this.stream.getAudioTracks().every(function(e){return"ended"===e.readyState})&&this._shouldManageStream&&this.openWithConstraints(!0))},f.prototype._onIceGatheringFailure=function(e){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(e)},f.prototype._onMediaConnectionStateChange=function(e){var t=this._iceState;if(t!==e&&("connected"===e||"disconnected"===e||"failed"===e)){this._iceState=e;var n=void 0;switch(e){case"connected":"disconnected"===t||"failed"===t?(n="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(n),this.onreconnected(n)):(n="Media connection established.",this._log.info(n),this.onconnected(n)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":n="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.info(n),this.ondisconnected(n);break;case"failed":n="Connection with Twilio was interrupted.",this._log.info(n),this.onfailed(n)}}},f.prototype._setSinkIds=function(e){return this._isSinkSupported?(this.sinkIds=new Set(e.forEach?e:[e]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new s("Audio output selection is not supported by this browser"))},f.prototype._startIceGatheringTimeout=function(){var e=this;this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(function(){e._onIceGatheringFailure("timeout")},15e3)},f.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)},f.prototype._updateAudioOutputs=function(){var e=Array.from(this.sinkIds).filter(function(e){return!this.outputs.has(e)},this),t=Array.from(this.outputs.keys()).filter(function(e){return!this.sinkIds.has(e)},this),n=this,i=e.map(this._createAudioOutput,this);return Promise.all(i).then(function(){return Promise.all(t.map(n._removeAudioOutput,n))})},f.prototype._createAudio=function(e){return new Audio(e)},f.prototype._createAudioOutput=function(e){var t=this._audioContext.createMediaStreamDestination();this._mediaStreamSource.connect(t);var n=this._createAudio();v(n,t.stream);var i=this;return n.setSinkId(e).then(function(){return n.play()}).then(function(){i.outputs.set(e,{audio:n,dest:t})})},f.prototype._removeAudioOutputs=function(){return this._masterAudio&&void 0!==this._masterAudioDeviceId&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),void 0!==this._masterAudio.srcObject?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)},f.prototype._disableOutput=function(e,t){var n=e.outputs.get(t);n&&(n.audio&&(n.audio.pause(),n.audio.src=""),n.dest&&n.dest.disconnect())},f.prototype._reassignMasterOutput=function(e,t){var n=e.outputs.get(t);e.outputs.delete(t);var i=this,r=Array.from(e.outputs.keys())[0]||"default";return n.audio.setSinkId(r).then(function(){i._disableOutput(e,r),e.outputs.set(r,n),e._masterAudioDeviceId=r}).catch(function(){e.outputs.set(t,n),i._log.info("Could not reassign master output. Attempted to roll back.")})},f.prototype._removeAudioOutput=function(e){return this._masterAudioDeviceId===e?this._reassignMasterOutput(this,e):(this._disableOutput(this,e),this.outputs.delete(e),Promise.resolve())},f.prototype._onAddTrack=function(e,t){var n=e._masterAudio=this._createAudio();v(n,t),n.play();var i=Array.from(e.outputs.keys())[0]||"default";e._masterAudioDeviceId=i,e.outputs.set(i,{audio:n}),e._mediaStreamSource=e._audioContext.createMediaStreamSource(t),e.pcStream=t,e._updateAudioOutputs()},f.prototype._fallbackOnAddTrack=function(e,t){var n=document&&document.createElement("audio");n.autoplay=!0,v(n,t)||e._log.info("Error attaching stream to element."),e.outputs.set("default",{audio:n})},f.prototype._setEncodingParameters=function(e){if(e&&this._sender&&"function"==typeof this._sender.getParameters&&"function"==typeof this._sender.setParameters){var t=this._sender.getParameters();(t.priority||t.encodings&&t.encodings.length)&&(t.priority="high",t.encodings&&t.encodings.length&&t.encodings.forEach(function(e){e.priority="high",e.networkPriority="high"}),this._sender.setParameters(t))}},f.prototype._setupPeerConnection=function(e,t){var n=this,i=this,r=new(this.options.rtcpcFactory||u);r.create(e,t),h(r.pc,this.stream);var o="ontrack"in r.pc?"ontrack":"onaddstream";return r.pc[o]=function(e){var t=i._remoteStream=e.stream||e.streams[0];"function"==typeof r.pc.getSenders&&(n._sender=r.pc.getSenders()[0]),i._isSinkSupported?i._onAddTrack(i,t):i._fallbackOnAddTrack(i,t),i._startPollingVolume()},r},f.prototype._maybeSetIceAggressiveNomination=function(e){return this.options.forceAggressiveIceNomination?d(e):e},f.prototype._setupChannel=function(){var e=this,t=this.version.pc;this.version.pc.onopen=function(){e.status="open",e.onopen()},this.version.pc.onstatechange=function(){e.version.pc&&"stable"===e.version.pc.readyState&&(e.status="open",e.onopen())},this.version.pc.onsignalingstatechange=function(){var n=t.signalingState;e._log.info('signalingState is "'+n+'"'),e.version.pc&&"stable"===e.version.pc.signalingState&&(e.status="open",e.onopen()),e.onsignalingstatechange(t.signalingState)},t.onconnectionstatechange=function(){e._log.info('pc.connectionState is "'+t.connectionState+'"'),e.onpcconnectionstatechange(t.connectionState),e._onMediaConnectionStateChange(t.connectionState)},t.onicecandidate=function(t){var n=t.candidate;n&&(e._hasIceCandidates=!0,e.onicecandidate(n),e._setupRTCIceTransportListener()),e._log.info("ICE Candidate: "+JSON.stringify(n))},t.onicegatheringstatechange=function(){var n=t.iceGatheringState;"gathering"===n?e._startIceGatheringTimeout():"complete"===n&&(e._stopIceGatheringTimeout(),e._hasIceCandidates||e._onIceGatheringFailure("none"),e._hasIceCandidates&&e._hasIceGatheringFailures&&e._startIceGatheringTimeout()),e._log.info('pc.iceGatheringState is "'+t.iceGatheringState+'"'),e.onicegatheringstatechange(n)},t.oniceconnectionstatechange=function(){e._log.info('pc.iceConnectionState is "'+t.iceConnectionState+'"'),e.oniceconnectionstatechange(t.iceConnectionState),e._onMediaConnectionStateChange(t.iceConnectionState)}},f.prototype._initializeMediaStream=function(e,t){return"open"!==this.status&&("disconnected"===this.pstream.status?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new a.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(e,t),this._setupChannel(),!0))},f.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))},f.prototype._setupRTCDtlsTransportListener=function(){var e=this,t=this.getRTCDtlsTransport();if(t&&!t.onstatechange){var n=function(){e._log.info('dtlsTransportState is "'+t.state+'"'),e.ondtlstransportstatechange(t.state)};n(),t.onstatechange=n}},f.prototype._setupRTCIceTransportListener=function(){var e=this,t=this._getRTCIceTransport();t&&!t.onselectedcandidatepairchange&&(t.onselectedcandidatepairchange=function(){return e.onselectedcandidatepairchange(t.getSelectedCandidatePair())})},f.prototype.iceRestart=function(){var e=this;this.options.enableIceRestart&&(this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,this.codecPreferences,{iceRestart:!0}).then(function(){e._removeReconnectionListeners(),e._onAnswerOrRinging=function(t){if(e._removeReconnectionListeners(),t.sdp&&"have-local-offer"===e.version.pc.signalingState){var n=e._maybeSetIceAggressiveNomination(t.sdp);e._answerSdp=n,"closed"!==e.status&&e.version.processAnswer(e.codecPreferences,n,null,function(t){var n=t&&t.message?t.message:t;e._log.info("Failed to process answer during ICE Restart. Error: "+n)})}else{var i="Invalid state or param during ICE Restart:hasSdp:"+!!t.sdp+", signalingState:"+e.version.pc.signalingState;e._log.info(i)}},e._onHangup=function(){e._log.info("Received hangup during ICE Restart"),e._removeReconnectionListeners()},e.pstream.on("answer",e._onAnswerOrRinging),e.pstream.on("hangup",e._onHangup),e.pstream.reinvite(e.version.getSDP(),e.callSid)}).catch(function(t){var n=t&&t.message?t.message:t;e._log.info("Failed to createOffer during ICE Restart. Error: "+n),e.onfailed(n)}))},f.prototype.makeOutgoingCall=function(e,t,n,i,r,s){var a=this;if(this._initializeMediaStream(i,r)){var c=this;this.callSid=n,this._onAnswerOrRinging=function(e){if(e.sdp){var t=a._maybeSetIceAggressiveNomination(e.sdp);c._answerSdp=t,"closed"!==c.status&&c.version.processAnswer(a.codecPreferences,t,l,u),c.pstream.removeListener("answer",c._onAnswerOrRinging),c.pstream.removeListener("ringing",c._onAnswerOrRinging)}},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging),this.version.createOffer(this.options.maxAverageBitrate,this.codecPreferences,{audio:!0},function(){"closed"!==c.status&&(c.pstream.invite(c.version.getSDP(),c.callSid,c.options.preflight,t),c._setupRTCDtlsTransportListener())},function(e){var t=e.message||e;c.onerror({info:{code:31e3,message:"Error creating the offer: "+t,twilioError:new o.ClientLocalDescFailed}})})}function l(){c.options&&c._setEncodingParameters(c.options.dscp),s(c.version.pc)}function u(e){var t=e.message||e;c.onerror({info:{code:31e3,message:"Error processing answer: "+t,twilioError:new o.ClientRemoteDescFailed}})}},f.prototype.answerIncomingCall=function(e,t,n,i,r){if(this._initializeMediaStream(n,i)){t=this._maybeSetIceAggressiveNomination(t),this._answerSdp=t.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=e;var s=this;this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,t,{audio:!0},function(){"closed"!==s.status&&(s.pstream.answer(s.version.getSDP(),e),s.options&&s._setEncodingParameters(s.options.dscp),r(s.version.pc),s._setupRTCDtlsTransportListener())},function(e){var t=e.message||e;s.onerror({info:{code:31e3,message:"Error creating the answer: "+t,twilioError:new o.ClientRemoteDescFailed}})})}},f.prototype.close=function(){this.version&&this.version.pc&&("closed"!==this.version.pc.signalingState&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream(this.stream)),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(function(){}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()},f.prototype.reject=function(e){this.callSid=e},f.prototype.ignore=function(e){this.callSid=e},f.prototype.mute=function(e){(this.isMuted=e,this.stream)&&(this._sender&&this._sender.track?this._sender.track.enabled=!e:("function"==typeof this.stream.getAudioTracks?this.stream.getAudioTracks():this.stream.audioTracks).forEach(function(t){t.enabled=!e}))},f.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;var e=this,t=this.version.pc;if(!t)return this._log.info("No RTCPeerConnection available to call createDTMFSender on"),null;if("function"==typeof t.getSenders&&("function"==typeof RTCDTMFSender||"function"==typeof RTCDtmfSender)){var n=t.getSenders().find(function(e){return e.dtmf});if(n)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=n.dtmf,this._dtmfSender}if("function"==typeof t.createDTMFSender&&"function"==typeof t.getLocalStreams){var i=t.getLocalStreams().map(function(t){var n=e._getAudioTracks(t);return n&&n[0]})[0];return i?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=t.createDTMFSender(i),this._dtmfSender):(this._log.info("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null},f.prototype.getRTCDtlsTransport=function(){var e=this.version&&this.version.pc&&"function"==typeof this.version.pc.getSenders&&this.version.pc.getSenders()[0];return e&&e.transport||null},f.prototype._canStopMediaStreamTrack=function(){return"function"==typeof MediaStreamTrack.prototype.stop},f.prototype._getAudioTracks=function(e){return"function"==typeof e.getAudioTracks?e.getAudioTracks():e.audioTracks},f.prototype._getRTCIceTransport=function(){var e=this.getRTCDtlsTransport();return e&&e.iceTransport||null},f.protocol=u.test()?new u:null,f.enabled=u.test(),e.exports=f},K5Cq:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a=n("vzCy"),c=n("6D9g"),l=n("SBlr"),u=n("3+sl").getRTCStats,d=n("m3hW"),p=5,f={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};var h=function(e){function t(t){var n=e.call(this)||this;n._activeWarnings=new Map,n._currentStreaks=new Map,n._inputVolumes=[],n._outputVolumes=[],n._sampleBuffer=[],n._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},n._warningsEnabled=!0,t=t||{},n._getRTCStats=t.getRTCStats||u,n._mos=t.Mos||d,n._peerConnection=t.peerConnection,n._thresholds=o(o({},f),t.thresholds);var i=Object.values(n._thresholds).map(function(e){return e.sampleCount}).filter(function(e){return!!e});return n._maxSampleCount=Math.max.apply(Math,s([p],i)),n._peerConnection&&n.enable(n._peerConnection),n}return r(t,e),t.prototype.addVolumes=function(e,t){this._inputVolumes.push(e),this._outputVolumes.push(t)},t.prototype.disable=function(){return clearInterval(this._sampleInterval),delete this._sampleInterval,this},t.prototype.disableWarnings=function(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this},t.prototype.enable=function(e){if(e){if(this._peerConnection&&e!==this._peerConnection)throw new c.InvalidArgumentError("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=e}if(!this._peerConnection)throw new c.InvalidArgumentError("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),1e3),this},t.prototype.enableWarnings=function(){return this._warningsEnabled=!0,this},t.prototype.hasActiveWarning=function(e,t){var n=e+":"+t;return!!this._activeWarnings.get(n)},t.prototype._addSample=function(e){var t=this._sampleBuffer;t.push(e),t.length>this._maxSampleCount&&t.splice(0,t.length-this._maxSampleCount)},t.prototype._clearWarning=function(e,t,n){var i=e+":"+t,r=this._activeWarnings.get(i);!r||Date.now()-r.timeRaised<5e3||(this._activeWarnings.delete(i),this.emit("warning-cleared",o(o({},n),{name:e,threshold:{name:t,value:this._thresholds[e][t]}})))},t.prototype._createSample=function(e,t){var n=t&&t.totals.bytesSent||0,i=t&&t.totals.bytesReceived||0,r=t&&t.totals.packetsSent||0,o=t&&t.totals.packetsReceived||0,s=t&&t.totals.packetsLost||0,a=e.bytesSent-n,c=e.bytesReceived-i,u=e.packetsSent-r,d=e.packetsReceived-o,p=e.packetsLost-s,f=d+p,h=f>0?p/f*100:0,m=e.packetsReceived+e.packetsLost,v=m>0?e.packetsLost/m*100:100,g="number"!=typeof e.rtt&&t?t.rtt:e.rtt,_=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(_);var A=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(A),{audioInputLevel:Math.round(l.average(_)),audioOutputLevel:Math.round(l.average(A)),bytesReceived:c,bytesSent:a,codecName:e.codecName,jitter:e.jitter,mos:this._mos.calculate(g,e.jitter,t&&h),packetsLost:p,packetsLostFraction:h,packetsReceived:d,packetsSent:u,rtt:g,timestamp:e.timestamp,totals:{bytesReceived:e.bytesReceived,bytesSent:e.bytesSent,packetsLost:e.packetsLost,packetsLostFraction:v,packetsReceived:e.packetsReceived,packetsSent:e.packetsSent}}},t.prototype._fetchSample=function(){var e=this;this._getSample().then(function(t){e._addSample(t),e._raiseWarnings(),e.emit("sample",t)}).catch(function(t){e.disable(),e.emit("error",t)})},t.prototype._getSample=function(){var e=this;return this._getRTCStats(this._peerConnection).then(function(t){var n=null;return e._sampleBuffer.length&&(n=e._sampleBuffer[e._sampleBuffer.length-1]),e._createSample(t,n)})},t.prototype._raiseWarning=function(e,t,n){var i=e+":"+t;if(!this._activeWarnings.has(i)){this._activeWarnings.set(i,{timeRaised:Date.now()});var r,s=this._thresholds[e];if(Array.isArray(s)){var a=s.find(function(e){return t in e});a&&(r=a[t])}else r=this._thresholds[e][t];this.emit("warning",o(o({},n),{name:e,threshold:{name:t,value:r}}))}},t.prototype._raiseWarnings=function(){var e=this;this._warningsEnabled&&Object.keys(this._thresholds).forEach(function(t){return e._raiseWarningsForStat(t)})},t.prototype._raiseWarningsForStat=function(e){var t=this;(Array.isArray(this._thresholds[e])?this._thresholds[e]:[this._thresholds[e]]).forEach(function(n){var i=t._sampleBuffer,r=n.clearCount||0,o=n.raiseCount||3,a=n.sampleCount||t._maxSampleCount,c=i.slice(-a),u=c.map(function(t){return t[e]});if(!u.some(function(e){return void 0===e||null===e})){var d;if("number"==typeof n.max&&((d=function(e,t){return t.reduce(function(t,n){return t+(n>e?1:0)},0)}(n.max,u))>=o?t._raiseWarning(e,"max",{values:u,samples:c}):d<=r&&t._clearWarning(e,"max",{values:u,samples:c})),"number"==typeof n.min&&((d=function(e,t){return t.reduce(function(t,n){return t+(n<e?1:0)},0)}(n.min,u))>=o?t._raiseWarning(e,"min",{values:u,samples:c}):d<=r&&t._clearWarning(e,"min",{values:u,samples:c})),"number"==typeof n.maxDuration&&i.length>1){var p=(c=i.slice(-2))[0][e],f=c[1][e],h=t._currentStreaks.get(e)||0,m=p===f?h+1:0;t._currentStreaks.set(e,m),m>=n.maxDuration?t._raiseWarning(e,"maxDuration",{value:m}):0===m&&t._clearWarning(e,"maxDuration",{value:h})}if("number"==typeof n.minStandardDeviation){var v=t._supplementalSampleBuffers[e];if(!v||v.length<n.sampleCount)return;v.length>n.sampleCount&&v.splice(0,v.length-n.sampleCount);var g=function(e){if(e.length<=0)return null;var t=e.reduce(function(e,t){return e+t},0)/e.length,n=e.map(function(e){return Math.pow(e-t,2)});return Math.sqrt(n.reduce(function(e,t){return e+t},0)/n.length)}(function(e){return e.reduce(function(e,t){return s(e,t)},[])}(v.slice(-a)));if("number"!=typeof g)return;g<n.minStandardDeviation?t._raiseWarning(e,"minStandardDeviation",{value:g}):t._clearWarning(e,"minStandardDeviation",{value:g})}[["maxAverage",function(e,t){return e>t}],["minAverage",function(e,t){return e<t}]].forEach(function(i){var r=i[0],o=i[1];if("number"==typeof n[r]&&u.length>=a){var s=l.average(u);o(s,n[r])?t._raiseWarning(e,r,{values:u,samples:c}):o(s,n.clearValue||n[r])||t._clearWarning(e,r,{values:u,samples:c})}})}})},t}(a.EventEmitter);t.default=h},KI75:function(e,t,n){"use strict";var i=n("Atx/"),r=n("vzCy").EventEmitter,o=n("o8cY").default,s=n("OMJi"),a=n("8+ir").default,c=n("6D9g"),l=c.GeneralErrors,u=c.SignalingErrors;function d(e,t,n){if(!(this instanceof d))return new d(e,t,n);var i={TransportFactory:a};for(var r in n=n||{},i)r in n||(n[r]=i[r]);this.options=n,this.token=e||"",this.status="disconnected",this.gateway=null,this.region=null,this._messageQueue=[],this._uris=t,this._handleTransportClose=this._handleTransportClose.bind(this),this._handleTransportError=this._handleTransportError.bind(this),this._handleTransportMessage=this._handleTransportMessage.bind(this),this._handleTransportOpen=this._handleTransportOpen.bind(this),this._log=o.getInstance(),this.on("error",function(){});var s=this;return this.addListener("ready",function(){s.status="ready"}),this.addListener("offline",function(){s.status="offline"}),this.addListener("close",function(){s._log.info('Received "close" from server. Destroying PStream...'),s._destroy()}),this.transport=new this.options.TransportFactory(this._uris,{backoffMaxMs:this.options.backoffMaxMs}),Object.defineProperties(this,{uri:{enumerable:!0,get:function(){return this.transport.uri}}}),this.transport.on("close",this._handleTransportClose),this.transport.on("error",this._handleTransportError),this.transport.on("message",this._handleTransportMessage),this.transport.on("open",this._handleTransportOpen),this.transport.open(),this}s.inherits(d,r),d.prototype._handleTransportClose=function(){this.emit("transportClose"),"disconnected"!==this.status&&("offline"!==this.status&&this.emit("offline",this),this.status="disconnected")},d.prototype._handleTransportError=function(e){e?this.emit("error",void 0!==e.code?{error:e}:e):this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new u.ConnectionDisconnected}})},d.prototype._handleTransportMessage=function(e){if(e&&e.data&&"string"==typeof e.data){var t=JSON.parse(e.data),n=t.type,i=t.payload,r=void 0===i?{}:i;this.gateway=r.gateway||this.gateway,this.region=r.region||this.region,"error"===n&&r.error&&(r.error.twilioError=new u.ConnectionError),this.emit(n,r)}},d.prototype._handleTransportOpen=function(){var e=this;this.status="connected",this.setToken(this.token),this._messageQueue.splice(0,this._messageQueue.length).forEach(function(t){return e._publish.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))})},d.toString=function(){return"[Twilio.PStream class]"},d.prototype.toString=function(){return"[Twilio.PStream instance]"},d.prototype.setToken=function(e){this._log.info("Setting token and publishing listen"),this.token=e;var t,n={token:e,browserinfo:(t="undefined"!=typeof navigator?navigator:{},{p:"browser",v:i.RELEASE_VERSION,browser:{userAgent:t.userAgent||"unknown",platform:t.platform||"unknown"},plugin:"rtc"})};this._publish("listen",n)},d.prototype.register=function(e){var t={media:e};this._publish("register",t,!0)},d.prototype.invite=function(e,t,n,i){var r={callsid:t,sdp:e,preflight:!!n,twilio:i?{params:i}:{}};this._publish("invite",r,!0)},d.prototype.answer=function(e,t){this._publish("answer",{sdp:e,callsid:t},!0)},d.prototype.dtmf=function(e,t){this._publish("dtmf",{callsid:e,dtmf:t},!0)},d.prototype.hangup=function(e,t){var n=t?{callsid:e,message:t}:{callsid:e};this._publish("hangup",n,!0)},d.prototype.reject=function(e){this._publish("reject",{callsid:e},!0)},d.prototype.reinvite=function(e,t){this._publish("reinvite",{sdp:e,callsid:t},!1)},d.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)},d.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this},d.prototype.publish=function(e,t){return this._publish(e,t,!0)},d.prototype._publish=function(e,t,n){var i=JSON.stringify({type:e,version:"1.5",payload:t});!!this.transport.send(i)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new l.TransportError}}),n&&this._messageQueue.push([e,t,!0]))},e.exports=d},Kh4W:function(e,t,n){t.f=n("dSzd")},LKZe:function(e,t,n){var i=n("NpIQ"),r=n("X8DO"),o=n("TcQ7"),s=n("MmMw"),a=n("D2L2"),c=n("SfB7"),l=Object.getOwnPropertyDescriptor;t.f=n("+E39")?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(a(e,t))return r(!i.f.call(e,t),e[t])}},LnYC:function(e,t,n){"use strict";var i,r=n("Xxa5"),o=(i=r)&&i.__esModule?i:{default:i},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var c=n("eYrn"),l=n("+8Fp"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._audioNode=null,r._pendingPlayDeferreds=[],r._loop=!1,r._src="",r._sinkId="default","string"!=typeof n&&(i=n),r._audioContext=e,r._audioElement=new(i.AudioFactory||Audio),r._bufferPromise=r._createPlayDeferred().promise,r._destination=r._audioContext.destination,r._gainNode=r._audioContext.createGain(),r._gainNode.connect(r._destination),r._XMLHttpRequest=i.XMLHttpRequestFactory||XMLHttpRequest,r.addEventListener("canplaythrough",function(){r._resolvePlayDeferreds()}),"string"==typeof n&&(r.src=n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),s(t,[{key:"load",value:function(){this._load(this._src)}},{key:"pause",value:function(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))}},{key:"play",value:function(){return a(this,void 0,void 0,o.default.mark(function e(){var t,n=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.paused){e.next=6;break}return e.next=3,this._bufferPromise;case 3:if(this.paused){e.next=5;break}return e.abrupt("return");case 5:throw new Error("The play() request was interrupted by a call to pause().");case 6:return this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",function(){n._audioNode&&n._audioNode.loop||n.dispatchEvent("ended")}),e.next=11,this._bufferPromise;case 11:if(t=e.sent,!this.paused){e.next=14;break}throw new Error("The play() request was interrupted by a call to pause().");case 14:if(this._audioNode.buffer=t,this._audioNode.connect(this._gainNode),this._audioNode.start(),!this._audioElement.srcObject){e.next=19;break}return e.abrupt("return",this._audioElement.play());case 19:case"end":return e.stop()}},e,this)}))}},{key:"setSinkId",value:function(e){return a(this,void 0,void 0,o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("function"==typeof this._audioElement.setSinkId){t.next=2;break}throw new Error("This browser does not support setSinkId.");case 2:if(e!==this.sinkId){t.next=4;break}return t.abrupt("return");case 4:if("default"!==e){t.next=11;break}return this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=e,t.abrupt("return");case 11:return t.next=13,this._audioElement.setSinkId(e);case 13:if(!this._audioElement.srcObject){t.next=15;break}return t.abrupt("return");case 15:this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=e,this._gainNode.connect(this._destination);case 20:case"end":return t.stop()}},t,this)}))}},{key:"_createPlayDeferred",value:function(){var e=new c.default;return this._pendingPlayDeferreds.push(e),e}},{key:"_load",value:function(e){var t=this;this._src&&this._src!==e&&this.pause(),this._src=e,this._bufferPromise=new Promise(function(n,i){return a(t,void 0,void 0,o.default.mark(function t(){var i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",this._createPlayDeferred().promise);case 2:return t.next=4,d(this._audioContext,this._XMLHttpRequest,e);case 4:i=t.sent,this.dispatchEvent("canplaythrough"),n(i);case 7:case"end":return t.stop()}},t,this)}))})}},{key:"_rejectPlayDeferreds",value:function(e){var t=this._pendingPlayDeferreds;t.splice(0,t.length).forEach(function(t){return(0,t.reject)(e)})}},{key:"_resolvePlayDeferreds",value:function(e){var t=this._pendingPlayDeferreds;t.splice(0,t.length).forEach(function(t){return(0,t.resolve)(e)})}},{key:"destination",get:function(){return this._destination}},{key:"loop",get:function(){return this._loop},set:function(e){if(!e&&this.loop&&!this.paused){var t=this;this._audioNode.addEventListener("ended",function e(){t._audioNode.removeEventListener("ended",e),t.pause()})}this._loop=e}},{key:"muted",get:function(){return 0===this._gainNode.gain.value},set:function(e){this._gainNode.gain.value=e?0:1}},{key:"paused",get:function(){return null===this._audioNode}},{key:"src",get:function(){return this._src},set:function(e){this._load(e)}},{key:"srcObject",get:function(){return this._audioElement.srcObject},set:function(e){this._audioElement.srcObject=e}},{key:"sinkId",get:function(){return this._sinkId}}]),t}();function d(e,t,n){return a(this,void 0,void 0,o.default.mark(function i(){var r,s;return o.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(r=new t).open("GET",n,!0),r.responseType="arraybuffer",i.next=5,new Promise(function(e){r.addEventListener("load",e),r.send()});case 5:return s=i.sent,i.prev=6,i.abrupt("return",e.decodeAudioData(s.target.response));case 10:return i.prev=10,i.t0=i.catch(6),i.abrupt("return",new Promise(function(t){e.decodeAudioData(s.target.response,t)}));case 13:case"end":return i.stop()}},i,this,[[6,10]])}))}t.default=u},NpIQ:function(e,t){t.f={}.propertyIsEnumerable},OMJi:function(e,t,n){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},r=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,o=i.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),c=i[n];n<o;c=i[++n])m(c)||!y(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(n,i){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,i).apply(this,arguments)};var r=!1;return function(){if(!r){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),r=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),h(n)?i.showHidden=n:n&&t._extend(i,n),_(i.showHidden)&&(i.showHidden=!1),_(i.depth)&&(i.depth=2),_(i.colors)&&(i.colors=!1),_(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),u(i,e,i.depth)}function c(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function l(e,t){return e}function u(e,n,i){if(e.customInspect&&n&&C(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return g(r)||(r=u(e,r,i)),r}var o=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),w(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(n);if(0===s.length){if(C(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(A(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return d(n)}var l,y="",S=!1,E=["{","}"];(f(n)&&(S=!0,E=["[","]"]),C(n))&&(y=" [Function"+(n.name?": "+n.name:"")+"]");return A(n)&&(y=" "+RegExp.prototype.toString.call(n)),b(n)&&(y=" "+Date.prototype.toUTCString.call(n)),w(n)&&(y=" "+d(n)),0!==s.length||S&&0!=n.length?i<0?A(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=S?function(e,t,n,i,r){for(var o=[],s=0,a=t.length;s<a;++s)x(t,String(s))?o.push(p(e,t,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(e,t,n,i,r,!0))}),o}(e,n,i,a,s):s.map(function(t){return p(e,n,i,a,t,S)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,y,E)):E[0]+y+E[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,i,r,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),x(i,r)||(s="["+r+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(n)?u(e,c.value,null):u(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),_(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return"number"==typeof e}function g(e){return"string"==typeof e}function _(e){return void 0===e}function A(e){return y(e)&&"[object RegExp]"===S(e)}function y(e){return"object"==typeof e&&null!==e}function b(e){return y(e)&&"[object Date]"===S(e)}function w(e){return y(e)&&("[object Error]"===S(e)||e instanceof Error)}function C(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(_(o)&&(o=Object({NODE_ENV:"production"}).NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var i=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,i,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=h,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=_,t.isRegExp=A,t.isObject=y,t.isDate=b,t.isError=w,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("fC4T");var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":"),[e.getDate(),k[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n("ONRY"),t._extend=function(e,t){if(!t||!y(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new Promise(function(e,i){t=e,n=i}),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push(function(e,i){e?n(e):t(i)});try{e.apply(this,r)}catch(e){n(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return r.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(I,t,s)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,i(t)),n}}).call(t,n("W2nU"))},ONRY:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},OYls:function(e,t,n){n("crlp")("asyncIterator")},P2cu:function(e,t,n){const i=n("bKul"),r=n("vveS");e.exports=function(e){const t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},"QWe/":function(e,t,n){n("crlp")("observable")},QqWh:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a=n("vzCy"),c=n("tb8o"),l=n("lOtu"),u=n("EjNl"),d=n("6D9g"),p=n("o8cY"),f=n("gAEt"),h=n("5PS0"),m=n("SBlr"),v=n("Atx/"),g=n("JBKJ"),_=n("KI75"),A=n("/rKa"),y=n("H2mp"),b=n("uXxT"),w=!1,C=!1,S=function(e){function t(n,i){var r,s=e.call(this)||this;if(s.audio=null,s.connections=[],s.isInitialized=!1,s.sounds={},s.token=null,s._activeConnection=null,s._chunderURIs=[],s._connectionInputStream=null,s._connectionSinkIds=["default"],s._edge=null,s._enabledSounds=((r={})[t.SoundName.Disconnect]=!0,r[t.SoundName.Incoming]=!0,r[t.SoundName.Outgoing]=!0,r),s._log=p.default.getInstance(),s._publisher=null,s._region=null,s._status=t.Status.Offline,s.mediaPresence={audio:!0},s.options={allowIncomingWhileBusy:!1,audioConstraints:!0,closeProtection:!1,codecPreferences:[l.default.Codec.PCMU,l.default.Codec.Opus],connectionFactory:l.default,debug:!1,dscp:!0,enableIceRestart:!1,eventgw:"eventgw.twilio.com",forceAggressiveIceNomination:!1,iceServers:[],noRegister:!1,pStreamFactory:_,preflight:!1,rtcConstraints:{},soundFactory:b,sounds:{},warnings:!0},s.regTimer=null,s.soundcache=new Map,s.stream=null,s.destroy=function(){s._disconnectAll(),s._stopRegistrationTimer(),s.audio&&s.audio._unbind(),s.stream&&(s.stream.destroy(),s.stream=null),s._networkInformation&&"function"==typeof s._networkInformation.removeEventListener&&s._networkInformation.removeEventListener("change",s._publishNetworkChange),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("beforeunload",s._confirmClose),window.removeEventListener("unload",s.destroy),window.removeEventListener("pagehide",s.destroy))},s._confirmClose=function(e){if(!s._activeConnection)return"";var t=s.options.closeProtection||!1,n="string"!=typeof t?"A call is currently in-progress. Leaving or reloading this page will end the call.":t;return(e||window.event).returnValue=n,n},s._createDefaultPayload=function(e){var t={aggressive_nomination:s.options.forceAggressiveIceNomination,browser_extension:s._isBrowserExtension,dscp:!!s.options.dscp,ice_restart_enabled:s.options.enableIceRestart,platform:A.getMediaEngine(),sdk_version:v.RELEASE_VERSION};function n(e,n){n&&(t[e]=n)}if(e){var i=e.parameters.CallSid;n("call_sid",/^TJ/.test(i)?void 0:i),n("temp_call_sid",e.outboundConnectionId),n("audio_codec",e.codec),t.direction=e.direction}return n("gateway",s.stream&&s.stream.gateway),n("selected_region",s.options.region),n("region",s.stream&&s.stream.region),t},s._disconnectAll=function(){s.connections.splice(0).forEach(function(e){return e.disconnect()}),s._activeConnection&&s._activeConnection.disconnect()},s._onSignalingClose=function(){s.stream=null},s._onSignalingConnected=function(e){var t=h.getRegionShortcode(e.region);s._edge=h.regionToEdge[t]||e.region,s._region=t||e.region,s._sendPresence()},s._onSignalingError=function(e){if(e.error){var t=o({},e.error),n=e.callsid;n&&(t.connection=s._findConnection(n)),31201===t.code?t.twilioError=new d.AuthorizationErrors.AuthenticationFailed:31204===t.code?t.twilioError=new d.AuthorizationErrors.AccessTokenInvalid:31205===t.code?(s._stopRegistrationTimer(),t.twilioError=new d.AuthorizationErrors.AccessTokenExpired):t.twilioError||(t.twilioError=new d.GeneralErrors.UnknownError),s._log.info("Received error: ",t),s.emit("error",t)}},s._onSignalingInvite=function(e){var n=!!s._activeConnection;if(!n||s.options.allowIncomingWhileBusy)if(e.callsid&&e.sdp){var i=e.parameters||{};i.CallSid=i.CallSid||e.callsid;var r=Object.assign({},m.queryToJson(i.Params)),o=s._makeConnection(r,{callParameters:i,offerSdp:e.sdp});s.connections.push(o),o.once("accept",function(){s.soundcache.get(t.SoundName.Incoming).stop(),s._publishNetworkChange()});var a=s._enabledSounds.incoming&&!n?function(){return s.soundcache.get(t.SoundName.Incoming).play()}:function(){return Promise.resolve()};s._showIncomingConnection(o,a)}else s.emit("error",{message:"Malformed invite from gateway",twilioError:new d.ClientErrors.BadRequest});else s._log.info("Device busy; ignoring incoming invite")},s._onSignalingOffline=function(){s._log.info("Stream is offline"),s._status=t.Status.Offline,s._edge=null,s._region=null,s.emit("offline",s)},s._onSignalingReady=function(){s._log.info("Stream is ready"),s._status=t.Status.Ready,s.emit("ready",s)},s._publishNetworkChange=function(){s._activeConnection&&s._networkInformation&&s._publisher.info("network-information","network-change",{connection_type:s._networkInformation.type,downlink:s._networkInformation.downlink,downlinkMax:s._networkInformation.downlinkMax,effective_type:s._networkInformation.effectiveType,rtt:s._networkInformation.rtt},s._activeConnection)},s._updateInputStream=function(e){var t=s._activeConnection;return t&&!e?Promise.reject(new d.InvalidStateError("Cannot unset input device while a call is in progress.")):(s._connectionInputStream=e,t?t._setInputTracksFromStream(e):Promise.resolve())},s._updateSinkIds=function(e,t){return("ringtone"===e?s._updateRingtoneSinkIds(t):s._updateSpeakerSinkIds(t)).then(function(){s._publisher.info("audio",e+"-devices-set",{audio_device_ids:t},s._activeConnection)},function(n){throw s._publisher.error("audio",e+"-devices-set-failed",{audio_device_ids:t,message:n.message},s._activeConnection),n})},window){var a=window,c=a.msBrowser||a.browser||a.chrome;s._isBrowserExtension=!!c&&!!c.runtime&&!!c.runtime.id||!!a.safari&&!!a.safari.extension}if(s._isBrowserExtension&&s._log.info("Running as browser extension."),navigator){var u=navigator;s._networkInformation=u.connection||u.mozConnection||u.webkitConnection}if(n)s.setup(n,i);else if(i)throw new d.InvalidArgumentError("Cannot construct a Device with options but without a token");return s}return r(t,e),Object.defineProperty(t,"audioContext",{get:function(){return t._audioContext},enumerable:!0,configurable:!0}),Object.defineProperty(t,"extension",{get:function(){var e,t,n="undefined"!=typeof document?document.createElement("audio"):{canPlayType:!1};try{e=n.canPlayType&&!!n.canPlayType("audio/mpeg").replace(/no/,"")}catch(t){e=!1}try{t=n.canPlayType&&!!n.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch(e){t=!1}return t&&!e?"ogg":"mp3"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isSupported",{get:function(){return A.enabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"packageName",{get:function(){return v.PACKAGE_NAME},enumerable:!0,configurable:!0}),t.runPreflight=function(e,n){return new f.PreflightTest(e,o({audioContext:t._getOrCreateAudioContext()},n))},t.toString=function(){return"[Twilio.Device class]"},Object.defineProperty(t,"version",{get:function(){return v.RELEASE_VERSION},enumerable:!0,configurable:!0}),t._getOrCreateAudioContext=function(){return t._audioContext||("undefined"!=typeof AudioContext?t._audioContext=new AudioContext:"undefined"!=typeof webkitAudioContext&&(t._audioContext=new webkitAudioContext)),t._audioContext},t.prototype.activeConnection=function(){return this.isInitialized?this._activeConnection||this.connections[0]:null},t.prototype.cancel=function(e){return this._addHandler(t.EventName.Cancel,e)},t.prototype.connect=function(e,n,i){if("function"==typeof e)return this._addHandler(t.EventName.Connect,e),null;if(this._throwUnlessSetup("connect"),this._activeConnection)throw new d.InvalidStateError("A Connection is already active");var r=e||{};n=n||this.options&&this.options.audioConstraints||{},i=i||this.options.rtcConfiguration;var o=this._activeConnection=this._makeConnection(r,{rtcConfiguration:i});return this.connections.splice(0).forEach(function(e){return e.ignore()}),this.soundcache.get(t.SoundName.Incoming).stop(),o.accept(n),this._publishNetworkChange(),o},t.prototype.disconnect=function(e){return this._addHandler(t.EventName.Disconnect,e)},t.prototype.disconnectAll=function(){this._throwUnlessSetup("disconnectAll"),this._disconnectAll()},Object.defineProperty(t.prototype,"edge",{get:function(){return this._edge},enumerable:!0,configurable:!0}),t.prototype.error=function(e){return this._addHandler(t.EventName.Error,e)},t.prototype.incoming=function(e){return this._addHandler(t.EventName.Incoming,e)},t.prototype.offline=function(e){return this._addHandler(t.EventName.Offline,e)},t.prototype.ready=function(e){return this._addHandler(t.EventName.Ready,e)},t.prototype.region=function(){return this._log.warn("`Device.region` is deprecated and will be removed in the next major release. Please use `Device.edge` instead."),this._throwUnlessSetup("region"),"string"==typeof this._region?this._region:"offline"},t.prototype.registerPresence=function(){return this._throwUnlessSetup("registerPresence"),this.mediaPresence.audio=!0,this._sendPresence(),this},t.prototype.removeListener=function(e,t){return a.EventEmitter.prototype.removeListener.call(this,e,t),this},t.prototype.setup=function(e,n){var i=this;if(void 0===n&&(n={}),m.isLegacyEdge())throw new d.NotSupportedError("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!t.isSupported&&!n.ignoreBrowserSupport){if(window&&window.location&&"http:"===window.location.protocol)throw new d.NotSupportedError("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again.");throw new d.NotSupportedError("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.")}if(!e)throw new d.InvalidArgumentError("Token is required for Device.setup()");if(Object.assign(this.options,n),this._log.setDefaultLevel(this.options.debug?p.default.levels.DEBUG:this.options.warnings?p.default.levels.WARN:p.default.levels.SILENT),this._chunderURIs=this.options.chunderw?["wss://"+this.options.chunderw+"/signal"]:h.getChunderURIs(this.options.edge,this.options.region,this._log.warn.bind(this._log)).map(function(e){return"wss://"+e+"/signal"}),void 0===t._isUnifiedPlanDefault&&(t._isUnifiedPlanDefault="undefined"!=typeof window&&"undefined"!=typeof RTCPeerConnection&&"undefined"!=typeof RTCRtpTransceiver&&m.isUnifiedPlanDefault(window,window.navigator,RTCPeerConnection,RTCRtpTransceiver)),t._getOrCreateAudioContext(),t._audioContext&&n.fakeLocalDTMF?t._dialtonePlayer||(t._dialtonePlayer=new u.default(t._audioContext)):t._dialtonePlayer&&(t._dialtonePlayer.cleanup(),delete t._dialtonePlayer),this.isInitialized)return this._log.info("Found existing Device; using new token but ignoring options"),this.updateToken(e),this;this.isInitialized=!0,this.options.dscp&&(this.options.rtcConstraints.optional=[{googDscp:!0}]);[t.SoundName.Disconnect,t.SoundName.Incoming,t.SoundName.Outgoing].forEach(function(e){i.sounds[e]=function(e,t){return C||(i._log.warn("Device.sounds is deprecated and will be removed in the next breaking release. Please use the new functionality available on Device.audio."),C=!0),void 0!==t&&(i._enabledSounds[e]=t),i._enabledSounds[e]}.bind(null,e)});for(var r={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}},o=0,s=Object.keys(r);o<s.length;o++){var a=s[o],l=r[a],f=v.SOUNDS_BASE_URL+"/"+l.filename+"."+t.extension+"?cache="+v.RELEASE_VERSION,_=this.options.sounds&&this.options.sounds[a]||f,A=new this.options.soundFactory(a,_,{audioContext:this.options.disableAudioContextSounds?null:t.audioContext,maxDuration:l.maxDuration,shouldLoop:l.shouldLoop});this.soundcache.set(a,A)}return this._publisher=(this.options.Publisher||g)("twilio-js-sdk",e,{defaultPayload:this._createDefaultPayload,host:this.options.eventgw,metadata:{app_name:this.options.appName,app_version:this.options.appVersion}}),!1===this.options.publishEvents?this._publisher.disable():this._publisher.on("error",function(e){i._log.warn("Cannot connect to insights.",e)}),this._networkInformation&&"function"==typeof this._networkInformation.addEventListener&&this._networkInformation.addEventListener("change",this._publishNetworkChange),this.audio=new(this.options.AudioHelper||c.default)(this._updateSinkIds,this._updateInputStream,y,{audioContext:t.audioContext,enabledSounds:this._enabledSounds}),this.audio.on("deviceChange",function(e){var t=i._activeConnection,n=e.map(function(e){return e.deviceId});i._publisher.info("audio","device-change",{lost_active_device_ids:n},t),t&&t.mediaStream._onInputDevicesChanged()}),this.mediaPresence.audio=!this.options.noRegister,this.updateToken(e),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("unload",this.destroy),window.addEventListener("pagehide",this.destroy),this.options.closeProtection&&window.addEventListener("beforeunload",this._confirmClose)),this.on(t.EventName.Error,function(){i.listenerCount("error")>1||i._log.info("Uncaught error event suppressed.")}),this},t.prototype.status=function(){return this._throwUnlessSetup("status"),this._activeConnection?t.Status.Busy:this._status},t.prototype.toString=function(){return"[Twilio.Device instance]"},t.prototype.unregisterPresence=function(){return this._throwUnlessSetup("unregisterPresence"),this.mediaPresence.audio=!1,this._sendPresence(),this},t.prototype.updateToken=function(e){this._throwUnlessSetup("updateToken"),this.token=e,this.register(e)},t.prototype._addHandler=function(e,t){return w||(this._log.warn("Device callback handlers (connect, error, offline, incoming, cancel, ready, disconnect)         have been deprecated and will be removed in the next breaking release. Instead, the EventEmitter         interface can be used to set event listeners. Example: device.on('"+e+"', handler)"),w=!0),this.addListener(e,t),this},t.prototype._asyncEmit=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];setTimeout(function(){return t.emit.apply(t,s([e],n))})},t.prototype._findConnection=function(e){return this.connections.find(function(t){return t.parameters.CallSid===e||t.outboundConnectionId===e})||null},t.prototype._makeConnection=function(e,n){var i=this;if(void 0===t._isUnifiedPlanDefault)throw new d.InvalidStateError("Device has not been initialized.");var r={audioHelper:this.audio,getUserMedia:y,isUnifiedPlanDefault:t._isUnifiedPlanDefault,pstream:this.stream,publisher:this._publisher,soundcache:this.soundcache};n=Object.assign({MediaStream:this.options.MediaStream||this.options.mediaStreamFactory||A.PeerConnection,audioConstraints:this.options.audioConstraints,beforeAccept:function(e){i._activeConnection&&i._activeConnection!==e&&(i._activeConnection.disconnect(),i._removeConnection(i._activeConnection))},codecPreferences:this.options.codecPreferences,dialtonePlayer:t._dialtonePlayer,dscp:this.options.dscp,enableIceRestart:this.options.enableIceRestart,enableRingingState:this.options.enableRingingState,forceAggressiveIceNomination:this.options.forceAggressiveIceNomination,getInputStream:function(){return i.options.fileInputStream||i._connectionInputStream},getSinkIds:function(){return i._connectionSinkIds},maxAverageBitrate:this.options.maxAverageBitrate,preflight:this.options.preflight,rtcConfiguration:this.options.rtcConfiguration||{iceServers:this.options.iceServers},rtcConstraints:this.options.rtcConstraints,shouldPlayDisconnect:function(){return i._enabledSounds.disconnect},twimlParams:e},n);var o=new this.options.connectionFactory(r,n);return o.once("accept",function(){i._removeConnection(o),i._activeConnection=o,i.audio&&i.audio._maybeStartPollingVolume(),o.direction===l.default.CallDirection.Outgoing&&i._enabledSounds.outgoing&&i.soundcache.get(t.SoundName.Outgoing).play();var e={edge:i._edge||i._region},n=i.options.edge;n&&(e.selected_edge=Array.isArray(n)?n:[n]),i._publisher.info("settings","edge",e,o),i._asyncEmit("connect",o)}),o.addListener("error",function(e){"closed"===o.status()&&i._removeConnection(o),i.audio&&i.audio._maybeStopPollingVolume(),i._maybeStopIncomingSound(),i._asyncEmit("error",e)}),o.once("cancel",function(){i._log.info("Canceled: "+o.parameters.CallSid),i._removeConnection(o),i.audio&&i.audio._maybeStopPollingVolume(),i._maybeStopIncomingSound(),i._asyncEmit("cancel",o)}),o.once("disconnect",function(){i.audio&&i.audio._maybeStopPollingVolume(),i._removeConnection(o),i._asyncEmit("disconnect",o)}),o.once("reject",function(){i._log.info("Rejected: "+o.parameters.CallSid),i.audio&&i.audio._maybeStopPollingVolume(),i._removeConnection(o),i._maybeStopIncomingSound()}),o.once("transportClose",function(){o.status()===l.default.State.Pending&&(i.audio&&i.audio._maybeStopPollingVolume(),i._removeConnection(o),i._maybeStopIncomingSound())}),o},t.prototype._maybeStopIncomingSound=function(){this.connections.length||this.soundcache.get(t.SoundName.Incoming).stop()},t.prototype._removeConnection=function(e){this._activeConnection===e&&(this._activeConnection=null);for(var t=this.connections.length-1;t>=0;t--)e===this.connections[t]&&this.connections.splice(t,1)},t.prototype._sendPresence=function(){this.stream&&(this.stream.register({audio:this.mediaPresence.audio}),this.mediaPresence.audio?this._startRegistrationTimer():this._stopRegistrationTimer())},t.prototype._setupStream=function(e){this._log.info("Setting up VSP"),this.stream=this.options.pStreamFactory(e,this._chunderURIs,{backoffMaxMs:this.options.backoffMaxMs}),this.stream.addListener("close",this._onSignalingClose),this.stream.addListener("connected",this._onSignalingConnected),this.stream.addListener("error",this._onSignalingError),this.stream.addListener("invite",this._onSignalingInvite),this.stream.addListener("offline",this._onSignalingOffline),this.stream.addListener("ready",this._onSignalingReady)},t.prototype._showIncomingConnection=function(e,t){var n,i=this;return Promise.race([t(),new Promise(function(e,t){n=setTimeout(function(){t(new Error("Playing incoming ringtone took too long; it might not play. Continuing execution..."))},2e3)})]).catch(function(e){i._log.info(e.message)}).then(function(){clearTimeout(n),i.emit("incoming",e)})},t.prototype._startRegistrationTimer=function(){var e=this;this._stopRegistrationTimer(),this.regTimer=setTimeout(function(){e._sendPresence()},3e4)},t.prototype._stopRegistrationTimer=function(){this.regTimer&&clearTimeout(this.regTimer)},t.prototype._throwUnlessSetup=function(e){if(!this.isInitialized)throw new d.InvalidStateError("Call Device.setup() before "+e)},t.prototype._updateRingtoneSinkIds=function(e){return Promise.resolve(this.soundcache.get(t.SoundName.Incoming).setSinkIds(e))},t.prototype._updateSpeakerSinkIds=function(e){Array.from(this.soundcache.entries()).filter(function(e){return e[0]!==t.SoundName.Incoming}).forEach(function(t){return t[1].setSinkIds(e)}),this._connectionSinkIds=e;var n=this._activeConnection;return n?n._setSinkIds(e):Promise.resolve()},t.prototype.register=function(e){this.stream?(this.stream.setToken(e),this._publisher.setToken(e)):this._setupStream(e)},t}(a.EventEmitter);!function(e){!function(e){e.Cancel="cancel",e.Connect="connect",e.Disconnect="disconnect",e.Error="error",e.Incoming="incoming",e.Offline="offline",e.Ready="ready"}(e.EventName||(e.EventName={})),function(e){e.Busy="busy",e.Offline="offline",e.Ready="ready"}(e.Status||(e.Status={})),function(e){e.Incoming="incoming",e.Outgoing="outgoing",e.Disconnect="disconnect",e.Dtmf0="dtmf0",e.Dtmf1="dtmf1",e.Dtmf2="dtmf2",e.Dtmf3="dtmf3",e.Dtmf4="dtmf4",e.Dtmf5="dtmf5",e.Dtmf6="dtmf6",e.Dtmf7="dtmf7",e.Dtmf8="dtmf8",e.Dtmf9="dtmf9",e.DtmfS="dtmfs",e.DtmfH="dtmfh"}(e.SoundName||(e.SoundName={}))}(S||(S={})),t.default=S},R870:function(e,t){},Rrel:function(e,t,n){var i=n("TcQ7"),r=n("n0T6").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return s.slice()}}(e):r(i(e))}},SBlr:function(e,t,n){(function(e){function n(e){if(!(this instanceof n))return new n(e);this.message=e}function i(e){return!!e.userAgent.match("Electron")}function r(e,t){var n=!!t.userAgent.match("CriOS"),r=!!t.userAgent.match("HeadlessChrome"),o=void 0!==e.chrome&&"Google Inc."===t.vendor&&-1===t.userAgent.indexOf("OPR")&&-1===t.userAgent.indexOf("Edge");return n||i(t)||o||r}function o(t){return!!(t=t||("undefined"==typeof window?e.navigator:window.navigator))&&"string"==typeof t.userAgent&&/firefox|fxios/i.test(t.userAgent)}function s(e){return!!e.vendor&&-1!==e.vendor.indexOf("Apple")&&e.userAgent&&-1===e.userAgent.indexOf("CriOS")&&-1===e.userAgent.indexOf("FxiOS")}n.prototype.toString=function(){return"Twilio.Exception: "+this.message},t.Exception=n,t.average=function(e){return e&&e.length?e.reduce(function(e,t){return e+t})/e.length:0},t.difference=function(e,t,n){n=n||function(e){return e};var i=new Set(t.map(n));return e.filter(function(e){return!i.has(n(e))})},t.isElectron=i,t.isChrome=r,t.isFirefox=o,t.isLegacyEdge=function(t){return!!(t=t||("undefined"==typeof window?e.navigator:window.navigator))&&"string"==typeof t.userAgent&&/edge\/\d+/i.test(t.userAgent)},t.isSafari=s,t.isUnifiedPlanDefault=function(e,t,n,i){if(void 0===e||void 0===t||void 0===n||void 0===i||void 0===n.prototype||void 0===i.prototype)return!1;if(r(e,t)&&n.prototype.addTransceiver){var a=new n,c=!0;try{a.addTransceiver("audio")}catch(e){c=!1}return a.close(),c}return!!o(t)||!!s(t)&&"currentDirection"in i.prototype},t.queryToJson=function(e){return e?e.split("&").reduce(function(e,t){var n=t.split("="),i=n[0],r=decodeURIComponent((n[1]||"").replace(/\+/g,"%20"));return i&&(e[i]=r),e},{}):""},t.flatMap=function(e,t){var n=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||function(e){return e},n.reduce(function(e,n){var i=t(n);return e.concat(i)},[])}}).call(t,n("DuR2"))},SfpO:function(e,t){},TGvd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Gu7T"),r=n.n(i),o=n("+cKO"),s=n("mvHQ"),a=n.n(s),c=n("Okpk"),l=n("Tk3H"),u=new(n("7+uW").default),d={data:function(){return{access_token:null,headers:null,baseurl:"",profiles:[],activeProfile:null,submitted3:!1,isLoading:!1,form:{profile:""}}},validations:{form:{profile:{required:o.required}}},mounted:function(){this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.headers={headers:{token:this.access_token}},"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.getallProfile()},methods:{onClickButton:function(e){this.$emit("clicked",e)},changeProfile:function(e){this.activeProfile=e,localStorage.setItem("activeProfile",a()(e)),this.$emit("clicked",e),u.$emit("clicked",!0),u.$emit("changeProfile",!0),u.$emit("getOneProfile",!0)},activeFirstProfile:function(){this.profiles.length>0?this.changeProfile(this.profiles[0]):(this.activeProfile=null,this.$emit("clicked",null))},getallProfile:function(){var e=this;this.$store.dispatch(l.c,{data:{},url:"profile/getdata"}).then(function(t){if(t&&(e.profiles=t.data,!e.activeProfile)){var n=localStorage.getItem("activeProfile");if(n){var i=JSON.parse(n);if(i)for(var r=0;r<e.profiles.length;r++)e.profiles[r]._id===i._id&&(e.activeProfile=e.profiles[r],u.$emit("changeProfile2",!0));else localStorage.setItem("activeProfile",a()(e.profiles[0])),e.activeProfile=e.profiles[0],u.$emit("changeProfile2",!0)}else localStorage.setItem("activeProfile",a()(e.profiles[0])),e.activeProfile=e.profiles[0],u.$emit("changeProfile2",!0);e.$emit("clicked",e.activeProfile)}}).catch(function(e){console.log(e)})},handleSubmit:function(e){var t=this;if(this.submitted3=!0,u.$emit("toggleLoader",!0),this.$v.$touch(),!this.$v.$invalid){var n={data:this.form,url:"profile/create"};this.$store.dispatch(l.c,n).then(function(e){e&&(t.$swal({icon:"success",title:"Success",text:"Profile added successfully!"}),t.changeProfile(e.data),t.$refs["add-profile"].hide(),t.getallProfile(),t.isLoading=!1,u.$emit("toggleLoader",!0))}).catch(function(e){console.log(e),t.isLoading=!1,u.$emit("toggleLoader",!0)})}}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLoading?n("div",{attrs:{id:"loader1"}},[e._m(0)]):e._e(),e._v(" "),e._l(e.profiles,function(t){return n("div",{key:t._id},[n("b-dropdown-item-button",{on:{click:function(n){return e.changeProfile(t)}}},[n("div",{staticClass:"d-flex flex-row"},[n("div",[n("div",{staticClass:"d-flex flex-column"},[n("div",[e._v("\n              "+e._s(t.profile)+"\n            ")]),e._v(" "),n("div",[t.number&&""!==t.number?n("span",{staticClass:"profileNum"},[e._v("("+e._s(t.number)+")")]):e._e()])])]),e._v(" "),n("div",[t.messageCount>0?n("span",{staticClass:"start-100 translate-middle badge border border-light rounded-circle bg-danger p-2"},[n("span",{staticClass:"visually-hidden"},[e._v("unread messages")])]):e._e()])])]),e._v(" "),n("b-dropdown-divider")],1)}),e._v(" "),n("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-profile",modifiers:{"add-profile":!0}}]},[n("b-icon",{attrs:{icon:"person-plus-fill","aria-hidden":"true"}}),e._v("\n      Add New Profile\n  ")],1),e._v(" "),n("b-dropdown-divider"),e._v(" "),n("b-modal",{ref:"add-profile",attrs:{id:"add-profile",size:"lg",title:"Add Profile","hide-footer":""}},[n("span",{staticClass:"small text-secondary"},[e._v("Profile")]),e._v(" "),n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.profile,expression:"form.profile"}],staticClass:"form-control chat-input",class:{"is-invalid":e.submitted3&&e.$v.form.profile.$error},attrs:{name:"profile",placeholder:"Enter Profile"},domProps:{value:e.form.profile},on:{input:function(t){t.target.composing||e.$set(e.form,"profile",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.profile.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.profile.required?e._e():n("span",[e._v("Profile are required")])]):e._e()]),e._v(" "),n("div",{staticClass:"d-grid d-md-flex mt-3"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Save")])])])])],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex loader justify-content-center align-items-center"},[t("div",{staticClass:"sp sp-circle"})])}]};var f=n("VU/8")(d,p,!1,function(e){n("DxTx")},"data-v-07f1af5a",null).exports,h=n("pFYg"),m=n.n(h),v=n("//Fk"),g=n.n(v),_=n("Xxa5"),A=n.n(_),y=n("exGp"),b=n.n(y),w=n("afOB"),C=n.n(w),S=o.helpers.regex("phonenumber",/^\+?[0-9\(\-\)\ ]{5,17}$/),E={props:["contacts"],data:function(){return{access_token:null,headers:null,baseurl:"",modelFileValu:"",submitted:!1,userdata:null,editId:!1,csvFile:null,submitted2:!1,search_contacts:[],form:{first_name:"",last_name:"",number:"",note:""},query:"",jsonData:[{first_name:"John",last_name:"Doe",number:"12300XXXXX",note:"notes go here"}],csvUploadArray2:[]}},validations:{form:{first_name:{required:o.required},last_name:{},number:{required:o.required,phonenumber:S},note:{}}},mounted:function(){var e=this;u.$on("addContact",function(t){e.editId=!1,e.emptyContact(),e.$refs["modal-contact"].show(),e.form.number=t})},methods:{exportContact:function(){this.downloadFile(this.contacts,"contacts")},emptyContact:function(){this.form.first_name="",this.form.last_name="",this.form.number="",this.form.note=""},onSelect:function(e){var t=this;return b()(A.a.mark(function n(){var i,r;return A.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.csvFile=!0,console.log(e),t.modelFileValu=e.target.files[0].name,i=e.target.files[0],n.next=6,t.readFile(i);case 6:r=n.sent,t.csvUploadArray2=r,console.log(t.csvUploadArray2);case 9:case"end":return n.stop()}},n,t)}))()},readFile:function(e){var t=this;return new g.a(function(n,i){var r=new FileReader;r.readAsText(e,"UTF-8"),r.onload=function(e){var i=e.target.result,r={complete:function(e,n){t.csvUploadArray=e.data}};C.a.parse(i,r);for(var o=[],s=t.csvUploadArray,a=0;a<s.length;++a)if(0!==a&&""!==s[a][0]&&void 0!==s[a][0]&&isNaN(s[a][0])){var c={first_name:s[a][0],last_name:s[a][1],number:s[a][2],note:s[a][3]};o.push(c)}n(o)}})},choseFile2:function(){document.getElementById("model_file_input2").click()},downloadFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data",n=this.ConvertToCSV(e,["first_name","last_name","number","note"]);console.log(n);var i=new Blob(["\ufeff"+n],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),o=URL.createObjectURL(i);-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&r.setAttribute("target","_blank"),r.setAttribute("href",o),r.setAttribute("download",t+".csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},download:function(){this.downloadFile(this.jsonData,"sample_file")},ConvertToCSV:function(e,t){var n="object"!==(void 0===e?"undefined":m()(e))?JSON.parse(e):e,i="",r="";for(var o in t)console.log(o),console.log(t[o]),r+=t[o]+",";i+=(r=r.slice(0,-1))+"\r\n";for(var s=0;s<n.length;s++){var a="";for(var c in t){var l=t[c];a+=n[s][l]+","}i+=a+"\r\n"}return i},openContactModel:function(){this.editId=!1,this.emptyContact(),this.$refs["modal-contact"].show()},handleSubmit:function(e){var t=this;if(this.submitted=!0,this.$v.$touch(),!this.$v.$invalid){if(this.editId){var n=this.form;n.contact_id=this.editId;var i={data:n,url:"contact/update"}}else i={data:this.form,url:"contact/create"};this.$store.dispatch(l.c,i).then(function(e){e&&(t.$refs["modal-contact"].hide(),t.$emit("onaddContact",!0),u.$emit("contactAdded",t.form.number),t.emptyContact(),t.submitted=!1)}).catch(function(e){console.log(e)})}},handleSubmit2:function(){var e=this;if(this.csvUploadArray2.length>0){var t={data:{contacts:this.csvUploadArray2},url:"contact/multiple-add"};this.$store.dispatch(l.c,t).then(function(t){e.$refs["modal-contact"].hide(),e.$emit("onaddContact",!0),e.modelFileValu=""}).catch(function(e){console.log(e)})}else this.$swal({icon:"error",title:"Error",text:"Please upload valid file!"})},deletechat:function(e){var t=this;this.$swal.fire({icon:"info",title:"Do you want to delete this contact?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(n){if(n.isConfirmed){var i={data:{contact_id:e},url:"contact/delete"};t.$store.dispatch(l.c,i).then(function(e){t.$swal({icon:"success",title:"Success",text:"Contact Deleted successfully!"}),t.$emit("onaddContact",!0),u.$emit("contactAdded","delete")}).catch(function(e){console.log(e)})}else n.isDenied&&t.$swal.fire("contact not deleted","","info")})},updateContact:function(e){this.editId=e._id,this.form={first_name:e.first_name,last_name:e.last_name,number:e.number,note:e.note},this.$refs["modal-contact"].show()},deleteAll:function(){var e=this;this.$swal.fire({icon:"info",title:"Are you sure you want to delete ALL contacts?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete all",denyButtonText:"No"}).then(function(t){if(t.isConfirmed){e.$store.dispatch(l.c,{data:{},url:"contact/deleteall"}).then(function(t){e.$swal({icon:"success",title:"Success",text:"All contacts deleted successfully"}),e.$emit("onaddContact",!0)}).catch(function(e){console.log(e)})}else t.isDenied&&e.$swal.fire("contacts not deleted","","info")})},searchContact:function(){var e=new RegExp(this.query,"i");this.search_contacts=this.contacts.filter(function(t){return e.test(t.first_name)?e.test(t.first_name):e.test(t.last_name)?e.test(t.last_name):e.test(t.number)?e.test(t.number):void 0})}},watch:{contacts:function(e,t){this.searchContact()}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-icon",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-right",modifiers:{"sidebar-right":!0}}],staticClass:"pointer-icon m-2",attrs:{"font-scale":"1",icon:"person-lines-fill","aria-hidden":"true",title:"Contacts"}}),e._v(" "),n("b-sidebar",{attrs:{id:"sidebar-right",right:"",shadow:"","no-header":"",backdrop:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hide;return[n("div",{staticClass:"d-flex flex-row mt-2 justify-content-between bd-highlight"},[n("div",{staticClass:"bd-highlight dropDown"},[n("b-button",{staticClass:"float-left d-flex m-1",attrs:{size:"sm",variant:"primary"}},[n("b-icon",{attrs:{icon:"x",scale:"1"},on:{click:i}})],1)],1),e._v(" "),n("div",[n("div",{staticClass:"d-flex justify-content-start"},[n("div",{staticClass:"ml-1"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-left d-flex m-1",attrs:{title:"Add Contact",size:"sm",variant:"primary"},on:{click:function(t){return e.openContactModel()}}},[n("b-icon",{attrs:{icon:"plus-circle",scale:"1"}})],1)],1),e._v(" "),n("div",{staticClass:"ml-2"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-left d-flex m-1",attrs:{title:"Export Contact",size:"sm",variant:"primary"},on:{click:function(t){return e.exportContact()}}},[n("b-icon",{attrs:{icon:"cloud-download",scale:"1"}})],1)],1),e._v(" "),n("div",{staticClass:"ml-2"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-left d-flex m-1",attrs:{title:"Delete All Contact",size:"sm",variant:"danger"},on:{click:function(t){return e.deleteAll()}}},[n("b-icon",{attrs:{icon:"trash-fill",scale:"1"}})],1)],1),e._v(" "),n("div",[n("h4",{staticClass:"pr-3 m-1"},[e._v("\n                                Contacts\n                            ")])])])])]),e._v(" "),n("div",[n("div",{staticClass:"wrap-search"},[n("div",{staticClass:"search"},[n("div",{staticClass:"d-flex flex-row bd-highlight"},[n("div",{staticClass:"bd-highlight"},[e._v("\n                        "),n("b-icon",{attrs:{icon:"search"}}),e._v("  \n                    ")],1),e._v(" "),n("div",{staticClass:"bd-highlight"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"input-search",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.query},on:{keyup:function(t){return e.searchContact()},input:function(t){t.target.composing||(e.query=t.target.value)}}})])])])]),e._v(" "),n("ul",{staticClass:"list-group"},e._l(e.search_contacts,function(t){return n("li",{key:t._id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[n("div",{staticClass:"d-flex flex-column bd-highlight"},[n("div",{staticClass:"bd-highlight"},[e._v("\n                      "+e._s(t.first_name)+" "+e._s(t.last_name)+"\n                    ")]),e._v(" "),n("div",{staticClass:"bd-highlight"},[e._v(e._s(t.number))])]),e._v(" "),n("div",[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"pencil-square",title:"Update"},on:{click:function(n){return e.updateContact(t)}}}),e._v(" "),n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"trash-fill",title:"Delete"},on:{click:function(n){return e.deletechat(t._id)}}})],1)])}),0)])]}}])}),e._v(" "),n("b-modal",{ref:"modal-contact",attrs:{id:"modal-contact",title:"Contact","hide-footer":""}},[n("div",{staticClass:"card mt-4"},[n("div",{staticClass:"card-body"},[n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"Add Contact",active:""}},[n("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:" form-group m-auto mb-2"},[n("label",[e._v("First Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.first_name,expression:"form.first_name"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.form.first_name.$error},attrs:{type:"text",placeholder:"First Name",id:"first_name",name:"first_name"},domProps:{value:e.form.first_name},on:{input:function(t){t.target.composing||e.$set(e.form,"first_name",t.target.value)}}}),e._v(" "),e.submitted&&!e.$v.form.first_name.required?n("div",{staticClass:"invalid-feedback"},[e._v("First Name is required")]):e._e()]),e._v(" "),n("div",{staticClass:"form-group m-auto mb-2"},[n("label",[e._v("Last Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.last_name,expression:"form.last_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Last Name",id:"last_name",name:"last_name"},domProps:{value:e.form.last_name},on:{input:function(t){t.target.composing||e.$set(e.form,"last_name",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group m-auto mb-2"},[n("label",[e._v("Number")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.number,expression:"form.number"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.form.number.$error},attrs:{type:"text",placeholder:"Number",id:"number",name:"number"},domProps:{value:e.form.number},on:{input:function(t){t.target.composing||e.$set(e.form,"number",t.target.value)}}}),e._v(" "),e.submitted&&!e.$v.form.number.required?n("div",{staticClass:"invalid-feedback"},[e._v("Number is required")]):e._e(),e._v(" "),e.submitted&&!e.$v.form.number.phonenumber?n("div",{staticClass:"invalid-feedback"},[e._v("Please enter valid number. ")]):e._e()]),e._v(" "),n("div",{staticClass:"form-group m-auto mb-2"},[n("label",[e._v("Note")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.note,expression:"form.note"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Note",id:"note",name:"note"},domProps:{value:e.form.note},on:{input:function(t){t.target.composing||e.$set(e.form,"note",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"d-flex justify-content-start bd-highlight"},[n("div",{staticClass:"bd-highlight"},[n("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"}},[e._v("Save")])])])])]),e._v(" "),n("b-tab",{attrs:{title:"Add Multiple"}},[n("div",{staticClass:"d-flex justify-content-end"},[n("button",{staticClass:"btn btn-success mb-2 float-right",on:{click:function(t){return e.download()}}},[e._v("Sample File")])]),e._v(" "),n("div",{staticClass:"input-group mb-3"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text paperClip chat-input",attrs:{id:"basic-addon1"},on:{click:function(t){return e.choseFile2()}}},[n("b-icon",{attrs:{icon:"paperclip"}})],1)]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelFileValu,expression:"modelFileValu"}],staticClass:"form-control csv_field_input chat-input",attrs:{type:"text",placeholder:"Choose file","aria-label":"Username",readonly:"","aria-describedby":"basic-addon1"},domProps:{value:e.modelFileValu},on:{click:function(t){return e.choseFile2()},input:function(t){t.target.composing||(e.modelFileValu=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group mb-2 mt-4 d-none"},[n("input",{staticClass:"form-control chat-input",attrs:{type:"file",id:"model_file_input2",name:"csvFile",accept:".csv"},on:{change:function(t){return e.onSelect(t)}}})]),e._v(" "),n("div",{staticClass:"d-flex justify-content-start bd-highlight"},[n("div",{staticClass:"bd-highlight"},[n("button",{staticClass:"btn btn-primary float-right",attrs:{type:"button"},on:{click:function(t){return e.handleSubmit2()}}},[e._v("Save")])])])])],1)],1)])])],1)},staticRenderFns:[]};var x=n("VU/8")(E,k,!1,function(e){n("SfpO")},"data-v-38e6a866",null).exports,T=n("5Q7Q"),I=n.n(T),P={data:function(){return{form:{email:"",sender_email:"",password:"",to_email:"",host:"",port:"",secure:!1},submitted3:!1,showProfile:!1,profiles:[]}},validations:{form:{email:{required:o.required},sender_email:{required:o.required,email:o.email},password:{required:o.required},to_email:{required:o.required,email:o.email},host:{required:o.required},port:{required:o.required}}},mounted:function(){this.getEmailSetting()},methods:{handleSubmit:function(e){var t=this;if(this.submitted3=!0,this.$v.$touch(),!this.$v.$invalid){var n={data:this.form,url:"email/create"};this.$store.dispatch(l.c,n).then(function(e){e&&(t.$swal({icon:"success",title:"Email Setting",text:"Setting saved successfully"}),t.getEmailSetting())}).catch(function(e){console.log(e)})}},getEmailSetting:function(){var e=this;this.$store.dispatch(l.b,{url:"email/setting-get"}).then(function(t){t&&t.data?(e.form=t.data,e.showProfile=!0,e.getProfiles()):(e.form.email="",e.form.password="",e.form.to_email="",e.form.host="",e.form.port="",e.form.secure=!1,e.form.sender_email="")}).catch(function(e){console.log(e)})},getProfiles:function(){var e=this;this.$store.dispatch(l.c,{data:{},url:"profile/getdata"}).then(function(t){t&&(e.profiles=t.data)}).catch(function(e){console.log(e)})},profileUpdate:function(e,t){var n=this,i={data:{setting_id:t,status:e},url:"email/save/setting"};this.$store.dispatch(l.c,i).then(function(e){e&&n.getProfiles()}).catch(function(e){console.log(e)})}}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-1"},[n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.email.$error},attrs:{name:"email",placeholder:"Enter Username"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.email.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.email.required?e._e():n("span",[e._v("Email Is Required")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.password.$error},attrs:{name:"password",placeholder:"Enter Password"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.password.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.password.required?e._e():n("span",[e._v("Password Is Required")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.sender_email,expression:"form.sender_email"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.sender_email.$error},attrs:{name:"sender_email",placeholder:"Email FROM"},domProps:{value:e.form.sender_email},on:{input:function(t){t.target.composing||e.$set(e.form,"sender_email",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.to_email.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.sender_email.required?e._e():n("span",[e._v("FROM Email is required")]),e._v(" "),e.$v.form.sender_email.email?e._e():n("span",[e._v("Enter Valid FROM Email")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.to_email,expression:"form.to_email"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.to_email.$error},attrs:{name:"to_email",placeholder:"Email TO"},domProps:{value:e.form.to_email},on:{input:function(t){t.target.composing||e.$set(e.form,"to_email",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.to_email.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.to_email.required?e._e():n("span",[e._v("TO Email is required")]),e._v(" "),e.$v.form.to_email.email?e._e():n("span",[e._v("Enter Valid TO Email")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.host,expression:"form.host"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.host.$error},attrs:{name:"host",placeholder:"Enter Host (smtp.domain.com)"},domProps:{value:e.form.host},on:{input:function(t){t.target.composing||e.$set(e.form,"host",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.host.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.host.required?e._e():n("span",[e._v("Host Is Required")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.port,expression:"form.port"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.port.$error},attrs:{name:"port",placeholder:"Enter Port (465 or 587)"},domProps:{value:e.form.port},on:{input:function(t){t.target.composing||e.$set(e.form,"port",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.port.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.port.required?e._e():n("span",[e._v("Port Is Required")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottomright",value:"for 465 only",expression:"'for 465 only'",modifiers:{hover:!0,bottomright:!0}}],attrs:{id:"checkbox-11",name:"secure",value:!0,plain:"",checked:"true",variant:"primary"},model:{value:e.form.secure,callback:function(t){e.$set(e.form,"secure",t)},expression:"form.secure"}},[e._v("\n            Secure\n          ")])],1),e._v(" "),e._m(0)]),e._v(" "),n("hr"),e._v(" "),e.showProfile?n("div",[n("div",{staticClass:"form-group mt-2"},e._l(e.profiles,function(t){return n("b-form-checkbox",{key:t._id,attrs:{plain:"",id:"checkbox-1",name:"checkbox-1",value:"true","unchecked-value":"false",checked:"true"==t.emailnotification},on:{change:function(n){return e.profileUpdate(n,t._id)}}},[n("span",{staticClass:"pr-2"},[e._v("  "+e._s(t.profile))])])}),1)]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[this._v("Save")])])}]};var D=n("VU/8")(P,R,!1,function(e){n("Irnv")},null,null).exports,O=o.helpers.regex("phonenumber",/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/),B={data:function(){return{form:{voice_url:"",voice_main_url:"",sms_url:"",sms_main_url:""},submitted3:!1,setting:null}},validations:{form:{voice_url:{required:o.required,url:O},sms_url:{required:o.required,url:O}}},mounted:function(){this.getCallSetting()},methods:{getCallSetting:function(){var e=this,t=localStorage.getItem("activeProfile");if(t){var n=JSON.parse(t);this.setting=n._id;var i={data:{setting_id:this.setting},url:"setting/twilio/number/get"};this.$store.dispatch(l.c,i).then(function(t){console.log(t.data),e.form.voice_main_url=t.data.voiceUrl,e.form.sms_main_url=t.data.smsUrl,t.data.voiceFallbackUrl&&(e.form.voice_url=t.data.voiceFallbackUrl),t.data.smsFallbackUrl&&(e.form.sms_url=t.data.smsFallbackUrl)}).catch(function(e){console.log(e)})}},handleSubmit:function(e){var t=this;if(this.submitted3=!0,this.$v.$touch(),!this.$v.$invalid){var n=this.form;n.setting_id=this.setting;var i={data:n,url:"setting/twilio/number/fallback"};this.$store.dispatch(l.c,i).then(function(e){e&&(t.$swal({icon:"success",title:"Success",text:"Number Setting updated successfully!"}),t.getCallSetting())}).catch(function(e){console.log(e)})}}}},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-1 px-2"},[n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("A CALL COMES IN")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.voice_main_url,expression:"form.voice_main_url"}],staticClass:"form-control main-url-control",attrs:{name:"voice_main_url",readonly:""},domProps:{value:e.form.voice_main_url},on:{input:function(t){t.target.composing||e.$set(e.form,"voice_main_url",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("CALL HANDLER FAILS")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.voice_url,expression:"form.voice_url"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.voice_url.$error},attrs:{name:"url",placeholder:"Enter Twiml Fallback Url"},domProps:{value:e.form.voice_url},on:{input:function(t){t.target.composing||e.$set(e.form,"voice_url",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.voice_url.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.voice_url.required?e._e():n("span",[e._v("Url Is Required")]),e._v(" "),e.$v.form.voice_url.url?e._e():n("span",[e._v("Please enter valid Url")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("A MESSAGE COMES IN")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.sms_main_url,expression:"form.sms_main_url"}],staticClass:"form-control main-url-control",attrs:{name:"sms_main_url",readonly:""},domProps:{value:e.form.sms_main_url},on:{input:function(t){t.target.composing||e.$set(e.form,"sms_main_url",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("MESSAGE HANDLER FAILS")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.sms_url,expression:"form.sms_url"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.sms_url.$error},attrs:{name:"sms_url",placeholder:"Enter Twiml Fallback Url"},domProps:{value:e.form.sms_url},on:{input:function(t){t.target.composing||e.$set(e.form,"sms_url",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.sms_url.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.sms_url.required?e._e():n("span",[e._v("Url Is Required")]),e._v(" "),e.$v.form.sms_url.url?e._e():n("span",[e._v("Please enter valid Url")])]):e._e()]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[this._v("Update")])])}]};var N=n("VU/8")(B,M,!1,function(e){n("dLaG")},"data-v-3cbd76a3",null).exports,L=o.helpers.regex("phonenumber",/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/),F={data:function(){return{form:{url:"",main_url:""},submitted3:!1,setting:null}},validations:{form:{url:{required:o.required,url:L}}},mounted:function(){this.getCallSetting()},methods:{getCallSetting:function(){var e=this,t=localStorage.getItem("activeProfile");if(t){var n=JSON.parse(t);this.setting=n._id;var i={data:{setting_id:this.setting},url:"setting/twilio/twiml/get"};this.$store.dispatch(l.c,i).then(function(t){var n=new URL(t.data.voiceUrl),i=n.hostname,r=n.protocol;if(e.form.main_url=r+"//"+i,t.data.voiceFallbackUrl){var o=new URL(t.data.voiceFallbackUrl),s=o.hostname,a=o.protocol;e.form.url=a+"//"+s}}).catch(function(e){console.log(e)})}},handleSubmit:function(e){var t=this;if(this.submitted3=!0,this.$v.$touch(),!this.$v.$invalid){var n=this.form;n.setting_id=this.setting;var i={data:n,url:"setting/twilio/twiml/fallback"};this.$store.dispatch(l.c,i).then(function(e){e&&(t.$swal({icon:"success",title:"Success",text:"TwiML Setting updated successfully!"}),t.getCallSetting())}).catch(function(e){console.log(e)})}}}},j={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-1 px-2"},[n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("Request URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.main_url,expression:"form.main_url"}],staticClass:"form-control main-url-control",attrs:{name:"main_url",readonly:""},domProps:{value:e.form.main_url},on:{input:function(t){t.target.composing||e.$set(e.form,"main_url",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("Fallback URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.url,expression:"form.url"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.url.$error},attrs:{name:"url",placeholder:"Enter Fallback Url"},domProps:{value:e.form.url},on:{input:function(t){t.target.composing||e.$set(e.form,"url",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.url.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.url.required?e._e():n("span",[e._v("Twiml Fallback Url Is Required")]),e._v(" "),e.$v.form.url.url?e._e():n("span",[e._v("Please enter valid Twiml Fallback Url")])]):e._e()]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[this._v("Update")])])}]};var $=n("VU/8")(F,j,!1,function(e){n("Izth")},"data-v-9fa1d8fa",null).exports,U={components:{TwilioNumberSetting:N,TwimlSetting:$},data:function(){return{activeMenu:"setting"}},mounted:function(){},methods:{enableMenu:function(e){this.activeMenu=e}}},q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2"},["setting"==e.activeMenu?n("div",[n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableMenu("twiml")}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"gear-fill","font-scale":"1","aria-hidden":"true"}}),e._v("TwiML Setting\n      ")],1),e._v(" "),n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableMenu("number")}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"telephone","font-scale":"1","aria-hidden":"true"}}),e._v("Number Setting\n      ")],1)])]):e._e(),e._v(" "),"twiml"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[e._m(0),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"1","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("twiml-setting")],1):e._e(),e._v(" "),"number"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[e._m(1),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"1","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("twilio-number-setting")],1):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h6",[this._v("TwiML Setting")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"p-2 bd-highlight"},[t("h6",[this._v("Number Setting")])])}]};var V=n("VU/8")(U,q,!1,function(e){n("ZuDo")},null,null).exports,z=o.helpers.regex("phonenumber",/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/),G={data:function(){return{form:{url:"",main_url:""},submitted3:!1,setting:null}},validations:{form:{url:{required:o.required,url:z}}},mounted:function(){this.getCallSetting()},methods:{getCallSetting:function(){var e=this,t=localStorage.getItem("activeProfile");if(t){var n=JSON.parse(t);this.setting=n._id;var i={data:{setting_id:this.setting},url:"setting/telnyx/sip/get"};this.$store.dispatch(l.c,i).then(function(t){e.form.main_url=t.data.data.webhook_event_url,t.data.data.webhook_event_failover_url&&(e.form.url=t.data.data.webhook_event_failover_url)}).catch(function(e){console.log(e)})}},handleSubmit:function(e){var t=this;if(this.submitted3=!0,this.$v.$touch(),!this.$v.$invalid){var n=this.form;n.setting_id=this.setting;var i={data:n,url:"setting/telnyx/sip/fallback"};this.$store.dispatch(l.c,i).then(function(e){e&&(t.$swal({icon:"success",title:"Success",text:"SIP Setting updated successfully!"}),t.getCallSetting())}).catch(function(e){console.log(e)})}}}},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-1 px-2"},[n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("Webhook URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.main_url,expression:"form.main_url"}],staticClass:"form-control main-url-control",attrs:{name:"main_url",readonly:""},domProps:{value:e.form.main_url},on:{input:function(t){t.target.composing||e.$set(e.form,"main_url",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("Webhook Fallback URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.url,expression:"form.url"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.url.$error},attrs:{name:"url",placeholder:"Enter Twiml Fallback Url"},domProps:{value:e.form.url},on:{input:function(t){t.target.composing||e.$set(e.form,"url",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.url.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.url.required?e._e():n("span",[e._v("Twiml Fallback Url Is Required")]),e._v(" "),e.$v.form.url.url?e._e():n("span",[e._v("Please enter valid Twiml Fallback Url")])]):e._e()]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[this._v("Update")])])}]};var Q=n("VU/8")(G,Y,!1,function(e){n("6ycC")},"data-v-12a111cf",null).exports,H=o.helpers.regex("phonenumber",/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/),W={data:function(){return{form:{url:"",main_url:""},submitted3:!1,setting:null}},validations:{form:{url:{required:o.required,url:H}}},mounted:function(){this.getCallSetting()},methods:{getCallSetting:function(){var e=this,t=localStorage.getItem("activeProfile");if(t){var n=JSON.parse(t);this.setting=n._id;var i={data:{setting_id:this.setting},url:"setting/telnyx/twiml/get"};this.$store.dispatch(l.c,i).then(function(t){e.form.main_url=t.data.data.voice_url,t.data.data.voice_fallback_url&&(e.form.url=t.data.data.voice_fallback_url)}).catch(function(e){console.log(e)})}},handleSubmit:function(e){var t=this;if(this.submitted3=!0,this.$v.$touch(),!this.$v.$invalid){var n=this.form;n.setting_id=this.setting;var i={data:n,url:"setting/telnyx/twiml/fallback"};this.$store.dispatch(l.c,i).then(function(e){e&&(t.$swal({icon:"success",title:"Success",text:"TeXML Setting updated successfully!"}),t.getCallSetting())}).catch(function(e){console.log(e)})}}}},J={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-1 px-2"},[n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("Webhook URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.main_url,expression:"form.main_url"}],staticClass:"form-control main-url-control",attrs:{name:"main_url",readonly:""},domProps:{value:e.form.main_url},on:{input:function(t){t.target.composing||e.$set(e.form,"main_url",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("Webhook Fallback URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.url,expression:"form.url"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.url.$error},attrs:{name:"url",placeholder:"Enter Webhook Fallback URL"},domProps:{value:e.form.url},on:{input:function(t){t.target.composing||e.$set(e.form,"url",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.url.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.url.required?e._e():n("span",[e._v(" Url Is Required")]),e._v(" "),e.$v.form.url.url?e._e():n("span",[e._v("Please enter valid Url")])]):e._e()]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[this._v("Update")])])}]};var K=n("VU/8")(W,J,!1,function(e){n("9GJz")},"data-v-543667ae",null).exports,X=o.helpers.regex("phonenumber",/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/),Z={data:function(){return{form:{url:"",main_url:""},submitted3:!1,setting:null}},validations:{form:{url:{required:o.required,url:X}}},mounted:function(){this.getCallSetting()},methods:{getCallSetting:function(){var e=this,t=localStorage.getItem("activeProfile");if(t){var n=JSON.parse(t);this.setting=n._id;var i={data:{setting_id:this.setting},url:"setting/telnyx/message/get"};this.$store.dispatch(l.c,i).then(function(t){var n=new URL(t.data.data.webhook_url),i=n.hostname,r=n.protocol;if(e.form.main_url=r+"//"+i,t.data.data.webhook_failover_url){var o=new URL(t.data.data.webhook_failover_url),s=o.hostname,a=o.protocol;e.form.url=a+"//"+s}}).catch(function(e){console.log(e)})}},handleSubmit:function(e){var t=this;if(this.submitted3=!0,this.$v.$touch(),!this.$v.$invalid){var n=this.form,i=new URL(n.url),r=i.hostname,o=i.protocol;n.url=o+"//"+r,n.setting_id=this.setting;var s={data:n,url:"setting/telnyx/message/fallback"};this.$store.dispatch(l.c,s).then(function(e){e&&(t.$swal({icon:"success",title:"Success",text:" Profile updated successfully!"}),t.getCallSetting())}).catch(function(e){console.log(e)})}}}},ee={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-1 px-2"},[n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("Primary Webhook URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.main_url,expression:"form.main_url"}],staticClass:"form-control main-url-control",attrs:{name:"main_url",readonly:""},domProps:{value:e.form.main_url},on:{input:function(t){t.target.composing||e.$set(e.form,"main_url",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group mt-2"},[n("label",[e._v("Webhook Fallback URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.url,expression:"form.url"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.url.$error},attrs:{name:"url",placeholder:"Enter Webhook Fallback URL"},domProps:{value:e.form.url},on:{input:function(t){t.target.composing||e.$set(e.form,"url",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.url.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.url.required?e._e():n("span",[e._v(" Url Is Required")]),e._v(" "),e.$v.form.url.url?e._e():n("span",[e._v("Please enter valid Url")])]):e._e()]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[this._v("Update")])])}]};var te=n("VU/8")(Z,ee,!1,function(e){n("mEdf")},"data-v-c891af20",null).exports,ne={components:{SipSetting:Q,TexmlSetting:K,MessageSetting:te},data:function(){return{activeMenu:"setting"}},mounted:function(){},methods:{enableMenu:function(e){this.activeMenu=e}}},ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2"},[n("div",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"1","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("message-setting")],1),e._v(" "),"twiml"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[e._m(0),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"1","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("texml-setting")],1):e._e(),e._v(" "),"sip"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[e._m(1),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"1","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("sip-setting")],1):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h6",[this._v("TwiML Setting")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"p-2 bd-highlight"},[t("h6",[this._v("SIP Setting")])])}]};var re={components:{TwilioSetting:V,TelnyxSetting:n("VU/8")(ne,ie,!1,function(e){n("Vaj/")},null,null).exports,MessageSetting:te,TwimlSetting:$},data:function(){return{setting:null,activeMenu:"setting"}},mounted:function(){console.log("load data"),u.$on("changeProfile",this.getCallSetting),this.getCallSetting()},methods:{getCallSetting:function(){var e=JSON.parse(localStorage.getItem("activeProfile"));console.log(e),e&&(this.setting=e)},enableMenu:function(e){this.activeMenu=e}}},oe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.setting&&"twilio"===this.setting.type?t("div",[t("twiml-setting")],1):this._e(),this._v(" "),this.setting&&"telnyx"===this.setting.type?t("div",[t("message-setting")],1):this._e()])},staticRenderFns:[]},se=n("VU/8")(re,oe,!1,null,null,null).exports,ae={data:function(){return{form:{email:""},submitted3:!1}},validations:{form:{email:{required:o.required}}},mounted:function(){var e=JSON.parse(this.$cookie.get("userdata"));void 0!==e.email&&(this.form.email=e.email)},methods:{handleSubmit:function(e){var t=this;if(this.submitted3=!0,this.$v.$touch(),!this.$v.$invalid){var n={data:this.form,url:"auth/username/update"};this.$store.dispatch(l.c,n).then(function(e){e&&(t.$cookie.set("userdata",a()(e.data),30),t.$swal({icon:"success",title:"Success",text:"Username updated successfully"}))}).catch(function(e){console.log(e)})}}}},ce={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-1"},[n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":e.submitted3&&e.$v.form.email.$error},attrs:{name:"email",placeholder:"Enter Username"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.email.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.form.email.required?e._e():n("span",[e._v("Email Is Required")])]):e._e()]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[this._v("Change")])])}]},le=n("VU/8")(ae,ce,!1,null,null,null).exports,ue={data:function(){return{user:{old_password:"",password:"",c_password:""},submitted:!1}},validations:{user:{old_password:{required:o.required},password:{required:o.required,minLength:Object(o.minLength)(6)},c_password:{required:o.required,sameAsPassword:Object(o.sameAs)("password")}}},mounted:function(){},methods:{handleSubmit:function(e){var t=this;if(this.submitted=!0,this.$v.$touch(),!this.$v.$invalid){var n={data:this.user,url:"auth/password/update"};this.$store.dispatch(l.c,n).then(function(e){e&&(t.$swal({icon:"success",title:"Success",text:"Password updated successfully"}),t.submitted=!1,t.user={password:"",c_password:""})}).catch(function(e){console.log(e)})}}}},de={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-1"},[n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mb-2 mt-4"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.old_password,expression:"user.old_password"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.old_password.$error},attrs:{name:"password",type:"password",placeholder:"Old Password"},domProps:{value:e.user.old_password},on:{input:function(t){t.target.composing||e.$set(e.user,"old_password",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.old_password.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.user.old_password.required?e._e():n("span",[e._v("old Password is required")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mb-2 mt-4"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.password.$error},attrs:{type:"password",placeholder:"New Password",id:"login-input"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.password.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.user.password.required?e._e():n("span",[e._v("Password is required")]),e._v(" "),e.$v.user.password.minLength?e._e():n("span",[e._v("Please enter a valid password")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-group mb-2 mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.c_password,expression:"user.c_password"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.c_password.$error},attrs:{type:"password",placeholder:"Confirm Password",id:"clogin-input"},domProps:{value:e.user.c_password},on:{input:function(t){t.target.composing||e.$set(e.user,"c_password",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.c_password.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.user.c_password.required?e._e():n("span",[e._v("Confirm Password is required"),n("br")]),e._v(" "),e.$v.user.c_password.sameAsPassword?e._e():n("span",[e._v("Password and confirm password are not match!")])]):e._e()]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[this._v("Change")])])}]},pe={components:{ChangeUsername:le,ChangePassword:n("VU/8")(ue,de,!1,null,null,null).exports,CallSetting:se},data:function(){return{activeMenu:"setting"}},mounted:function(){},methods:{enableMenu:function(e){this.activeMenu=e},deleteAccount:function(){var e=this;this.$swal.fire({icon:"warning",text:"Please enter your account password to delete account. This process is irreversible",title:"Delete Account",input:"password",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){var n={data:{password:t},url:"auth/password/check"};return e.$store.dispatch(l.c,n).then(function(e){return e}).catch(function(e){return!1})},allowOutsideClick:function(){return!e.$swal.isLoading()}}).then(function(t){console.log(t),t.isConfirmed&&e.$swal.fire({icon:"success",title:"Account Delete",text:"Your account deleted successfully",showDenyButton:!1,showCancelButton:!1,confirmButtonText:"Ok"}).then(function(t){e.$cookie.delete("access_token"),e.$cookie.delete("userdata"),window.location.href="/"+e.$route.params.appdirectory+"/"})})}}},fe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2"},["setting"==e.activeMenu?n("div",[n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableMenu("username")}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"person","font-scale":"1","aria-hidden":"true"}}),e._v("Change Username\n      ")],1),e._v(" "),n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableMenu("password")}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"key","font-scale":"1","aria-hidden":"true"}}),e._v("Change Password\n      ")],1),e._v(" "),n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.deleteAccount()}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"trash","font-scale":"1","aria-hidden":"true"}}),e._v("Delete Account\n      ")],1),e._v(" "),n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableMenu("fallback")}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"exclamation-circle","font-scale":"1","aria-hidden":"true"}}),e._v("Fallback Setting\n      ")],1)])]):e._e(),e._v(" "),"username"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[e._m(0),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"1","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("change-username")],1):e._e(),e._v(" "),"password"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[e._m(1),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"1","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("change-password")],1):e._e(),e._v(" "),"fallback"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[e._m(2),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"1","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("call-setting")],1):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h6",[this._v("Change Username")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"p-2 bd-highlight"},[t("h6",[this._v("Change Password")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"p-2 bd-highlight"},[t("h6",[this._v("Fallback Setting")])])}]};var he=n("VU/8")(pe,fe,!1,function(e){n("gwH9")},null,null).exports,me=n("BO1k"),ve=n.n(me),ge=n("rtsM"),_e=function(){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);return t[0]=170,t[1]=187,48042===n[0]?"little":"big"},Ae=function(e){var t=e.slice(0,32),n=(e=e.slice(32)).slice(0,1);e=e.slice(1);var i=n[0],r={up:!!(1&i),uv:!!(4&i),at:!!(64&i),ed:!!(128&i),flagsInt:i},o=e.slice(0,4);e=e.slice(4);var s=function(e){if(4!==e.length)throw new Error("Only 4byte buffers allowed!");return"big"!==_e()&&(e=e.reverse()),new Uint32Array(e.buffer)[0]}(o),a=void 0,c=void 0,l=void 0;if(r.at){a=e.slice(0,16);var u=(e=e.slice(16)).slice(0,2);e=e.slice(2);var d=function(e){if(2!==e.length)throw new Error("Only 2byte buffer allowed!");return"big"!==_e()&&(e=e.reverse()),new Uint16Array(e.buffer)[0]}(u);c=e.slice(0,d),l=e=e.slice(d)}return{rpIdHash:t,flagsBuf:n,flags:r,counter:s,counterBuf:o,aaguid:a,credID:c,COSEPublicKey:l}},ye=n("ozHJ"),be={data:function(){return{title:"",keys:[]}},mounted:function(){this.getHardwarekey()},methods:{deleteKey:function(e){var t=this;this.$swal.fire({title:"Are you sure?",text:"Hardware key will be deleted. You will have to set it up again!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, remove it!"}).then(function(n){if(n.isConfirmed){var i={data:{id:e},url:"hardwarekey/delete"};t.$store.dispatch(l.c,i).then(function(e){e&&(t.$swal.fire("Deleted!","Your key has been deleted.","success"),t.getHardwarekey())}).catch(function(e){})}})},getHardwarekey:function(){var e=this;this.$store.dispatch(l.c,{data:{},url:"hardwarekey/get"}).then(function(t){t&&(e.keys=t.data)}).catch(function(e){})},register:function(){var e=this;if(""===this.title.trim())this.$swal.fire("Please enter title","","error");else{var t={data:{title:this.title.trim()},url:"hardwarekey/register-key"};this.$store.dispatch(l.c,t).then(function(t){if(t)if("startFIDOEnrolment"!==t.status)e.$swal.fire("Error registering user!","","error");else{e.$store.dispatch(l.c,{data:{},url:"hardwarekey/register"}).then((n=b()(A.a.mark(function t(n){var i,r,o,s,a,c,u,d,p,f,h,m,v,g;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i=n.hardwarekey,r=n.publicKey,t.prev=2,console.log(r),r=e.preformatMakeCredReq(r),o=[],s=!0,a=!1,c=void 0,t.prev=9,u=ve()(i);!(s=(d=u.next()).done);s=!0)p=d.value,console.log(p),o.push({id:Object(ge.decode)(p.credentials[0]),type:"public-key"});t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),a=!0,c=t.t0;case 17:t.prev=17,t.prev=18,!s&&u.return&&u.return();case 20:if(t.prev=20,!a){t.next=23;break}throw c;case 23:return t.finish(20);case 24:return t.finish(17);case 25:return r.excludeCredentials=o,t.next=28,navigator.credentials.create({publicKey:r});case 28:f=t.sent,console.log(f),t.next=35;break;case 32:t.prev=32,t.t1=t.catch(2),e.$swal.fire("Key!",t.t1.message,"error");case 35:return t.next=37,ye.decode(f.response.attestationObject);case 37:h=t.sent,m=Ae(h.authData),_=m.aaguid,v=Array.prototype.map.call(new Uint8Array(_),function(e){return("00"+e.toString(16)).slice(-2)}).join(""),f=e.publicKeyCredentialToJSON(f),g={data:{id:f.id,aaguid:v},url:"hardwarekey/verify"},e.$store.dispatch(l.c,g).then(function(t){if("ok"!==t.status)throw new Error("Error registering user! Server returned: "+t.errorMessage);e.$swal.fire("Key!","Your key added successfully.","success"),e.getHardwarekey(),e.title=""}).catch(function(e){console.log(e)});case 43:case"end":return t.stop()}var _},t,e,[[2,32],[9,13,17,25],[18,,20,24]])})),function(e){return n.apply(this,arguments)})).catch(function(e){})}var n}).catch(function(e){})}},preformatGetAssertReq:function(e){return new g.a(function(t,n){t(e)})},generateRandomBuffer:function(e){e||(e=32);var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t},preformatMakeCredReq:function(e){return e.challenge=Object(ge.decode)(e.challenge),e.user.id=Object(ge.decode)(e.user.id),e},bufToHex:function(e){return Array.prototype.map.call(new Uint8Array(e),function(e){return("00"+e.toString(16)).slice(-2)}).join("")},readBE32:function(e){if(4!==e.length)throw new Error("Only 4byte buffers allowed!");return"big"!==this.getEndian()&&(e=e.reverse()),new Uint32Array(e.buffer)[0]},getEndian:function(){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);return t[0]=170,t[1]=187,48042===n[0]?"little":"big"},readBE16:function(e){if(2!==e.length)throw new Error("Only 2byte buffer allowed!");return"big"!==this.getEndian()&&(e=e.reverse()),new Uint16Array(e.buffer)[0]},publicKeyCredentialToJSON:function(e){if(e instanceof Array){var t=[],n=!0,i=!1,r=void 0;try{for(var o,s=ve()(e);!(n=(o=s.next()).done);n=!0){var a=o.value;t.push(this.publicKeyCredentialToJSON(a))}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return t}if(e instanceof ArrayBuffer)return Object(ge.encode)(e);if(e instanceof Object){var c={};for(var l in e)c[l]=this.publicKeyCredentialToJSON(e[l]);return c}return e}}},we={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h6",{staticClass:"border-bottom mx-1 pb-1"},[e._v("Hardware Key")]),e._v(" "),e._l(e.keys,function(t){return n("div",{key:t._id,staticClass:"card m-1"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"pr-1 mr-2"},[n("b-icon",{attrs:{icon:"key"}}),n("span",{staticClass:"mr-2"},[e._v(" "+e._s(t.title)+" ")])],1),e._v(" "),n("div",{staticClass:"pl-1 ml-2"},[n("a",{staticClass:"text-danger",attrs:{href:"javascript:void(0);"},on:{click:function(n){return e.deleteKey(t._id)}}},[n("b-icon",{attrs:{icon:"trash"}})],1)])])])])}),e._v(" "),n("div",{staticClass:"card m-1"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"p-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"p-2"},[n("button",{staticClass:"btn btn-success",on:{click:function(t){return e.register()}}},[n("b-icon",{attrs:{icon:"plus"}})],1)])])])])])])])],2)},staticRenderFns:[]},Ce={components:{CallSetting:se,HardwareKey:n("VU/8")(be,we,!1,null,null,null).exports},data:function(){return{mfaStatus:!1,realMfs:!1,qr:null,verification_code:"",secret:""}},mounted:function(){this.getMfaStatus()},methods:{mfaStatusChange:function(){var e=this,t=this.mfaStatus?"true":"false";this.mfaStatus?this.commonMfa({status:t,qr:"true"}):this.$swal.fire({title:"Are you sure?",text:"Software token will be deleted. You will have to reconfigure it!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, remove it!"}).then(function(n){n.isConfirmed?(e.commonMfa({status:t,qr:"true"}),e.qr=!1):e.mfaStatus=!0})},commonMfa:function(e){var t=this,n={data:e,url:"auth/mfa/save"};this.$store.dispatch(l.c,n).then(function(n){n&&("true"===e.status?(t.qr=n.image,t.secret=n.secret):t.getMfaStatus())}).catch(function(e){})},verifyStatusCode:function(){var e=this;if(""!==this.verification_code){var t={data:{status:"true",qr:"false",code:this.verification_code},url:"auth/mfa/save"};this.$store.dispatch(l.c,t).then(function(t){t&&(e.qr=null,e.verification_code="",e.getMfaStatus())}).catch(function(e){})}else this.$swal.fire("Please enter verification code","","error")},copySecret:function(){try{navigator.clipboard.writeText(this.secret),document.getElementById("clickText").innerHTML="Copied!"}catch(e){console.error("Failed to copy!",e)}},getMfaStatus:function(){var e=this;this.$store.dispatch(l.c,{data:{},url:"auth/user/get"}).then(function(t){e.realMfs=!(!t||"true"!==t.data.mfa),e.mfaStatus=!(!t||"true"!==t.data.mfa)}).catch(function(t){e.realMfs=!1,e.mfaStatus=!1})}}},Se={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-2"},[n("div",{},[n("div",[n("h6",{staticClass:"border-bottom mx-1 pb-1"},[e._v("TOTP")]),e._v(" "),n("div",{staticClass:"card m-1"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col-auto"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.mfaStatus,expression:"mfaStatus"}],staticClass:"switch-checkbox",attrs:{id:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(e.mfaStatus)?e._i(e.mfaStatus,null)>-1:e.mfaStatus},on:{change:[function(t){var n=e.mfaStatus,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=e._i(n,null);i.checked?o<0&&(e.mfaStatus=n.concat([null])):o>-1&&(e.mfaStatus=n.slice(0,o).concat(n.slice(o+1)))}else e.mfaStatus=r},e.mfaStatusChange]}}),e._v(" "),n("label",{staticClass:"switch-label switch-label-mode",attrs:{for:"checkbox"}},[n("span",[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"#198754",width:"23",height:"23",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.393 7.5l-5.643 5.784-2.644-2.506-1.856 1.858 4.5 4.364 7.5-7.643-1.857-1.857z"}})])]),e._v(" "),n("span",[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"#fd3545",width:"23",height:"23",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M14 12h-4v-12h4v12zm4.213-10.246l-1.213 1.599c2.984 1.732 5 4.955 5 8.647 0 5.514-4.486 10-10 10s-10-4.486-10-10c0-3.692 2.016-6.915 5-8.647l-1.213-1.599c-3.465 2.103-5.787 5.897-5.787 10.246 0 6.627 5.373 12 12 12s12-5.373 12-12c0-4.349-2.322-8.143-5.787-10.246z"}})])]),e._v(" "),n("div",{staticClass:"switch-toggle",class:{"switch-toggle-checked":e.mfaStatus}})])])]),e._v(" "),n("div",{staticClass:"col-auto"},[e._v("\n          Status: "),e.realMfs?n("span",[e._v("Active")]):n("span",[e._v("Inactive")])])])])])])]),e._v(" "),n("hr"),e._v(" "),e.qr?n("div",{staticClass:"text-center"},[n("div",{staticClass:"text-center"},[e._v("Scan this QR code")]),e._v(" "),n("div",{staticClass:"text-center"},[n("img",{staticClass:"mb-2 qr_image",attrs:{src:e.qr}})]),e._v(" "),n("div",{staticClass:"text-danger text-center"},[e._v("Or Enter Key Manually")]),e._v(" "),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body font-monospace clickcopy",on:{click:function(t){return e.copySecret()}}},[e._v("\n        "+e._s(e.secret)+"\n      ")])]),e._v(" "),n("div",{staticClass:"text-secondary text-center",attrs:{id:"clickText"}},[e._v("Click On Key To Copy")]),e._v(" "),n("div",{staticClass:"form-group mt-1"},[n("label",[e._v("Enter Verification Code")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.verification_code,expression:"verification_code"}],staticClass:"totp",attrs:{type:"form-control",maxlength:"6",placeholder:"000000",title:"6 Digit Code"},domProps:{value:e.verification_code},on:{input:function(t){t.target.composing||(e.verification_code=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"btn btn-success m-2 px-4",attrs:{type:"button"},on:{click:function(t){return e.verifyStatusCode()}}},[e._v("Verify")])]):e._e(),e._v(" "),n("hardware-key")],1)},staticRenderFns:[]};var Ee={components:{EmailSetting:D,CallSetting:se,AccountSetting:he,Mfa:n("VU/8")(Ce,Se,!1,function(e){n("dR19")},"data-v-4a2f9445",null).exports},data:function(){return{activeMenu:"setting",versionOption:"v0",checkpasswordMenu:"",check_password:""}},mounted:function(){this.getVersion()},methods:{enableMenu:function(e){this.activeMenu=e},getVersion:function(){var e=this;this.$store.dispatch(l.c,{data:{},url:"auth/get-version"}).then(function(t){t&&(e.versionOption=t.data)}).catch(function(e){})},passwordEnable:function(e){this.checkpasswordMenu=e,this.enableMenu("password")},checkPassword:function(){var e=this;if(""!==this.check_password){var t={data:{password:this.check_password},url:"auth/password/verify"};this.$store.dispatch(l.c,t).then(function(t){t&&(e.check_password="",e.enableMenu(e.checkpasswordMenu))}).catch(function(e){})}else this.$swal.fire("please enter password","","error")}}},ke={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-icon",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-email-setting",modifiers:{"sidebar-email-setting":!0}}],staticClass:"m-2",staticStyle:{cursor:"pointer"},attrs:{"font-scale":"1",icon:"gear-fill","aria-hidden":"true",title:"Settings"}}),e._v(" "),n("b-sidebar",{attrs:{id:"sidebar-email-setting",title:"Settings",shadow:"",backdrop:""}},["setting"==e.activeMenu?n("div",{staticClass:"px-3 py-2"},[n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableMenu("email")}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"envelope","font-scale":"1","aria-hidden":"true"}}),e._v("Email Settings")],1),e._v(" "),n("li",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"list-group-item",staticStyle:{cursor:"pointer"}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"person-badge","font-scale":"1","aria-hidden":"true"}}),e._v("Profile Settings\n            ")],1),e._v(" "),n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.enableMenu("account")}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"person","font-scale":"1","aria-hidden":"true"}}),e._v("Account Settings\n            ")],1),e._v(" "),n("li",{staticClass:"list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.passwordEnable("mfa")}}},[n("b-icon",{staticClass:"mx-2",attrs:{icon:"shield-lock","font-scale":"1","aria-hidden":"true"}}),e._v("MFA Settings\n            ")],1)]),e._v(" "),n("div",{staticClass:"version"},[e._v(e._s(e.versionOption))])]):e._e(),e._v(" "),"email"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",[n("h4",[e._v("Email Settings")])]),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"2","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("email-setting")],1):e._e(),e._v(" "),"call"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"p-2 bd-highlight"},[n("h4",[e._v("Call Settings")])]),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"2","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("call-setting")],1):e._e(),e._v(" "),"profile"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"p-2 bd-highlight"},[n("h4",[e._v("Profile Settings")])]),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"2","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v("\n          Profile settings\n        ")]):e._e(),e._v(" "),"account"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"p-2 bd-highlight"},[n("h4",[e._v("Account Settings")])]),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"2","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("div",[n("account-setting")],1)]):e._e(),e._v(" "),"mfa"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"p-2 bd-highlight"},[n("h4",[e._v("MFA Settings")])]),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"2","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("div",[n("mfa")],1)]):e._e(),e._v(" "),"password"==e.activeMenu?n("div",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"p-2 bd-highlight"},[n("h4",[e._v("Password Verification")])]),e._v(" "),n("div",{staticClass:"p-2 bd-highlight"},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left","font-scale":"2","aria-hidden":"true"},on:{click:function(t){return e.enableMenu("setting")}}})],1)]),e._v(" "),n("div",{staticClass:"m-2"},[n("div",{staticClass:"form-group"},[n("label",[e._v("Password")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.check_password,expression:"check_password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Enter Password"},domProps:{value:e.check_password},on:{input:function(t){t.target.composing||(e.check_password=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-success my-2 px-4",on:{click:function(t){return e.checkPassword()}}},[e._v("Verify")])])])]):e._e()])],1)},staticRenderFns:[]};var xe=n("VU/8")(Ee,ke,!1,function(e){n("3r+w")},null,null).exports,Te={components:{ProfileView:f,ThemeButton:c.a,Contact:x,Setting:xe},data:function(){return{user:{api_key:"",number:"",twilio_sid:"",twilio_token:"",twilio_number:"",profile:""},query:"",isLoading:!1,contacts:[],activeChat:"",submitted:!1,messageListLoader:!0,numbers:[],search_numbers:[],baseurl:"",userdata:null,access_token:null,activeProfile:null,headers:null,tNumbers:[],twilioNumbers:[],activeItem:null,options:[{text:"Telnyx",value:"telnyx"},{text:"Twilio",value:"twilio"}],selected:"telnyx",showDelete:!1}},validations:{user:{api_key:{required:o.required},number:{required:o.required},twilio_sid:{required:o.required},twilio_token:{required:o.required},twilio_number:{required:o.required},profile:{required:o.required}}},mounted:function(){var e=this;"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.headers={headers:{token:this.access_token}},this.onaddContact();var t=this;I.a.init({mainElement:".contact-list",triggerElement:".contact-list",onRefresh:function(){t.pullRefreshFunction(t)},distThreshold:120,distMax:140}),u.$on("getOneProfile",function(t){try{e.getOneProfile()}catch(e){}}),u.$on("changeProfile",function(e){}),u.$on("contactAdded",function(t){e.getNumberList(),setTimeout(function(){if("delete"===t||e.activeItem._id===t){var n=document.getElementsByClassName("activeChat");n.length>0&&n[0].click()}},1500)})},methods:{pullRefreshFunction:function(e){e.getNumberList(),e.getOneProfile(),e.refreshProfile()},searchContact:function(){var e=new RegExp(this.query,"i");this.search_numbers=this.numbers.filter(function(t){return e.test(t._id)?e.test(t._id):t.contact&&e.test(t.contact.first_name)?e.test(t.contact.first_name):t.contact&&e.test(t.contact.last_name)?e.test(t.contact.last_name):e.test(t.message)?e.test(t.message):void 0})},onaddContact:function(){var e=this;this.$emit("my_signal"),this.$store.dispatch(l.b,{url:"contact/get-all"}).then(function(t){t&&(e.contacts=t.data,e.$emit("onaddContact",t.data))}).catch(function(e){console.log(e)})},getValidString:function(e){if(e.length>10)var t=e.substring(0,e.length-(e.length-10))+"..";else t=e;return t},getOneProfile:function(){var e=this;if(void 0!==this.activeProfile._id){var t={data:{setting:this.activeProfile._id},url:"profile/getdata-one"};this.$store.dispatch(l.c,t).then(function(t){t&&(e.activeProfile=t.data)}).catch(function(e){console.log(e)})}},refreshProfile:function(){this.$refs.childComponent.getallProfile()},onClickChild2:function(e){this.activeProfile=e},onClickChild:function(e){this.activeProfile=e,this.messageListLoader=!0,this.getNumberList(),e.refresh=!0,this.$emit("activeChat",e),this.getSetting()},firstChatShow:function(e){var t=document.getElementById(e.id);t&&(t.style.display="none"),this.activeChat=e._id,this.activeItem=e,localStorage.setItem("activenumber",a()(e)),this.$emit("clicked",e)},logout:function(){this.$cookie.delete("access_token"),this.$cookie.delete("userdata"),window.location.href="/"+this.$route.params.appdirectory+"/"},getNumberList:function(){var e=this;this.numbers=[];var t={data:{user:this.userdata._id,setting:this.activeProfile._id},url:"setting/sms-number-list"};this.$store.dispatch(l.c,t).then(function(t){t&&(e.numbers=t,e.messageListLoader=!1,e.searchContact())}).catch(function(e){console.log(e)})},hideShowDeleteIcon:function(e){"telnyx"===e.type&&e.api_key?this.showDelete=!0:"twilio"===e.type&&e.twilio_sid?this.showDelete=!0:this.showDelete=!1},getSetting:function(){var e=this,t={data:{user:this.userdata._id,setting:this.activeProfile._id},url:"setting/get-setting"};this.$store.dispatch(l.c,t).then(function(t){t&&t.data&&(e.user=t.data,e.hideShowDeleteIcon(t.data),e.user.twilio_number=t.data.number,t.data.number,e.getNumbers(t.data.type),e.selected=t.data.type)}).catch(function(e){console.log(e)})},deleteProfile:function(){var e=this;this.$swal.fire({icon:"info",title:"Do you want to delete this Profile?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(t){if(t.isConfirmed){var n={data:{user:e.userdata._id,profile_id:e.activeProfile._id},url:"profile/delete-profile"};e.$store.dispatch(l.c,n).then(function(t){if(t.data){e.$swal({icon:"success",title:"Success",text:"Profile deleted successfully!"}),e.user.api_key="",e.user.number="",e.user.twilio_sid="",e.user.twilio_token="",e.user.twilio_number="",e.tNumbers=[],e.twilioNumbers=[],e.activeProfile=t.data,localStorage.removeItem("activeProfile"),e.$refs["my-modal"].hide(),e.$refs.childComponent.getallProfile();var n=e;setTimeout(function(){n.$refs.childComponent.activeFirstProfile()},2e3)}}).catch(function(e){console.log(e)})}else t.isDenied&&e.$swal.fire("Profile not deleted","","info")})},deleteApiKey:function(){var e=this;this.$swal.fire({icon:"info",title:"Do you want to delete this setting?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(t){if(t.isConfirmed){var n={data:{user:e.userdata._id,profile_id:e.activeProfile._id},url:"setting/delete-key"};e.$store.dispatch(l.c,n).then(function(t){e.$swal({icon:"success",title:"Success",text:"Key deleted successfully!"}),e.user.api_key="",e.user.number="",e.user.twilio_sid="",e.user.twilio_token="",e.user.twilio_number="",e.tNumbers=[],e.twilioNumbers=[],e.activeProfile=t.data,e.hideShowDeleteIcon(t.data),e.$refs.childComponent.getallProfile()}).catch(function(e){console.log(e)})}else t.isDenied&&e.$swal.fire("setting not deleted","","info")})},getNumbers:function(e){var t=this,n=this.user;n.type=e;var i={data:n,url:"setting/get-number"};"telnyx"===e?this.tNumbers=[]:this.twilioNumbers=[],this.$store.dispatch(l.c,i).then(function(n){n&&("telnyx"===e?t.tNumbers=n.data.data:t.twilioNumbers=n.data)}).catch(function(e){console.log(e)})},handleSubmit:function(e){var t=this;if(this.submitted=!0,this.$v.$touch(),""!=this.user.profile||"telnyx"===this.selected&&!this.$v.user.api_key.$error&&!this.$v.user.number.$error&&!this.$v.user.profile.$error||""!=this.user.profile||"twilio"===this.selected&&!this.$v.user.twilio_sid.$error&&!this.$v.user.twilio_token.$error&&!this.$v.user.twilio_number.$error&&!this.$v.user.profile.$error){var n="";if("telnyx"===this.selected)for(var i=0;i<this.tNumbers.length;i++)this.tNumbers[i].phone_number===this.user.number&&(n=this.tNumbers[i].id);else for(var r=0;r<this.twilioNumbers.length;r++)this.twilioNumbers[r].phoneNumber===this.user.twilio_number&&(n=this.twilioNumbers[r].sid);var o={api_key:this.user.api_key,number:this.user.number,user:this.userdata._id,sid:n,type:this.selected,twilio_sid:this.user.twilio_sid,twilio_token:this.user.twilio_token,twilio_number:this.user.twilio_number,setting:this.activeProfile._id,profile:this.user.profile};this.isLoading=!0;var s={data:o,url:"setting/check-setting"};this.$store.dispatch(l.c,s).then(function(e){var n=!1;if(e){if("telnyx"===t.selected&&void 0!==e.data.data.connection_id&&e.data.data.connection_id&&""!==e.data.data.connection_id&&(n=!0),"twilio"===t.selected){var i=!1;void 0!==e.data.voiceApplicationSid&&e.data.voiceApplicationSid&&""!==e.data.voiceApplicationSid&&(n=!0,i=!0),i||void 0!==e.data.voiceUrl&&e.data.voiceUrl&&""!==e.data.voiceUrl&&(n=!0)}if(n)t.$swal.fire({icon:"warning",title:"Call Setting",text:"The call setting is already available. Do you want to override the call setting?",showDenyButton:!0,confirmButtonText:"Yes, override it",denyButtonText:"No, Keep old"}).then(function(e){var n=!1;if(e.isConfirmed?(n=!0,o.override="true"):e.isDenied&&(n=!0,o.override="false"),n){t.isLoading=!0;var i={data:o,url:"setting/create"};t.$store.dispatch(l.c,i).then(function(e){e&&(t.$refs["my-modal"].hide(),t.activeProfile=e.data,t.hideShowDeleteIcon(e.data),t.$refs.childComponent.getallProfile(),u.$emit("clicked",!0),u.$emit("changeProfile2",!0),t.$v.$reset()),t.isLoading=!1}).catch(function(e){t.isLoading=!1,console.log(e)})}});else{o.override="true";var r={data:o,url:"setting/create"};t.$store.dispatch(l.c,r).then(function(e){e&&(t.$refs["my-modal"].hide(),t.activeProfile=e.data,t.hideShowDeleteIcon(e.data),t.$refs.childComponent.getallProfile(),u.$emit("clicked",!0),u.$emit("changeProfile2",!0),t.$v.$reset()),t.isLoading=!1}).catch(function(e){t.isLoading=!1,console.log(e)})}}t.isLoading=!1}).catch(function(e){t.isLoading=!1,console.log(e)})}}}},Ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLoading?n("div",{attrs:{id:"loader1"}},[e._m(0)]):e._e(),e._v(" "),n("div",{staticClass:"profile"},[n("div",{staticClass:"d-flex flex-row bd-highlight align-items-center align-self-center"},[n("div",{staticClass:"mt-2"},[n("div",{staticClass:"d-flex flex-row bd-highlight"},[n("setting"),e._v(" "),n("div",{staticClass:"bd-highlight"},[n("contact",{attrs:{contacts:e.contacts},on:{onaddContact:e.onaddContact}})],1),e._v(" "),n("div",{staticClass:"bd-highlight"},[n("b-icon",{staticClass:"m-2",staticStyle:{cursor:"pointer"},attrs:{"font-scale":"1",icon:"telephone","aria-hidden":"true",title:"Call"},on:{click:function(t){return e.$bvModal.show("modal-tall")}}})],1),e._v(" "),n("div",{staticClass:"bd-highlight"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-2",modifiers:{"modal-2":!0}}],staticClass:"m-2",staticStyle:{cursor:"pointer"},attrs:{"font-scale":"1",icon:"pencil-square","aria-hidden":"true",title:"Compose"}})],1)],1)]),e._v(" "),n("div",{staticClass:"icons mt-2"},[n("b-dropdown",{staticClass:"dropDown",attrs:{variant:"primary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("div",{staticClass:"d-flex flex-row align-items-center bd-highlight"},[e.activeProfile?n("div",{staticClass:"d-flex flex-column bd-highlight"},[n("div",{staticClass:"profileName"},[e._v(e._s(e.activeProfile.profile))]),e._v(" "),n("div",{staticClass:"profileNum"},[e._v(e._s(e.activeProfile.number))]),e._v(" "),e.activeProfile.totalCount>0?n("span",{staticClass:"position-absolute top-0 start-100 translate-middle badge border border-light rounded-circle bg-danger p-2"},[n("span",{staticClass:"visually-hidden"},[e._v("unread messages")])]):e._e()]):n("div",[e.userdata?n("span",[e._v(e._s(e.userdata.name))]):e._e()]),e._v(" "),n("div",[n("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"1",icon:"person-badge","aria-hidden":"true",title:"Profiles"}})],1),e._v(" "),n("div",{staticClass:"droupdownAdd"})])]},proxy:!0}])},[e._v(" "),n("b-dropdown-divider"),e._v(" "),n("profile-view",{ref:"childComponent",on:{clicked2:e.onClickChild2,clicked:e.onClickChild}}),e._v(" "),n("b-dropdown-item-button",{on:{click:function(t){return e.logout()}}},[n("b-icon",{attrs:{icon:"power","aria-hidden":"true"}}),e._v("\n            Logout\n          ")],1)],1)],1)])]),e._v(" "),n("div",{staticClass:"wrap-search"},[n("div",{staticClass:"search"},[n("i",{staticClass:"fa fa-search fa",attrs:{"aria-hidden":"true"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"input-search",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.query},on:{keyup:function(t){return e.searchContact()},input:function(t){t.target.composing||(e.query=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"contact-list"},[e.messageListLoader?n("div",{staticClass:"box-placeholder"},[e._m(1),e._v(" "),n("hr"),e._v(" "),e._m(2),e._v(" "),n("hr"),e._v(" "),e._m(3),e._v(" "),n("hr"),e._v(" "),e._m(4)]):e._e(),e._v(" "),e._l(e.search_numbers,function(t){return n("div",{key:t._id,staticClass:"contact",class:{activeChat:e.activeChat==t._id},attrs:{id:"phone"+t._id},on:{click:function(n){return e.firstChatShow(t)}}},[n("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"2",icon:"person-bounding-box","aria-hidden":"true"}}),e._v(" "),n("div",{staticClass:"d-flex justify-content-between",staticStyle:{width:"100%"}},[n("div",{staticClass:"contact-preview"},[n("div",{staticClass:"contact-text"},[t.contact?n("h1",{staticClass:"font-name"},[e._v(e._s(t.contact.first_name)+" "+e._s(t.contact.last_name))]):n("h1",{staticClass:"font-name"},[e._v(e._s(t._id))]),e._v(" "),t.message?n("p",{staticClass:"font-preview"},[e._v(e._s(e.getValidString(t.message)))]):n("p",{staticClass:"font-preview"},["call"==t.message_type?n("span",["send"==t.type?n("span",[e._v(" Outbound ")]):n("span",[e._v(" Inbound ")]),e._v("\n                Call\n              ")]):e._e()])])]),e._v(" "),n("div",{staticClass:"align-self-center text-end me-3"},[n("span",{staticClass:"time"},[e._v(e._s(e._f("moment")(t.created_at,"lll")))]),e._v(" "),t.isview>0?n("span",{staticClass:"badge message_count bg-success",attrs:{id:t._id}},[e._v(e._s(t.isview))]):e._e()])])],1)})],2),e._v(" "),n("b-modal",{ref:"my-modal",attrs:{id:"modal-1",size:"lg",title:"Settings","hide-footer":""}},[n("theme-button",{attrs:{"id-hide":"false"}}),e._v(" "),n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("b-form-radio-group",{attrs:{id:"btn-radios-2",options:e.options,"button-variant":"outline-primary",size:"lg",name:"radio-btn-outline",buttons:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),n("div",{staticClass:"card form-group mt-4"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row m-auto"},[n("div",{staticClass:"col-auto m-auto mb-1 mb-sm-auto"},[n("label",[n("b-icon",{attrs:{icon:"person-fill","aria-hidden":"true"}}),e._v("\n                Profile\n              ")],1)]),e._v(" "),n("div",{staticClass:"col-sm m-auto col-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.profile,expression:"user.profile"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.profile.$error},attrs:{type:"text",placeholder:"Alias/Name"},domProps:{value:e.user.profile},on:{input:function(t){t.target.composing||e.$set(e.user,"profile",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.profile.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.user.profile.required?e._e():n("span",[e._v("Profile is required")])]):e._e()]),e._v(" "),n("div",{staticClass:"col-1 m-auto"},[n("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"}},[n("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"},on:{click:function(t){return e.deleteProfile()}}})],1)])])])]),e._v(" "),"telnyx"==e.selected?n("div",{staticClass:"card form-group mt-4"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col-auto m-auto"},[n("label",[n("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),e._v(" "),n("b",[e._v("Telnyx")]),e._v(" API Key\n              ")],1)]),e._v(" "),n("div",{staticClass:"col-sm col-12 m-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.api_key,expression:"user.api_key"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.api_key.$error&&""==e.user.profile},attrs:{type:"text",placeholder:"Telnyx API Key"},domProps:{value:e.user.api_key},on:{input:function(t){t.target.composing||e.$set(e.user,"api_key",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.api_key.$error&&""==e.user.profile?n("div",{staticClass:"invalid-feedback"},[e.$v.user.api_key.required?e._e():n("span",[e._v("API Key is required")])]):e._e()])]),e._v(" "),n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col-auto m-auto"},[n("button",{staticClass:"dark-mode btn btn-secondary btn-sm",attrs:{type:"button",id:"get-number"},on:{click:function(t){return e.getNumbers("telnyx")}}},[n("b-icon",{attrs:{icon:"telephone-plus","aria-hidden":"true"}}),e._v("\n                Get Number\n              ")],1)]),e._v(" "),n("div",{staticClass:"col col-lg-6 m-auto"},[n("div",{staticClass:"form-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.user.number,expression:"user.number"}],class:{"is-invalid":e.submitted&&e.$v.user.number.$error&&""==e.user.profile},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.user,"number",t.target.multiple?n:n[0])}}},e._l(e.tNumbers,function(t){return n("option",{key:t.id,domProps:{value:t.phone_number}},[e._v("\n                    "+e._s(t.phone_number)+"\n                  ")])}),0),e._v(" "),e.submitted&&e.$v.user.number.$error&&""==e.user.profile?n("div",{staticClass:"invalid-feedback"},[e.$v.user.number.required?e._e():n("span",[e._v("Number is required")])]):e._e()])]),e._v(" "),n("div",{staticClass:"col-auto m-auto"},[e.showDelete?n("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(t){return e.deleteApiKey()}}},[n("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"}})],1):e._e()])])])]):e._e(),e._v(" "),"twilio"==e.selected?n("div",{staticClass:"card form-group mt-4"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col-auto col-lg-3 m-auto"},[n("label",[n("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),e._v(" "),n("b",[e._v("Twilio")]),e._v(" SID\n              ")],1)]),e._v(" "),n("div",{staticClass:"col-12 col-sm col-lg-9 m-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.twilio_sid,expression:"user.twilio_sid"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.twilio_sid.$error&&""==e.user.profile},attrs:{type:"text",placeholder:"Twilio SID"},domProps:{value:e.user.twilio_sid},on:{input:function(t){t.target.composing||e.$set(e.user,"twilio_sid",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.twilio_sid.$error&&""==e.user.profile?n("div",{staticClass:"invalid-feedback"},[e.$v.user.twilio_sid.required?e._e():n("span",[e._v("Twilio sid is required")])]):e._e()])]),e._v(" "),n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col-auto col-lg-3 m-auto"},[n("label",[n("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),e._v(" "),n("b",[e._v("Twilio")]),e._v(" Token\n              ")],1)]),e._v(" "),n("div",{staticClass:"col-12 col-sm col-lg-9 m-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.twilio_token,expression:"user.twilio_token"}],staticClass:"form-control ",class:{"is-invalid":e.submitted&&e.$v.user.twilio_token.$error&&""==e.user.profile},attrs:{type:"text",placeholder:"Twilio Token"},domProps:{value:e.user.twilio_token},on:{input:function(t){t.target.composing||e.$set(e.user,"twilio_token",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.twilio_token.$error&&""==e.user.profile?n("div",{staticClass:"invalid-feedback"},[e.$v.user.twilio_token.required?e._e():n("span",[e._v("Twilio token is required")])]):e._e()])]),e._v(" "),n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col-auto m-auto"},[n("button",{staticClass:"dark-mode btn btn-secondary btn-sm",attrs:{type:"button",id:"get-number-twilio"},on:{click:function(t){return e.getNumbers("twilio")}}},[n("b-icon",{attrs:{icon:"telephone-plus","aria-hidden":"true"}}),e._v("\n                Get Number\n              ")],1)]),e._v(" "),n("div",{staticClass:"col col-lg-6 m-auto"},[n("div",{staticClass:"form-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.user.twilio_number,expression:"user.twilio_number"}],class:{"is-invalid":e.submitted&&e.$v.user.twilio_number.$error&&""==e.user.profile},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.user,"twilio_number",t.target.multiple?n:n[0])}}},e._l(e.twilioNumbers,function(t){return n("option",{key:t.sid,domProps:{value:t.phoneNumber}},[e._v(e._s(t.phoneNumber))])}),0),e._v(" "),e.submitted&&e.$v.user.twilio_number.$error&&""==e.user.profile?n("div",{staticClass:"invalid-feedback"},[e.$v.user.twilio_number.required?e._e():n("span",[e._v("Number is required")])]):e._e()])]),e._v(" "),n("div",{staticClass:"col-auto m-auto"},[e.showDelete?n("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(t){return e.deleteApiKey()}}},[n("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"}})],1):e._e()])])])]):e._e(),e._v(" "),n("div",{staticClass:"d-grid d-md-flex"},[n("button",{staticClass:"btn btn-success mt-4",attrs:{type:"submit",id:"login-button"}},[e._v("Save")])])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex loader justify-content-center align-items-center"},[t("div",{staticClass:"sp sp-circle"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"p-4"},[t("span",{staticClass:"category text link"}),this._v(" "),t("h4",{staticClass:"text line"}),this._v(" "),t("h4",{staticClass:"text"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("div",{staticClass:"embed-responsive embed-responsive-16by9"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"excerpt p-4"},[t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"excerpt p-4"},[t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text"})])}]};var Pe=n("VU/8")(Te,Ie,!1,function(e){n("eIm2")},"data-v-556f7d32",null).exports,Re=n("vdhV"),De=n.n(Re),Oe=n("0Owv"),Be=(n("R870"),n("vBgO").Device),Me={props:["contacts"],data:function(){return{twilio_number:null,number:null,call_text:"test",connection:null,name:"",mm:"00",ss:"00",incoming:!1,callType:"",newCall:null,searchContacts:[],device:null,selectedContact:""}},mounted:function(){var e=this;return b()(A.a.mark(function t(){var n;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.formatecontact(e.contacts),u.$on("clicked",function(){}),t.next=4,e.getToken();case 4:n=t.sent,e.call_text="get token",e.deviceSetup(n);case 7:case"end":return t.stop()}},t,e)}))()},methods:{deviceSetup:function(e){var t=this,n=this;e&&("twilio"===e.type?(this.callType="twilio",Be.setup(e.token),Be.incoming(function(e){n.$refs.modalTall.show(),n.connection=e,n.number=e.options.callParameters.From,n.incoming=!0}),Be.connect(function(e){n.connection=e,n.startTimer(),n.getContact()}),Be.ready(function(){console.log("Connected"),t.call_text="Connected"}),Be.disconnect(function(e){console.log("Awaiting incoming call..."),t.call_text="Awaiting incoming call...",n.dissconnected()}),Be.cancel(function(e){n.dissconnected()}),Be.error(function(e){console.log("error"),console.log(e)})):"telnyx"===e.type&&e.setting.sip_username&&e.setting.sip_password&&(this.callType="telnyx",this.client=new Oe.a({login:e.setting.sip_username,password:e.setting.sip_password}),this.client.connect(),this.client.remoteElement="remoteMedia",this.client.on("telnyx.ready",function(){return console.log("ready to call")}).on("telnyx.error",function(){return console.log("error")}).on("telnyx.notification",function(e){var i=e.call;if("callUpdate"===e.type)switch(n.connection=i,i.state){case"ringing":n.$refs.modalTall.show(),n.number=i.options.remoteCallerNumber,n.incoming=!0;break;case"active":n.connection=i,n.startTimer(),n.getContact();break;case"hangup":t.name="",t.connection=null,t.incoming=!1,t.stopTimer();break;case"destroy":t.name="",t.connection=null,t.incoming=!1}})))},clickHandler:function(){this.getSetting()},getToken:function(){var e=this;return new g.a(function(t){var n=JSON.parse(localStorage.getItem("activeProfile"));if(n){var i={data:{setting_id:n._id},url:"call/token"};e.$store.dispatch(l.c,i).then(function(e){t(e.data)}).catch(function(e){console.log(e),t(!1)})}})},getContact:function(){var e=this,t={url:"contact/get-one",data:{number:this.number}};this.$store.dispatch(l.c,t).then(function(t){t&&t.data&&(e.name=t.data.first_name+" "+t.data.last_name)}).catch(function(e){console.log(e)})},getSetting:function(){var e,t=this,n=JSON.parse(localStorage.getItem("activeProfile"));if(n){var i={url:"setting/get-setting",data:{setting:n._id}};this.$store.dispatch(l.c,i).then((e=b()(A.a.mark(function e(n){var i;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data){e.next=8;break}return localStorage.setItem("activeProfile",a()(n.data)),t.distroyDevice(),t.distroyDeviceTelnyx(),e.next=6,t.getToken();case 6:i=e.sent,t.deviceSetup(i);case 8:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)})).catch(function(e){console.log(e)})}},makeCall:function(e){this.muted=!1,this.onPhone=!0,this.number=e;var t=e.replace(/\D/g,""),n=JSON.parse(localStorage.getItem("activeProfile"));"twilio"===this.callType?this.connection=Be.connect({number:t,twilio_number:n.number}):this.newCall=this.client.newCall({destinationNumber:t,callerNumber:n.number}),this.call_text="Calling "+t,this.$refs.modalTall.show()},acceptCall:function(){"twilio"===this.callType?this.connection.accept():this.connection.answer(),this.incoming=!1},rejectedCall:function(){"twilio"===this.callType?(this.connection&&this.connection.reject(),Be.disconnectAll()):this.dissconnected(),this.connection=null,this.incoming=!1},toggleCall:function(){this.muted=!1,this.onPhone=!0;var e=this.number.replace(/\D/g,""),t=JSON.parse(localStorage.getItem("activeProfile"));"twilio"===this.callType?this.connection=Be.connect({number:e,twilio_number:t.number}):this.newCall=this.client.newCall({destinationNumber:e,callerNumber:t.number}),this.call_text="Calling "+e},startTimer:function(){var e=0,t=this;this.userDuration=setInterval(function(){var n=parseInt(e/3600),i=parseInt(e/60),r=e%60;n=n<10?"0"+n:n,t.mm=i<10?"0"+i:i,t.ss=r<10?"0"+r:r,e++},1e3)},stopTimer:function(){this.mm="00",this.ss="00",clearInterval(this.userDuration)},dissconnected:function(){this.stopTimer(),"twilio"===this.callType?Be.disconnectAll():this.connection.hangup(),this.name="",this.incoming=!1,this.connection=null},callHangup:function(){this.dissconnected()},clickDailer:function(e){if(this.connection)console.log(e),"twilio"===this.callType?this.connection.sendDigits(e.toString()):this.connection.dtmf(e.toString());else if(this.number){var t=this.number;this.number=t.toString()+e.toString()}else this.number=e},removeNumber:function(){this.number=this.number.slice(0,-1)},contactChangeEvent:function(e){this.number=e.code.replace("+",""),this.selectedContact=""},distroyDevice:function(){try{Be.destroy()}catch(e){console.log(e)}},distroyDeviceTelnyx:function(){try{this.client.disconnect()}catch(e){}},formatecontact:function(e){for(var t=[],n=0;n<e.length;n++){var i={label:e[n].first_name+" "+e[n].last_name,code:e[n].number};t.push(i)}this.searchContacts=t}},watch:{contacts:function(e,t){this.formatecontact(e)}},beforeDestroy:function(){var e=JSON.parse(localStorage.getItem("activeProfile"));e&&("telnyx"===e.type&&this.distroyDeviceTelnyx(),"twilio"===e.type&&this.distroyDevice())}},Ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-tall",modifiers:{"modal-tall":!0}}],staticStyle:{display:"none"},attrs:{id:"incomingCallModel"}},[e._v("Launch demo modal")]),e._v(" "),n("b-modal",{ref:"modalTall",staticClass:"test-modal",attrs:{id:"modal-tall","hide-footer":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){var i=t.close;return[n("b-button",{class:{"d-none":e.connection},attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return i()}}},[e._v("\n          Close\n        ")])]}},{key:"default",fn:function(t){var i=t.hide;return[n("div",{staticClass:"d-flex justify-content-center"},[e.incoming?n("div",{staticStyle:{"max-width":"300px"}},[n("center",{staticClass:"mt-3 pt-3"},[n("div",{staticClass:"pt-4 pb-2"},[n("button",{staticClass:"btn btn-success m-1",attrs:{type:"button"}},[n("b-icon",{attrs:{icon:"person-fill","aria-hidden":"true"}})],1),e._v(" "),n("p",{staticClass:"font-weight-bold mt-2",staticStyle:{"font-size":"30px",color:"#787878","margin-bottom":"0"}},[e._v("\n                        "+e._s(e.name)+"\n                    ")]),e._v(" "),n("p",{staticClass:"font-weight-bold",staticStyle:{"font-size":"30px",color:"#787878"}},[e._v("\n                        "+e._s(e.number)+"\n                    ")])]),e._v(" "),n("h4",{staticClass:"mb-4"},[e._v("Incoming call")]),e._v(" "),n("button",{staticClass:"btn btn-success m-1",attrs:{type:"button"},on:{click:function(t){return e.acceptCall()}}},[n("b-icon",{attrs:{icon:"telephone-fill","aria-hidden":"true"}})],1),e._v(" "),n("button",{staticClass:"btn btn-danger m-1",attrs:{type:"button"},on:{click:function(t){return e.rejectedCall()}}},[n("b-icon",{attrs:{icon:"x-circle","aria-hidden":"true"}})],1)])],1):n("div",{staticStyle:{"max-width":"300px"}},[e.connection?n("div",[n("div",{staticClass:"dropdown float-right dropleft row m-0",staticStyle:{width:"100%"},attrs:{id:"call_number"}},[n("div",{staticClass:"dialer_bg multiCallData",staticStyle:{width:"100%"},attrs:{id:"data.call.sid"}},[n("div",{staticClass:"row dialer_bg p-2"},[n("div",{staticClass:"d-flex justify-content-center",staticStyle:{width:"100%"}},[n("span",{staticClass:"multiCallData_name"},[e._v(e._s(e.name))])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-center",staticStyle:{width:"100%"}},[n("span",{staticClass:"multiCallData_name"},[e._v(" "+e._s(e.number))])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-center",staticStyle:{width:"100%"}},[n("span",{staticClass:"timerContainer font-weight-bold mx-auto float-right mt-2",staticStyle:{"font-size":"45px",color:"#4d64bc"}},[n("span",{staticClass:"multiCallData_minute",attrs:{id:"data.call.sid"}},[e._v(e._s(e.mm))]),e._v(":"),n("span",{staticClass:"multiCallData_second",attrs:{id:" data.call.sid"}},[e._v(e._s(e.ss))])])])]),e._v(" "),n("div",{staticClass:"p-1 mt-1"},[n("button",{staticClass:"btn btn-danger multiCallData_hangup w-100",staticStyle:{width:"100%","font-size":"30px"},attrs:{"data-id":' number + "',"data-sid":'data.call.sid+"',"data-type":'callType+"'},on:{click:function(t){return e.callHangup()}}},[e._v("Hangup")])])])])]):n("div",[n("v-select",{staticClass:"mb-2",attrs:{options:e.searchContacts},on:{"option:selected":function(t){return e.contactChangeEvent(t)}},model:{value:e.selectedContact,callback:function(t){e.selectedContact=t},expression:"selectedContact"}}),e._v(" "),n("b-form-group",{staticStyle:{"margin-bottom":"0"},attrs:{id:"input-group-1"}},[n("b-form-input",{staticClass:"chat-input",attrs:{id:"dailer_number",type:"number",required:""},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}})],1)],1),e._v(" "),n("div",[n("div",{staticClass:"d-flex justify-content-between mt-4"},[n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(1)}}},[n("p",{staticClass:"number font-weight-bolder mb-0"},[e._v("1")]),e._v(" "),n("p",{staticClass:"alpha hide"})])]),e._v(" "),n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(2)}}},[n("p",{staticClass:"number font-weight-bolder mb-0"},[e._v("2")]),e._v(" "),n("p",{staticClass:"alpha"},[e._v("abc")])])]),e._v(" "),n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(3)}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("3")]),e._v(" "),n("p",{staticClass:"alpha"},[e._v("def")])])])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(4)}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("4")]),e._v(" "),n("p",{staticClass:"alpha"},[e._v("ghi")])])]),e._v(" "),n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(5)}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("5")]),e._v(" "),n("p",{staticClass:"alpha"},[e._v("jkl")])])]),e._v(" "),n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(6)}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("6")]),e._v(" "),n("p",{staticClass:"alpha"},[e._v("mno")])])])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(7)}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("7")]),e._v(" "),n("p",{staticClass:"alpha"},[e._v("pqrs")])])]),e._v(" "),n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(8)}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("8")]),e._v(" "),n("p",{staticClass:"alpha"},[e._v("tuv")])])]),e._v(" "),n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(9)}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("9")]),e._v(" "),n("p",{staticClass:"alpha"},[e._v("wxyz")])])])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2"},[n("p",{staticClass:"number font-weight-bolder",on:{click:function(t){return e.clickDailer("*")}}},[e._v("*")])])]),e._v(" "),n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer(0)}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("0")])])]),e._v(" "),n("div",[n("a",{staticClass:"btn btn-light-primary dialer-btn2",on:{click:function(t){return e.clickDailer("#")}}},[n("p",{staticClass:"number font-weight-bolder"},[e._v("#")])])])])]),e._v(" "),e.connection?e._e():n("div",{staticClass:"dialer-container single_header"},[n("ul",{staticClass:"dialer-pad"},[n("center",{staticClass:"mt-4"},[n("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-success m-1 px-5",attrs:{type:"button",title:"Call"},on:{click:function(t){return e.toggleCall()}}},[n("b-icon",{attrs:{icon:"telephone-outbound","aria-hidden":"true"}})],1),e._v(" "),n("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-danger m-1 px-5",attrs:{type:"button",title:"Delete"},on:{click:function(t){return e.removeNumber()}}},[n("b-icon",{attrs:{icon:"backspace","aria-hidden":"true"}})],1)])],1)])])]),e._v(" "),n("b-button",{staticStyle:{display:"none"},on:{click:function(e){return i()}}},[e._v("Hide Modal")])]}}])}),e._v(" "),n("audio",{attrs:{id:"remoteMedia",autoplay:"true"}})],1)},staticRenderFns:[]};var Le=n("VU/8")(Me,Ne,!1,function(e){n("/6PD")},"data-v-bf1b05c0",null).exports,Fe={mounted:function(){this.checkDirectoryName()},methods:{checkDirectoryName:function(){var e=this,t={url:"auth/check-directoryname",data:{dirname:this.$route.params.appdirectory}};this.$store.dispatch(l.c,t).then(function(t){console.log("get dir"),console.log(t),"nodir"===t.data.status||"no-name"===t.data.status?e.$router.push("/voip/dashboard"):"false"===t.data.status&&e.$router.push("/404")}).catch(function(t){e.old_version=!1,console.log(t)})}}},je={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},$e=n("VU/8")(Fe,je,!1,null,null,null).exports,Ue=n("x6bz"),qe={name:"dashboard",components:{NumberList:Pe,VueTagsInput:De.a,ThemeButton:c.a,Setting:xe,CallView:Le,CheckDir:$e},data:function(){return{isLoading:!1,fullPage:!0,contacts:[],selectedContact:"",dropArea:null,progressBar:null,filesDone:0,filesToDo:0,uploadProgress:[],uploadedImages:[],activeChatData:!1,activeProfile:null,activeChat:"",msg:"Welcome to dashboard",tags:[],sms:{numbers:"",message:""},setting:{},chatListLoader:!1,submitted2:!1,userdata:null,access_token:null,headers:null,messages:[],messageBody:"",socket:null,baseurl:"",vw:0,vh:0,modelMms:!1,modelFileValu:"",zoomImage:"",searchContacts:[],activeCallTab:!1}},created:function(){window.addEventListener("resize",this.updateVw,{passive:!0})},destroyed:function(){window.removeEventListener("resize",this.updateVw,{passive:!0})},mounted:function(){var e=this;u.$on("toggleLoader",function(){e.toggleLoader()}),u.$on("contactAdded",function(t){e.activeChat._id===t&&e.showChat(e.activeChat)}),u.$on("changeProfile2",function(){e.activeChat=null,e.activeCallTab=!1,setTimeout(function(){e.activeCallTab=!0},1500)}),u.$on("changeProfile",function(){e.activeChat=null,e.activeCallTab=!1,setTimeout(function(){e.activeCallTab=!0},1500)}),this.$cookie.get("access_token")||this.$router.push("/"),this.updateVw(),"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000");var t=Ue(this.baseurl,{transports:["websocket"]});this.socket=t;var n=this;this.socket.on("new_message",function(e){n.getNumberList(),n.activeChatData&&n.showChat(n.activeChat)}),this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.socket.emit("join_profile_channel",this.userdata._id.toString()),this.socket.on("user_message",function(e){n.activeChatData?n.showChat(n.activeChat):(n.$refs.numberList.getOneProfile(),n.$refs.numberList.refreshProfile()),n.$refs.numberList.getNumberList(),n.notifyMe(e.number,e.message)}),this.headers={headers:{token:this.access_token}},this.dropArea=document.getElementById("drop-area1"),["dragenter","dragover","dragleave","drop"].forEach(function(t){e.dropArea.addEventListener(t,e.preventDefaults,!1)}),["dragenter","dragover"].forEach(function(t){e.dropArea.addEventListener(t,e.highlight,!1)}),["dragleave","drop"].forEach(function(t){e.dropArea.addEventListener(t,e.unhighlight,!1)}),this.dropArea.addEventListener("drop",this.handleDrop,!1),this.progressBar=document.getElementById("progress-bar")},validations:{sms:{numbers:{required:o.required},message:{required:o.required}}},methods:{addContact:function(e){u.$emit("addContact",e)},toggleLoader:function(){this.isLoading?this.isLoading=!1:this.isLoading=!0},makeCall:function(){this.activeChat&&this.$refs.callView.makeCall(this.activeChat._id)},messageRefresh:function(){this.messages=[]},contactChangeEvent:function(e){var t={text:e.code,tiClasses:["ti-valid"]};this.tags.push(t),this.selectedContact=""},onaddContact:function(e){this.contacts=e,this.formatecontact(e)},formatecontact:function(e){for(var t=[],n=0;n<e.length;n++){var i={label:e[n].first_name+" "+e[n].last_name,code:e[n].number};t.push(i)}this.searchContacts=t},hiddenImage:function(){this.zoomImage="",document.getElementById("hidden").style.display="none"},showImage:function(e){this.zoomImage=e,document.getElementById("hidden").style.display="block"},choseFile2:function(){document.getElementById("model_file_input").click()},file_upload:function(){document.getElementById("fileElem").click()},initializeProgress:function(e){this.progressBar.value=0,this.uploadProgress=[];for(var t=this.numFiles;t>0;t--)this.uploadProgress.push(0)},updateProgress:function(e,t){this.uploadProgress[e]=t;var n=this.uploadProgress.reduce(function(e,t){return e+t},0)/this.uploadProgress.length;this.progressBar.value=n},progressDone:function(){this.filesDone++,this.progressBar.value=this.filesDone/this.filesToDo*100},handleDrop:function(e){var t=e.dataTransfer.files;this.handleFiles(t)},handleFiles:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){this.modelMms=!0;for(var t=[],n=0;n<e.length;n++)t.push(e[n].name);this.modelFileValu=t.join()}else this.modelMms=!1;e=[].concat(r()(e)),this.initializeProgress(e.length),e.forEach(this.uploadFile)},previewFile:function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=document.createElement("img");e.style.width="150px",e.src=t.result,document.getElementById("gallery").appendChild(e)}},removeFromPrevie:function(e){for(var t=[],n=0;n<this.uploadedImages.length;n++)this.uploadedImages[n]!==e&&t.push(this.uploadedImages[n]);this.uploadedImages=t,this.uploadedImages.length<=0&&(document.getElementById("drop-area").style.display="none")},uploadFile:function(e,t){var n=this.baseurl+"/api/media/upload-files",i=new XMLHttpRequest,r=new FormData;i.open("POST",n,!0),i.setRequestHeader("token",this.access_token);var o=this;i.upload.addEventListener("progress",function(e){o.updateProgress(t,100*e.loaded/e.total||100)}),i.addEventListener("readystatechange",function(e){if(4===i.readyState&&200===i.status){var t=JSON.parse(i.responseText);o.uploadedImages.push(""+t.data.media)}else 4===i.readyState&&i.status}),r.append("file",e),i.send(r)},highlight:function(e){document.getElementById("drop-area").style.display="block",this.dropArea.classList.add("highlight")},unhighlight:function(e){this.dropArea.classList.remove("highlight")},preventDefaults:function(e){e.preventDefault(),e.stopPropagation()},activeProfileView:function(e){void 0!==e.refresh&&e.refresh&&(this.messages=[]),this.activeProfile=e},onClickChild:function(e){this.firstChatShow(e)},notifyMe:function(e,t){var i=n("edSy");if("Notification"in window)if("granted"===Notification.permission){new Notification("Message from "+e,{body:t,dir:"auto",icon:i})}else"denied"!==Notification.permission&&Notification.requestPermission(function(n){("permission"in Notification||(Notification.permission=n),"granted"===n)&&new Notification("Message from "+e,{body:t,dir:"auto",icon:i})});else alert("This browser does not support desktop notification")},deletechat:function(){var e=this;this.$swal.fire({icon:"info",title:"Do you want to delete this chat?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(t){if(t.isConfirmed){var n={data:{user:e.userdata._id,number:e.activeChat},url:"setting/message-list-delete"};e.$store.dispatch(l.c,n).then(function(t){e.activeChatData&&e.showChat(e.activeChat),e.$refs.numberList.getNumberList()}).catch(function(e){console.log(e)})}else t.isDenied&&e.$swal.fire("chat not deleted","","info")})},sendSms:function(){if(this.isLoading=!0,""===this.messageBody.trim()&&0===this.uploadedImages.length)return this.$swal({icon:"error",title:"Oops...",text:"Message or file required"}),void(this.isLoading=!1);var e=[JSON.parse(localStorage.getItem("activenumber"))._id];this.commonSendMessage(e,this.messageBody)},hideImageDrag:function(){this.uploadedImages=[],document.getElementById("drop-area").style.display="none"},commonSendMessage:function(e,t){var n=this,i={data:{user:this.userdata._id,numbers:e,message:t,profile:this.activeProfile,media:this.uploadedImages},url:"setting/send-sms"};this.$store.dispatch(l.c,i).then(function(e){e&&(n.messageBody="",n.sms.numbers="",n.sms.message="",n.uploadedImages=[],n.modelFileValu="",document.getElementById("drop-area").style.display="none",n.tags=[],n.$refs.numberList.getNumberList(),n.activeChatData&&n.showChat(n.activeChat),n.$refs["my-modal2"].hide(),n.vw<576&&n.$refs.mySidebar2.hide()),n.isLoading=!1}).catch(function(e){console.log(e)})},firstChatShow:function(e){this.chatListLoader=!0;var t=document.getElementById(e._id);t&&t.remove(),this.showChat(e),document.getElementById("drop-area").style.display="none",this.uploadedImages=[],this.vw<576&&this.$refs.mySidebar2.hide()},showChat:function(e){var t=this;this.activeChat=e,this.activeChatData=!0;var n={data:{user:this.userdata._id,number:e,profile:this.activeProfile},url:"setting/message-list"};this.$store.dispatch(l.c,n).then(function(e){e&&(t.messages=e,setTimeout(function(){var e=document.getElementById("chat-container");e.scrollTop=e.scrollHeight,e.animate({scrollTop:e.scrollHeight}),t.chatListLoader=!1},1e3),t.$refs.numberList.refreshProfile(),t.$refs.numberList.getOneProfile())}).catch(function(e){console.log(e)})},handleSubmit2:function(e){if(this.submitted2=!0,this.$v.$touch(),this.isLoading=!0,this.tags.length<=0)this.$swal({icon:"error",title:"Oops...",text:"please enter number!"});else{for(var t=[],n=0;n<this.tags.length;n++)t.push(this.tags[n].text);!this.$v.sms.message.$error||this.uploadedImages.length>0?this.commonSendMessage(t,this.sms.message):(this.$swal({icon:"error",title:"Oops...",text:"Message or file required!"}),this.isLoading=!1)}},updateVw:function(){this.vw=this.getVw(),this.vh=this.getVh();var e=this.vh-120;document.getElementById("wrapbody").style.height=this.vh+"px",document.getElementById("chat_body").style.height=e+"px"},getVw:function(){return Math.round(Math.max(document.documentElement.clientWidth||0,window.innerWidth||0))},getVh:function(){return Math.round(Math.max(document.documentElement.innerHeight||0,window.innerHeight||0))},getMMSS:function(e){var t=~~e%60,n="";return n+=~~(e%3600/60)+":"+(t<10?"0":""),n+=""+t}}},Ve={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap",attrs:{id:"wrapbody"}},[n("check-dir"),e._v(" "),e.activeCallTab?n("call-view",{ref:"callView",attrs:{contacts:e.contacts}}):e._e(),e._v(" "),e.isLoading?n("div",{attrs:{id:"loader"}},[e._m(0)]):e._e(),e._v(" "),n("theme-button",{attrs:{"id-hide":"true"}}),e._v(" "),e.vw<576?n("b-sidebar",{ref:"mySidebar2",staticClass:"d-sm-none",attrs:{id:"sidebar-no-header","aria-labelledby":"sidebar-no-header-title","no-header":"",shadow:"",backdrop:"",visible:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hide;return[n("div",{staticClass:"d-flex flex-row-reverse bd-highlight"},[n("div",{staticClass:"bd-highlight dropDown"},[n("b-button",{staticClass:"float-right d-flex",attrs:{size:"sm",variant:"primary"}},[n("b-icon",{attrs:{icon:"x",scale:"1"},on:{click:i}})],1)],1)]),e._v(" "),n("number-list",{ref:"numberList",on:{onaddContact:e.onaddContact,activeChat:e.activeProfileView,clicked:e.onClickChild}})]}}],null,!1,2507129991)}):e._e(),e._v(" "),n("section",{staticClass:"col-auto col-md-4 d-none d-sm-block"},[e.vw>=576?n("number-list",{ref:"numberList",on:{onaddContact:e.onaddContact,activeChat:e.activeProfileView,clicked:e.onClickChild}}):e._e()],1),e._v(" "),n("section",{staticClass:"col col-md-8 pb-2",attrs:{id:"drop-area1"}},[n("div",{staticClass:"chat-head"},[n("b-icon",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-no-header",modifiers:{"sidebar-no-header":!0}}],staticClass:"mx-3 my-auto d-sm-none h2",attrs:{"font-scale":"2",icon:"chevron-left","aria-hidden":"true"}}),e._v(" "),n("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"2",icon:"person-bounding-box","aria-hidden":"true"}}),e._v(" "),n("div",{staticClass:"chat-name"},[e.activeChat?n("h1",{staticClass:"font-name"},[e.activeChat.contact?n("div",{staticClass:"d-flex align-items-start align-self-center"},[n("div",{staticClass:"mt-2 ml-4"},[e._v(e._s(e.activeChat.contact.first_name)+" "+e._s(e.activeChat.contact.last_name))])]):e._e(),e._v(" "),n("div",{staticClass:"d-flex align-items-start align-self-center"},[n("div",{staticClass:"mt-2 ml-4"},[e._v(e._s(e.activeChat._id))]),e._v("\n               \n            "),e.activeChat.contact?e._e():n("span",{staticStyle:{cursor:"copy"},attrs:{title:"Add Contact"},on:{click:function(t){return e.addContact(e.activeChat._id)}}},[n("b-icon",{attrs:{"font-scale":"1.5",icon:"plus-circle","aria-hidden":"true"}})],1)])]):e._e()]),e._v(" "),e.activeChat?n("div",{staticClass:"d-flex m-auto"},[n("span",{staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(t){return e.makeCall()}}},[n("b-icon",{attrs:{"font-scale":"2",icon:"telephone","aria-hidden":"true"}})],1),e._v("\n           \n        "),n("span",{staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(t){return e.deletechat()}}},[n("b-icon",{attrs:{"font-scale":"2",icon:"trash","aria-hidden":"true"}})],1)]):e._e()],1),e._v(" "),n("div",{class:!this.activeChat||e.modelMms?"d-none":""},[n("div",{class:e.uploadedImages.length>0?"activeImageArea":"inactive",staticStyle:{"z-index":"1"},attrs:{id:"drop-area"}},[n("form",{staticClass:"my-form"},[n("p",[e._v("Upload multiple files by dragging and dropping images inside this box")]),e._v(" "),n("div",{staticClass:"text-center m-auto"},[n("button",{staticClass:"btn btn-danger px-4",attrs:{type:"button"},on:{click:function(t){return e.hideImageDrag()}}},[e._v("Cancel")])]),e._v(" "),n("input",{attrs:{type:"file",id:"fileElem",multiple:"",accept:"image/*"},on:{change:function(t){return e.handleFiles(t.target.files)}}})]),e._v(" "),n("div",{staticClass:"row",attrs:{id:"gallery"}},e._l(e.uploadedImages,function(t){return n("div",{key:t,staticClass:"col-lg-4"},[n("img",{staticStyle:{width:"150px"},attrs:{src:t}}),e._v(" "),n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(n){return e.removeFromPrevie(t)}}},[n("span",{staticClass:"start-100 translate-middle badge border border-light rounded-circle bg-danger"},[e._v("X")])])])}),0),e._v(" "),n("progress",{staticStyle:{display:"none"},attrs:{id:"progress-bar",max:"100",value:"0"}})])]),e._v(" "),n("div",{staticClass:"wrap-chat",attrs:{id:"chat_body"}},[e.chatListLoader?n("div",{staticClass:"loading-bar"},[n("div",{staticClass:"blue-bar"})]):e._e(),e._v(" "),n("div",{staticClass:"chat",class:{opacitynone:e.chatListLoader},attrs:{id:"chat-container"}},[e.activeChatData?n("div",e._l(e.messages,function(t){return n("div",{key:t._id},[n("div",{staticClass:"chat-bubble",class:{me:"send"==t.type,you:"receive"==t.type}},[n("div",{class:{"my-mouth":"send"==t.type,"your-mouth":"receive"==t.type}}),e._v(" "),n("div",{staticClass:"content"},[t.media&&JSON.parse(t.media)&&JSON.parse(t.media).length>0?n("span",e._l(JSON.parse(t.media),function(t){return n("span",{key:t},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(n){return e.showImage(t)}}},[n("img",{attrs:{src:t,alt:"Image"}})])])}),0):e._e(),e._v(" "),"call"===t.datatype?n("span",["send"===t.type?n("span",[n("b-icon",{attrs:{icon:"telephone-outbound-fill"}}),e._v("   Outbound")],1):n("span",[n("b-icon",{attrs:{icon:"telephone-inbound-fill"}}),e._v("   Inbound")],1),e._v("\n                  Call( "+e._s(e.getMMSS(t.duration))+" )\n                ")]):n("span",[e._v(" "+e._s(t.message)+" ")])]),e._v(" "),n("div",{staticClass:"time"},[e._v("\n                "+e._s(e._f("moment")(t.created_at,"LLL"))+"  ")])])])}),0):e._e()])]),e._v(" "),n("div",{staticClass:"row wrap-container"},[n("div",{staticClass:"col-md-12 wrap-container2"},[e.activeChatData?n("div",{staticClass:"wrap-message"},[n("div",{staticClass:"message pl-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.messageBody,expression:"messageBody"}],staticClass:"input-message",attrs:{type:"text",placeholder:"Type message here"},domProps:{value:e.messageBody},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendSms.apply(null,arguments)},input:function(t){t.target.composing||(e.messageBody=t.target.value)}}}),e._v(" "),n("a",{staticClass:"m-2",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.file_upload()}}},[n("b-icon",{attrs:{icon:"paperclip",scale:"2"}})],1)]),e._v(" "),n("div",{staticClass:"btn btn-primary m-2",staticStyle:{height:"36px"},on:{click:function(t){return e.sendSms()}}},[n("b-icon",{attrs:{icon:"arrow-right-circle-fill","aria-hidden":"true"}})],1)]):e._e()])])]),e._v(" "),n("b-modal",{ref:"my-modal2",attrs:{id:"modal-2",size:"lg",title:"Compose Message","hide-footer":""}},[n("span",{staticClass:"small text-secondary"},[e._v("Input (+) and country code followed by the 10 digit phone number. If no country code is provided (+1) is assumed. Multiple numbers will be sent as Bulk SMS (individual sms's to recipients). "),n("span",{staticClass:"small text-center"},[e._v("[Telnyx does not support group texting]")])]),e._v(" "),n("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit2.apply(null,arguments)}}},[n("v-select",{staticClass:"mt-4",attrs:{options:e.searchContacts},on:{"option:selected":function(t){return e.contactChangeEvent(t)}},model:{value:e.selectedContact,callback:function(t){e.selectedContact=t},expression:"selectedContact"}}),e._v(" "),n("div",{staticClass:"form-group mt-4"},[n("vue-tags-input",{staticClass:"form-control chat-input",attrs:{tags:e.tags,placeholder:"Enter phone number"},on:{"tags-changed":function(t){return e.tags=t}},model:{value:e.sms.numbers,callback:function(t){e.$set(e.sms,"numbers",t)},expression:"sms.numbers"}}),e._v(" "),e.tags.length<=0?n("div",{staticClass:"invalid-feedback"},[n("span",[e._v("Numbers are required")])]):e._e()],1),e._v(" "),n("div",{staticClass:"form-group mb-2 mt-4"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sms.message,expression:"sms.message"}],staticClass:"form-control chat-input",class:{"is-invalid":e.submitted2&&e.$v.sms.message.$error},attrs:{rows:"8",placeholder:"Type Message here"},domProps:{value:e.sms.message},on:{input:function(t){t.target.composing||e.$set(e.sms,"message",t.target.value)}}}),e._v(" "),e.submitted2&&e.$v.sms.message.$error?n("div",{staticClass:"invalid-feedback"},[e.$v.sms.message.required?e._e():n("span",[e._v("Message is required")])]):e._e()]),e._v(" "),n("div",{staticClass:"input-group mb-3"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text paperClip chat-input",attrs:{id:"basic-addon1"},on:{click:function(t){return e.choseFile2()}}},[n("b-icon",{attrs:{icon:"paperclip"}})],1)]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelFileValu,expression:"modelFileValu"}],staticClass:"form-control chat-input",attrs:{type:"text",placeholder:"Choose file","aria-label":"Username",readonly:"","aria-describedby":"basic-addon1"},domProps:{value:e.modelFileValu},on:{click:function(t){return e.choseFile2()},input:function(t){t.target.composing||(e.modelFileValu=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group mb-2 mt-4 d-none"},[n("input",{staticClass:"form-control chat-input",attrs:{type:"file",id:"model_file_input",multiple:"",accept:"image/*"},on:{change:function(t){return e.handleFiles(t.target.files,!0)}}})]),e._v(" "),n("div",{staticClass:"d-grid d-md-flex"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit",id:"login-button"}},[e._v("Send Message")])])],1)]),e._v(" "),n("div",{attrs:{id:"hidden"},on:{click:function(t){return e.hiddenImage()}}},[n("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{height:"100vh",width:"100vw"}},[n("img",{staticClass:"img-fluid",attrs:{alt:"Responsive image",src:e.zoomImage}})])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex loader justify-content-center align-items-center"},[t("div",{staticClass:"sp sp-circle"})])}]};var ze=n("VU/8")(qe,Ve,!1,function(e){n("a46f")},"data-v-de01eef2",null);t.default=ze.exports},"TUo+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const i=n("pnVU"),r=n("cM4V"),o=n("t4n9"),s=n("Fy0/")("socket.io-parser");var a;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=t.PacketType||(t.PacketType={}));t.Encoder=class{encode(e){return s("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!o.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),s("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=r.deconstructPacket(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}};class c extends i{constructor(){super()}add(e){let t;if("string"==typeof e)(t=this.decodeString(e)).type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new l(t),0===t.attachments&&super.emit("decoded",t)):super.emit("decoded",t);else{if(!o.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emit("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!c.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return s("decoded %s as %j",e,n),n}static isPayloadValid(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=c;class l{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},VAe1:function(e,t,n){"use strict";(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n("D+HT"),o=n("o8cY").default,s=n("fTPN"),a=s.setCodecPreferences,c=s.setMaxAverageBitrate,l=n("SBlr");function u(){"undefined"!=typeof window?l.isLegacyEdge()?this.RTCPeerConnection=new r("undefined"!=typeof window?window:t):"function"==typeof window.RTCPeerConnection?this.RTCPeerConnection=window.RTCPeerConnection:"function"==typeof window.webkitRTCPeerConnection?this.RTCPeerConnection=webkitRTCPeerConnection:"function"==typeof window.mozRTCPeerConnection?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available"):this.log.info("No RTCPeerConnection implementation available. The window object was not found.")}function d(e,t,n){return function(){var i=Array.prototype.slice.call(arguments);return new Promise(function(n){n(e.apply(t,i))}).catch(function(){return new Promise(function(r,o){e.apply(t,n?[r,o].concat(i):i.concat([r,o]))})})}}function p(e,t){return d(e,t,!0)}function f(e,t){return d(e,t,!1)}u.prototype.create=function(e,t){this.log=o.getInstance(),this.pc=new this.RTCPeerConnection(t,e)},u.prototype.createModernConstraints=function(e){if(void 0===e)return null;var t=Object.assign({},e);return"undefined"==typeof webkitRTCPeerConnection||l.isLegacyEdge()?(void 0!==e.audio&&(t.offerToReceiveAudio=e.audio),void 0!==e.video&&(t.offerToReceiveVideo=e.video)):(t.mandatory={},void 0!==e.audio&&(t.mandatory.OfferToReceiveAudio=e.audio),void 0!==e.video&&(t.mandatory.OfferToReceiveVideo=e.video)),delete t.audio,delete t.video,t},u.prototype.createOffer=function(e,t,n,i,r){var o=this;return n=this.createModernConstraints(n),p(this.pc.createOffer,this.pc)(n).then(function(n){if(!o.pc)return Promise.resolve();var i=c(n.sdp,e);return f(o.pc.setLocalDescription,o.pc)(new RTCSessionDescription({type:"offer",sdp:a(i,t)}))}).then(i,r)},u.prototype.createAnswer=function(e,t,n,i,r){var o=this;return n=this.createModernConstraints(n),p(this.pc.createAnswer,this.pc)(n).then(function(n){if(!o.pc)return Promise.resolve();var i=c(n.sdp,e);return f(o.pc.setLocalDescription,o.pc)(new RTCSessionDescription({type:"answer",sdp:a(i,t)}))}).then(i,r)},u.prototype.processSDP=function(e,t,n,i,r,o){var s=this;n=a(n,t);var c=new RTCSessionDescription({sdp:n,type:"offer"});return f(this.pc.setRemoteDescription,this.pc)(c).then(function(){s.createAnswer(e,t,i,r,o)})},u.prototype.getSDP=function(){return this.pc.localDescription.sdp},u.prototype.processAnswer=function(e,t,n,i){return this.pc?(t=a(t,e),f(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:t,type:"answer"})).then(n,i)):Promise.resolve()},u.test=function(){if("object"===("undefined"==typeof navigator?"undefined":i(navigator))){var e=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(l.isLegacyEdge(navigator))return!1;if(e&&"function"==typeof window.RTCPeerConnection)return!0;if(e&&"function"==typeof window.webkitRTCPeerConnection)return!0;if(e&&"function"==typeof window.mozRTCPeerConnection){try{if("function"!=typeof(new window.mozRTCPeerConnection).getLocalStreams)return!1}catch(e){return!1}return!0}if("undefined"!=typeof RTCIceGatherer)return!0}return!1},e.exports=u}).call(t,n("DuR2"))},VRsY:function(e,t,n){var i=n("OMJi");function r(e){Error.call(this,e),this.message=e}function o(e){Error.call(this,e),this.message=e}i.inherits(r,Error),r.prototype.name="IllegalArgumentError",i.inherits(o,Error),o.prototype.name="IllegalStateError",e.exports.IllegalStateError=o,e.exports.IllegalArgumentError=r},"Vaj/":function(e,t){},VedT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},Wodx:function(e,t,n){"use strict";var i,r,o,s,a,c,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function u(e,t,n){"string"==typeof t?(e.message=t,n instanceof Error&&(e.originalError=n)):t instanceof Error&&(e.originalError=t)}Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=[],r.code=20101,r.description="Invalid access token",r.explanation="Twilio was unable to validate your Access Token",r.solutions=[],Object.setPrototypeOf(r,e.AccessTokenInvalid.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.AccessTokenInvalid=t;var n=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=[],r.code=20104,r.description="Access token expired or expiration date invalid",r.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",r.solutions=[],Object.setPrototypeOf(r,e.AccessTokenExpired.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.AccessTokenExpired=n;var i=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=[],r.code=20151,r.description="Authentication Failed",r.explanation="The Authentication with the provided JWT failed",r.solutions=[],Object.setPrototypeOf(r,e.AuthenticationFailed.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.AuthenticationFailed=i}(r=t.AuthorizationErrors||(t.AuthorizationErrors={})),function(e){var t=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=[],r.code=31400,r.description="Bad Request (HTTP/SIP)",r.explanation="The request could not be understood due to malformed syntax.",r.solutions=[],Object.setPrototypeOf(r,e.BadRequest.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.BadRequest=t}(o=t.ClientErrors||(t.ClientErrors={})),function(e){var t=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=[],r.code=31e3,r.description="Unknown Error",r.explanation="An unknown error has occurred. See error details for more information.",r.solutions=[],Object.setPrototypeOf(r,e.UnknownError.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.UnknownError=t;var n=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=[],r.code=31005,r.description="Connection error",r.explanation="A connection error occurred during the call",r.solutions=[],Object.setPrototypeOf(r,e.ConnectionError.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.ConnectionError=n;var i=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=[],r.code=31009,r.description="Transport error",r.explanation="No transport available to send or receive messages",r.solutions=[],Object.setPrototypeOf(r,e.TransportError.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.TransportError=i}(s=t.GeneralErrors||(t.GeneralErrors={})),function(e){var t=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=[],r.code=53e3,r.description="Signaling connection error",r.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",r.solutions=[],Object.setPrototypeOf(r,e.ConnectionError.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.ConnectionError=t;var n=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=["The device running your application lost its Internet connection."],r.code=53001,r.description="Signaling connection disconnected",r.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",r.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(r,e.ConnectionDisconnected.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.ConnectionDisconnected=n}(a=t.SignalingErrors||(t.SignalingErrors={})),function(e){var t=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],r.code=53400,r.description="Client is unable to create or apply a local media description",r.explanation="Raised whenever a Client is unable to create or apply a local media description.",r.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(r,e.ClientLocalDescFailed.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.ClientLocalDescFailed=t;var n=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],r.code=53402,r.description="Client is unable to apply a remote media description",r.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",r.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(r,e.ClientRemoteDescFailed.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.ClientRemoteDescFailed=n;var i=function(t){function n(n,i){var r=t.call(this,"")||this;return r.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],r.code=53405,r.description="Media connection failed",r.explanation="Raised by the Client or Server whenever a media connection fails.",r.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(r,e.ConnectionError.prototype),u(r,n,i),r}return l(n,t),n}(Error);e.ConnectionError=i}(c=t.MediaErrors||(t.MediaErrors={})),t.errorsByCode=new Map([[20101,r.AccessTokenInvalid],[20104,r.AccessTokenExpired],[20151,r.AuthenticationFailed],[31400,o.BadRequest],[31e3,s.UnknownError],[31005,s.ConnectionError],[31009,s.TransportError],[53e3,a.ConnectionError],[53001,a.ConnectionDisconnected],[53400,c.ClientLocalDescFailed],[53402,c.ClientRemoteDescFailed],[53405,c.ConnectionError]]),Object.freeze(t.errorsByCode)},Xc4G:function(e,t,n){var i=n("lktj"),r=n("1kS7"),o=n("NpIQ");e.exports=function(e){var t=i(e),n=r.f;if(n)for(var s,a=n(e),c=o.f,l=0;a.length>l;)c.call(e,s=a[l++])&&t.push(s);return t}},Xqxu:function(e,t,n){const i=n("Y+et"),r=n("pnVU"),o=n("Fy0/")("engine.io-client:socket"),s=n("qFti"),a=n("fOB9"),c=n("gVZZ"),{installTimerFunctions:l}=n("7mji");class u extends r{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),l(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=c.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=(()=>{this.onClose("transport close")}),addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){o('creating transport "%s"',e);const t=function(e){const t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=s.protocol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return o("options: %j",n),new i[e](n)}open(){let e;if(this.opts.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emit("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return o("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){o("setting transport %s",e.name),this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){o('probing transport "%s"',e);let t=this.createTransport(e,{probe:1}),n=!1;u.priorWebsocketSuccess=!1;const i=()=>{n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",i=>{if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',e),this.upgrading=!0,this.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||"closed"!==this.readyState&&(o("changing transport and sending upgrade packet"),d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emit("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{o('probe transport "%s" failed',e);const n=new Error("probe error");n.transport=t.name,this.emit("upgradeError",n)}}))};function r(){n||(n=!0,d(),t.close(),t=null)}const s=n=>{const i=new Error("probe error: "+n);i.transport=t.name,r(),o('probe transport "%s" failed because of error: %s',e,n),this.emit("upgradeError",i)};function a(){s("transport closed")}function c(){s("socket closed")}function l(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),r())}const d=()=>{t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",a),this.removeListener("close",c),this.removeListener("upgrading",l)};t.once("open",i),t.once("error",s),t.once("close",a),this.once("close",c),this.once("upgrading",l),t.open()}onOpen(){if(o("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){o("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),o("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.removeListener("upgrade",t),this.removeListener("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){o("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingIntervalTimer),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}u.priorWebsocketSuccess=!1,u.protocol=s.protocol,e.exports=u},"Y+et":function(e,t,n){const i=n("P2cu"),r=n("nXuP"),o=n("ZEn9"),s=n("cwTZ");t.polling=function(e){let t,n=!1,s=!1;const a=!1!==e.jsonp;if("undefined"!=typeof location){const t="https:"===location.protocol;let i=location.port;i||(i=t?443:80),n=e.hostname!==location.hostname||i!==e.port,s=e.secure!==t}if(e.xdomain=n,e.xscheme=s,"open"in(t=new i(e))&&!e.forceJSONP)return new r(e);if(!a)throw new Error("JSONP disabled");return new o(e)},t.websocket=s},ZEn9:function(e,t,n){const i=n("5+9/"),r=n("vveS"),o=/\n/g,s=/\\n/g;let a;e.exports=class extends i{constructor(e){super(e),this.query=this.query||{},a||(a=r.___eio=r.___eio||[]),this.index=a.length,a.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=(()=>{}),this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=(e=>{this.onError("jsonp poll error",e)});const t=document.getElementsByTagName("script")[0];t?t.parentNode.insertBefore(e,t):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&this.setTimeoutFn(function(){const e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)}doWrite(e,t){let n;if(!this.form){const e=document.createElement("form"),t=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=n,e.method="POST",e.setAttribute("accept-charset","utf-8"),t.name="d",e.appendChild(t),document.body.appendChild(e),this.form=e,this.area=t}function i(){r(),t()}this.form.action=this.uri();const r=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(e){this.onError("jsonp polling iframe removal error",e)}try{const e='<iframe src="javascript:0" name="'+this.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=this.iframeId,n.src="javascript:0"}n.id=this.iframeId,this.form.appendChild(n),this.iframe=n};r(),e=e.replace(s,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=(()=>{"complete"===this.iframe.readyState&&i()}):this.iframe.onload=i}}},ZOjo:function(e,t,n){const i=n("qFti"),r=n("pnVU"),{installTimerFunctions:o}=n("7mji"),s=n("Fy0/")("engine.io-client:transport");e.exports=class extends r{constructor(e){super(),o(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):s("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){const t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}}},ZQIL:function(e,t,n){e.exports=function(e){function t(e){let n,r,o,s=null;function a(...e){if(!a.enabled)return;const i=a,r=Number(new Date),o=r-(n||r);i.diff=o,i.prev=n,i.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return"%";s++;const o=t.formatters[r];if("function"==typeof o){const t=e[s];n=o.call(i,t),e.splice(s,1),s--}return n}),t.formatArgs.call(i,e),(i.log||t.log).apply(i,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(r!==t.namespaces&&(r=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,n){const i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n("EarI"),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},ZuDo:function(e,t){},Zzip:function(e,t,n){e.exports={default:n("/n6Q"),__esModule:!0}},a46f:function(e,t){},aPRC:function(e,t,n){var i=n("OMJi"),r=n("/+tP");function o(e){r.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}i.inherits(o,r),o.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},o.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},e.exports=o},aXuZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!0,configurable:!0}),e.prototype.reject=function(e){this._reject(e)},e.prototype.resolve=function(e){this._resolve(e)},e}();t.default=i},afOB:function(e,t,n){var i,r,o;
/* @license
Papa Parse
v5.3.1
https://github.com/mholt/PapaParse
License: MIT
*/r=[],void 0===(o="function"==typeof(i=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,i=n&&/blob:/i.test((t.location||{}).protocol),r={},o=0,s={parse:function(n,i){var a=(i=i||{}).dynamicTyping||!1;if(b(a)&&(i.dynamicTypingFunction=a,a={}),i.dynamicTyping=a,i.transform=!!b(i.transform)&&i.transform,i.worker&&s.WORKERS_SUPPORTED){var c=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,i,a=(n=t.URL||t.webkitURL||null,i=e.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),c=new t.Worker(a);return c.onmessage=v,c.id=o++,r[c.id]=c}();return c.userStep=i.step,c.userChunk=i.chunk,c.userComplete=i.complete,c.userError=i.error,i.step=b(i.step),i.chunk=b(i.chunk),i.complete=b(i.complete),i.error=b(i.error),delete i.worker,void c.postMessage({input:n,config:i,workerId:c.id})}var f=null;return s.NODE_STREAM_INPUT,"string"==typeof n?f=i.download?new l(i):new d(i):!0===n.readable&&b(n.read)&&b(n.on)?f=new p(i):(t.File&&n instanceof File||n instanceof Object)&&(f=new u(i)),f.stream(n)},unparse:function(e,t){var n=!1,i=!0,r=",",o="\r\n",a='"',c=a+a,l=!1,u=null,d=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||s.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(r=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(l=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(i=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(c=t.escapeChar+a),"boolean"==typeof t.escapeFormulae&&(d=t.escapeFormulae)}}();var p=new RegExp(h(a),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,l);if("object"==typeof e[0])return f(u||Object.keys(e[0]),e,l)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(e,t,n){var s="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var a=Array.isArray(e)&&0<e.length,c=!Array.isArray(t[0]);if(a&&i){for(var l=0;l<e.length;l++)0<l&&(s+=r),s+=m(e[l],l);0<t.length&&(s+=o)}for(var u=0;u<t.length;u++){var d=a?e.length:t[u].length,p=!1,f=a?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!a&&(p="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&a){for(var h=[],v=0;v<d;v++){var g=c?e[v]:v;h.push(t[u][g])}p=""===h.join("").trim()}if(!p){for(var _=0;_<d;_++){0<_&&!f&&(s+=r);var A=a&&c?e[_]:_;s+=m(t[u][A],_)}u<t.length-1&&(!n||0<d&&!f)&&(s+=o)}}return s}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===d&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var i=e.toString().replace(p,c);return"boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(i,s.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1)?a+i+a:i}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!t.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=m,s.ParserHandle=f,s.NetworkStreamer=l,s.FileStreamer=u,s.StringStreamer=d,s.ReadableStreamStreamer=p,t.jQuery){var a=t.jQuery;a.fn.parse=function(e){var n=e.config||{},i=[];return this.each(function(e){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:a.extend({},n)})}),r(),this;function r(){if(0!==i.length){var t,n,r,c,l=i[0];if(b(e.before)){var u=e.before(l.file,l.inputElem);if("object"==typeof u){if("abort"===u.action)return t="AbortError",n=l.file,r=l.inputElem,c=u.reason,void(b(e.error)&&e.error({name:t},n,r,c));if("skip"===u.action)return void o();"object"==typeof u.config&&(l.instanceConfig=a.extend(l.instanceConfig,u.config))}else if("skip"===u)return void o()}var d=l.instanceConfig.complete;l.instanceConfig.complete=function(e){b(d)&&d(e,l.file,l.inputElem),o()},s.parse(l.file,l.instanceConfig)}else b(e.complete)&&e.complete()}function o(){i.splice(0,1),r()}}}function c(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=A(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(e);void 0!==r&&(e=r)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var c=a.meta.cursor;this._finished||(this._partialLine=o.substring(c-this._baseIndex),this._baseIndex=c),a&&a.data&&(this._rowCount+=a.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)t.postMessage({results:a,workerId:s.WORKER_ID,finished:l});else if(b(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!l||!b(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){b(this._config.error)?this._config.error(e):i&&this._config.error&&t.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function l(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),c.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=y(this._chunkLoaded,this),t.onerror=y(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var i in e)t.setRequestHeader(i,e[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(e=t.getResponseHeader("Content-Range"))?-1:parseInt(e.substring(e.lastIndexOf("/")+1))),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function u(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),c.call(this,e);var i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,i?((t=new FileReader).onload=y(this._chunkLoaded,this),t.onerror=y(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,r)}var o=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;c.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function p(e){c.call(this,e=e||{});var t=[],n=!0,i=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=y(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=y(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=y(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(e){var t,n,i,r=Math.pow(2,53),o=-r,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,l=this,u=0,d=0,p=!1,f=!1,v=[],g={data:[],errors:[],meta:{}};if(b(e.step)){var _=e.step;e.step=function(t){if(g=t,C())w();else{if(w(),0===g.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(g.data=g.data[0],_(g,l))}}}function y(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function w(){if(g&&i&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),i=!1),e.skipEmptyLines)for(var t=0;t<g.data.length;t++)y(g.data[t])&&g.data.splice(t--,1);return C()&&function(){if(g)if(Array.isArray(g.data[0])){for(var t=0;C()&&t<g.data.length;t++)g.data[t].forEach(n);g.data.splice(0,1)}else g.data.forEach(n);function n(t,n){b(e.transformHeader)&&(t=e.transformHeader(t,n)),v.push(t)}}(),function(){if(!g||!e.header&&!e.dynamicTyping&&!e.transform)return g;function t(t,n){var i,r=e.header?{}:[];for(i=0;i<t.length;i++){var o=i,s=t[i];e.header&&(o=i>=v.length?"__parsed_extra":v[i]),e.transform&&(s=e.transform(s,o)),s=S(o,s),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(s)):r[o]=s}return e.header&&(i>v.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+i,d+n):i<v.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+i,d+n)),r}var n=1;return!g.data.length||Array.isArray(g.data[0])?(g.data=g.data.map(t),n=g.data.length):g.data=t(g.data,0),e.header&&g.meta&&(g.meta.fields=v),d+=n,g}()}function C(){return e.header&&0===v.length}function S(t,n){return i=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[i]&&(e.dynamicTyping[i]=e.dynamicTypingFunction(i)),!0===(e.dynamicTyping[i]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(a.test(e)){var t=parseFloat(e);if(o<t&&t<r)return!0}return!1}(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n;var i}function E(e,t,n,i){var r={type:e,code:t,message:n};void 0!==i&&(r.row=i),g.errors.push(r)}this.parse=function(r,o,a){var c=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(h(t)+"([^]*?)"+h(t),"gm"),i=(e=e.replace(n,"")).split("\r"),r=e.split("\n"),o=1<r.length&&r[0].length<i[0].length;if(1===i.length||o)return"\n";for(var s=0,a=0;a<i.length;a++)"\n"===i[a][0]&&s++;return s>=i.length/2?"\r\n":"\r"}(r,c)),i=!1,e.delimiter)b(e.delimiter)&&(e.delimiter=e.delimiter(r),g.meta.delimiter=e.delimiter);else{var l=function(t,n,i,r,o){var a,c,l,u;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var d=0;d<o.length;d++){var p=o[d],f=0,h=0,v=0;l=void 0;for(var g=new m({comments:r,delimiter:p,newline:n,preview:10}).parse(t),_=0;_<g.data.length;_++)if(i&&y(g.data[_]))v++;else{var A=g.data[_].length;h+=A,void 0!==l?0<A&&(f+=Math.abs(A-l),l=A):l=A}0<g.data.length&&(h/=g.data.length-v),(void 0===c||f<=c)&&(void 0===u||u<h)&&1.99<h&&(c=f,a=p,u=h)}return{successful:!!(e.delimiter=a),bestDelimiter:a}}(r,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);l.successful?e.delimiter=l.bestDelimiter:(i=!0,e.delimiter=s.DefaultDelimiter),g.meta.delimiter=e.delimiter}var u=A(e);return e.preview&&e.header&&u.preview++,t=r,n=new m(u),g=n.parse(t,o,a),w(),p?{meta:{paused:!0}}:g||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),t=b(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(p=!1,l.streamer.parseChunk(t,!0)):setTimeout(l.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),g.meta.aborted=!0,b(e.complete)&&e.complete(g),t=""}}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,n=(e=e||{}).delimiter,i=e.newline,r=e.comments,o=e.step,a=e.preview,c=e.fastMode,l=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(l=e.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var u=0,d=!1;this.parse=function(e,s,p){if("string"!=typeof e)throw new Error("Input must be a string");var f=e.length,m=n.length,v=i.length,g=r.length,_=b(o),A=[],y=[],w=[],C=u=0;if(!e)return N();if(c||!1!==c&&-1===e.indexOf(t)){for(var S=e.split(i),E=0;E<S.length;E++){if(w=S[E],u+=w.length,E!==S.length-1)u+=i.length;else if(p)return N();if(!r||w.substring(0,g)!==r){if(_){if(A=[],D(w.split(n)),L(),d)return N()}else D(w.split(n));if(a&&a<=E)return A=A.slice(0,a),N(!0)}}return N()}for(var k=e.indexOf(n,u),x=e.indexOf(i,u),T=new RegExp(h(l)+h(t),"g"),I=e.indexOf(t,u);;)if(e[u]!==t)if(r&&0===w.length&&e.substring(u,u+g)===r){if(-1===x)return N();u=x+v,x=e.indexOf(i,u),k=e.indexOf(n,u)}else if(-1!==k&&(k<x||-1===x))w.push(e.substring(u,k)),u=k+m,k=e.indexOf(n,u);else{if(-1===x)break;if(w.push(e.substring(u,x)),M(x+v),_&&(L(),d))return N();if(a&&A.length>=a)return N(!0)}else for(I=u,u++;;){if(-1===(I=e.indexOf(t,I+1)))return p||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:A.length,index:u}),B();if(I===f-1)return B(e.substring(u,I).replace(T,t));if(t!==l||e[I+1]!==l){if(t===l||0===I||e[I-1]!==l){-1!==k&&k<I+1&&(k=e.indexOf(n,I+1)),-1!==x&&x<I+1&&(x=e.indexOf(i,I+1));var P=O(-1===x?k:Math.min(k,x));if(e[I+1+P]===n){w.push(e.substring(u,I).replace(T,t)),e[u=I+1+P+m]!==t&&(I=e.indexOf(t,u)),k=e.indexOf(n,u),x=e.indexOf(i,u);break}var R=O(x);if(e.substring(I+1+R,I+1+R+v)===i){if(w.push(e.substring(u,I).replace(T,t)),M(I+1+R+v),k=e.indexOf(n,u),I=e.indexOf(t,u),_&&(L(),d))return N();if(a&&A.length>=a)return N(!0);break}y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:A.length,index:u}),I++}}else I++}return B();function D(e){A.push(e),C=u}function O(t){var n=0;if(-1!==t){var i=e.substring(I+1,t);i&&""===i.trim()&&(n=i.length)}return n}function B(t){return p||(void 0===t&&(t=e.substring(u)),w.push(t),u=f,D(w),_&&L()),N()}function M(t){u=t,D(w),w=[],x=e.indexOf(i,u)}function N(e){return{data:A,errors:y,meta:{delimiter:n,linebreak:i,aborted:d,truncated:!!e,cursor:C+(s||0)}}}function L(){o(N()),A=[],y=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return u}}function v(e){var t=e.data,n=r[t.workerId],i=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){i=!0,g(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(b(n.userStep)){for(var s=0;s<t.results.data.length&&(n.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},o),!i);s++);delete t.results}else b(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!i&&g(t.workerId,t.results)}function g(e,t){var n=r[e];b(n.userComplete)&&n.userComplete(t),n.terminate(),delete r[e]}function _(){throw new Error("Not implemented.")}function A(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=A(e[n]);return t}function y(e,t){return function(){e.apply(t,arguments)}}function b(e){return"function"==typeof e}return i&&(t.onmessage=function(e){var n=e.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var i=s.parse(n.input,n.config);i&&t.postMessage({workerId:s.WORKER_ID,results:i,finished:!0})}}),(l.prototype=Object.create(c.prototype)).constructor=l,(u.prototype=Object.create(c.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(p.prototype=Object.create(c.prototype)).constructor=p,s})?i.apply(t,r):i)||(e.exports=o)},"b+fm":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n;void 0===t&&(t=!1),this.deleted=!1;var i=e.candidate.split("network-cost ");i[1]&&(n=parseInt(i[1],10)),this.candidateType=e.type,this.ip=e.ip||e.address,this.isRemote=t,this.networkCost=n,this.port=e.port,this.priority=e.priority,this.protocol=e.protocol,this.relatedAddress=e.relatedAddress,this.relatedPort=e.relatedPort,this.tcpType=e.tcpType,this.transportId=e.sdpMid}return e.prototype.toPayload=function(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}},e}();t.IceCandidate=i},bKul:function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},"c/Tr":function(e,t,n){e.exports={default:n("5zde"),__esModule:!0}},cM4V:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const i=n("t4n9");t.deconstructPacket=function(e){const t=[],n=e.data,r=e;return r.data=function e(t,n){if(!t)return t;if(i.isBinary(t)){const e={_placeholder:!0,num:n.length};return n.push(t),e}if(Array.isArray(t)){const i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=e(t[r],n);return i}if("object"==typeof t&&!(t instanceof Date)){const i={};for(const r in t)t.hasOwnProperty(r)&&(i[r]=e(t[r],n));return i}return t}(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=e(t[i],n);else if("object"==typeof t)for(const i in t)t.hasOwnProperty(i)&&(t[i]=e(t[i],n));return t}(e.data,t),e.attachments=void 0,e}},crlp:function(e,t,n){var i=n("7KvD"),r=n("FeBl"),o=n("O4g8"),s=n("Kh4W"),a=n("evD5").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},cwTZ:function(e,t,n){(function(t){const i=n("ZOjo"),r=n("qFti"),o=n("gVZZ"),s=n("9rXv"),{pick:a}=n("7mji"),{WebSocket:c,usingBrowserWebSocket:l,defaultBinaryType:u,nextTick:d}=n("uAzU"),p=n("Fy0/")("engine.io-client:websocket"),f="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class h extends i{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=f?{}:a(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=l&&!f?t?new c(e,t):new c(e):new c(e,t,n)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||u,this.addEventListeners()}addEventListeners(){this.ws.onopen=(()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()}),this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=(e=>this.onData(e.data)),this.ws.onerror=(e=>this.onError("websocket error",e))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],o=n===e.length-1;r.encodePacket(i,this.supportsBinary,e=>{const n={};if(!l&&(i.options&&(n.compress=i.options.compress),this.opts.perMessageDeflate)){("string"==typeof e?t.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(n.compress=!1)}try{l?this.ws.send(e):this.ws.send(e,n)}catch(e){p("websocket closed before onclose event")}o&&d(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}onClose(){i.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=s()),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}check(){return!(!c||"__initialize"in c&&this.name===h.prototype.name)}}e.exports=h}).call(t,n("EuP9").Buffer)},dLaG:function(e,t){},dR19:function(e,t){},e21k:function(e,t,n){var i=n("JHvc"),r=n("+fTR"),o=n("aPRC"),s=n("i7zY");e.exports.Backoff=i,e.exports.FunctionCall=s,e.exports.FibonacciStrategy=o,e.exports.ExponentialStrategy=r,e.exports.fibonacci=function(e){return new i(new o(e))},e.exports.exponential=function(e){return new i(new r(e))},e.exports.call=function(e,t,n){var i=Array.prototype.slice.call(arguments);return e=i[0],t=i.slice(1,i.length-1),n=i[i.length-1],new s(e,t,n)}},eIm2:function(e,t){},eYrn:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new Promise(function(e,n){t._resolve=e,t._reject=n})}return i(e,[{key:"reject",get:function(){return this._reject}},{key:"resolve",get:function(){return this._resolve}}]),e}();t.default=r},edSy:function(e,t,n){e.exports=n.p+"static/img/icon.aecad04.png"},fBQ2:function(e,t,n){"use strict";var i=n("evD5"),r=n("X8DO");e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},fC4T:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},fOB9:function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,r=e.indexOf("["),o=e.indexOf("]");-1!=r&&-1!=o&&(e=e.substring(0,r)+e.substring(r,o).replace(/:/g,";")+e.substring(o,e.length));for(var s,a,c=n.exec(e||""),l={},u=14;u--;)l[i[u]]=c[u]||"";return-1!=r&&-1!=o&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,l.path),l.queryKey=(s=l.query,a={},s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(a[t]=n)}),a),l}},fTPN:function(e,t,n){"use strict";var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n("SBlr"),o={0:"PCMU",8:"PCMA"},s=111,a=51e4,c=6e3;e.exports={getPreferredCodecInfo:function(e){var t=/a=rtpmap:(\d+) (\S+)/m.exec(e)||[null,"",""],n=i(t,3),r=n[1],o=n[2],s=new RegExp("a=fmtp:"+r+" (\\S+)","m").exec(e)||[null,""];return{codecName:o,codecParams:i(s,2)[1]}},setCodecPreferences:function(e,t){var n=function(e,t,n){return e.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(e){return"m="+e}).filter(function(e){var i=new RegExp("m="+(t||".*"),"gm"),r=new RegExp("a="+(n||".*"),"gm");return i.test(e)&&r.test(e)})}(e);return[e.split("\r\nm=")[0]].concat(n.map(function(e){if(!/^m=(audio|video)/.test(e))return e;var n=e.match(/^m=(audio|video)/)[1],i=function(e){return Array.from((t=e,function(e){var t=e.split("\r\n")[0].match(/([0-9]+)/g);return t?t.slice(1).map(function(e){return parseInt(e,10)}):[]}(t).reduce(function(e,n){var i=new RegExp("a=rtpmap:"+n+" ([^/]+)"),r=t.match(i),s=r?r[1].toLowerCase():o[n]?o[n].toLowerCase():"";return e.set(n,s)},new Map))).reduce(function(e,t){var n=t[0],i=t[1],r=e.get(i)||[];return e.set(i,r.concat(n))},new Map);var t}(e),s=function(e,t){t=t.map(function(e){return e.toLowerCase()});var n=r.flatMap(t,function(t){return e.get(t)||[]}),i=r.difference(Array.from(e.keys()),t),o=r.flatMap(i,function(t){return e.get(t)});return n.concat(o)}(i,t),a=function(e,t){var n=t.split("\r\n"),i=n[0],r=n.slice(1);return[i=i.replace(/([0-9]+\s?)+$/,e.join(" "))].concat(r).join("\r\n")}(s,e),c=i.get("pcma")||[],l=i.get("pcmu")||[];return("audio"===n?new Set(c.concat(l)):new Set).has(s[0])?a.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):a})).join("\r\n")},setIceAggressiveNomination:function(e){return r.isChrome(window,window.navigator)?e.split("\n").filter(function(e){return-1===e.indexOf("a=ice-lite")}).join("\n"):e},setMaxAverageBitrate:function(e,t){if("number"!=typeof t||t<c||t>a)return e;var n=/a=rtpmap:(\d+) opus/m.exec(e),i=n&&n.length?n[1]:s,r=new RegExp("a=fmtp:"+i);return e.split("\n").map(function(e){return r.test(e)?e+";maxaveragebitrate="+t:e}).join("\n")}}},fWfb:function(e,t,n){"use strict";var i=n("7KvD"),r=n("D2L2"),o=n("+E39"),s=n("kM2E"),a=n("880/"),c=n("06OY").KEY,l=n("S82l"),u=n("e8AB"),d=n("e6n0"),p=n("3Eo+"),f=n("dSzd"),h=n("Kh4W"),m=n("crlp"),v=n("Xc4G"),g=n("7UMu"),_=n("77Pl"),A=n("EqjI"),y=n("sB3e"),b=n("TcQ7"),w=n("MmMw"),C=n("X8DO"),S=n("Yobk"),E=n("Rrel"),k=n("LKZe"),x=n("1kS7"),T=n("evD5"),I=n("lktj"),P=k.f,R=T.f,D=E.f,O=i.Symbol,B=i.JSON,M=B&&B.stringify,N=f("_hidden"),L=f("toPrimitive"),F={}.propertyIsEnumerable,j=u("symbol-registry"),$=u("symbols"),U=u("op-symbols"),q=Object.prototype,V="function"==typeof O&&!!x.f,z=i.QObject,G=!z||!z.prototype||!z.prototype.findChild,Y=o&&l(function(){return 7!=S(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=P(q,t);i&&delete q[t],R(e,t,n),i&&e!==q&&R(q,t,i)}:R,Q=function(e){var t=$[e]=S(O.prototype);return t._k=e,t},H=V&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},W=function(e,t,n){return e===q&&W(U,t,n),_(e),t=w(t,!0),_(n),r($,t)?(n.enumerable?(r(e,N)&&e[N][t]&&(e[N][t]=!1),n=S(n,{enumerable:C(0,!1)})):(r(e,N)||R(e,N,C(1,{})),e[N][t]=!0),Y(e,t,n)):R(e,t,n)},J=function(e,t){_(e);for(var n,i=v(t=b(t)),r=0,o=i.length;o>r;)W(e,n=i[r++],t[n]);return e},K=function(e){var t=F.call(this,e=w(e,!0));return!(this===q&&r($,e)&&!r(U,e))&&(!(t||!r(this,e)||!r($,e)||r(this,N)&&this[N][e])||t)},X=function(e,t){if(e=b(e),t=w(t,!0),e!==q||!r($,t)||r(U,t)){var n=P(e,t);return!n||!r($,t)||r(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=D(b(e)),i=[],o=0;n.length>o;)r($,t=n[o++])||t==N||t==c||i.push(t);return i},ee=function(e){for(var t,n=e===q,i=D(n?U:b(e)),o=[],s=0;i.length>s;)!r($,t=i[s++])||n&&!r(q,t)||o.push($[t]);return o};V||(a((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(U,n),r(this,N)&&r(this[N],e)&&(this[N][e]=!1),Y(this,e,C(1,n))};return o&&G&&Y(q,e,{configurable:!0,set:t}),Q(e)}).prototype,"toString",function(){return this._k}),k.f=X,T.f=W,n("n0T6").f=E.f=Z,n("NpIQ").f=K,x.f=ee,o&&!n("O4g8")&&a(q,"propertyIsEnumerable",K,!0),h.f=function(e){return Q(f(e))}),s(s.G+s.W+s.F*!V,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var ie=I(f.store),re=0;ie.length>re;)m(ie[re++]);s(s.S+s.F*!V,"Symbol",{for:function(e){return r(j,e+="")?j[e]:j[e]=O(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),s(s.S+s.F*!V,"Object",{create:function(e,t){return void 0===t?S(e):J(S(e),t)},defineProperty:W,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=l(function(){x.f(1)});s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return x.f(y(e))}}),B&&s(s.S+s.F*(!V||l(function(){var e=O();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(A(t)||void 0!==e)&&!H(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!H(t))return t}),i[1]=t,M.apply(B,i)}}),O.prototype[L]||n("hJx8")(O.prototype,L,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},fxRn:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("g8Ux")},g8Ux:function(e,t,n){var i=n("77Pl"),r=n("3fs2");e.exports=n("FeBl").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},gAEt:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var c=n("vzCy"),l=n("lOtu"),u=n("QqWh"),d=n("6D9g"),p=n("3+sl"),f=n("Atx/"),h=f.COWBELL_AUDIO_URL,m=f.ECHO_TEST_DURATION,v=function(e){function t(n,i){var r=e.call(this)||this;return r._hasInsightsErrored=!1,r._networkTiming={},r._options={codecPreferences:[l.default.Codec.PCMU,l.default.Codec.Opus],debug:!1,edge:"roaming",fakeMicInput:!1,signalingTimeoutMs:1e4},r._status=t.Status.Connecting,Object.assign(r._options,i),r._samples=[],r._warnings=[],r._startTime=Date.now(),r._initDevice(n,o(o({},r._options),{fileInputStream:r._options.fakeMicInput?r._getStreamFromFile():void 0})),r}return r(t,e),t.prototype.stop=function(){var e=this,t={code:31008,message:"Call cancelled"};this._device?(this._device.once("offline",function(){return e._onFailed(t)}),this._device.destroy()):this._onFailed(t)},t.prototype._emitWarning=function(e,n,i){var r={name:e,description:n};i&&(r.rtcWarning=i),this._warnings.push(r),this.emit(t.Events.Warning,r)},t.prototype._getCallQuality=function(e){return e>4.2?t.CallQuality.Excellent:e>=4.1&&e<=4.2?t.CallQuality.Great:e>=3.7&&e<=4?t.CallQuality.Good:e>=3.1&&e<=3.6?t.CallQuality.Fair:t.CallQuality.Degraded},t.prototype._getReport=function(){var e=this._getRTCStats(),t={start:this._startTime};this._endTime&&(t.end=this._endTime,t.duration=this._endTime-this._startTime);var n={callSid:this._callSid,edge:this._edge,iceCandidateStats:this._rtcIceCandidateStatsReport.iceCandidateStats,networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:e,testTiming:t,totals:this._getRTCSampleTotals(),warnings:this._warnings},i=this._rtcIceCandidateStatsReport.selectedIceCandidatePairStats;return i&&(n.selectedIceCandidatePairStats=i,n.isTurnRequired="relay"===i.localCandidate.candidateType||"relay"===i.remoteCandidate.candidateType),e&&(n.callQuality=this._getCallQuality(e.mos.average)),n},t.prototype._getRTCSampleTotals=function(){if(this._latestSample)return o({},this._latestSample.totals)},t.prototype._getRTCStats=function(){var e=this._samples.findIndex(function(e){return"number"==typeof e.mos&&e.mos>0}),t=e>=0?this._samples.slice(e):[];if(t&&t.length)return["jitter","mos","rtt"].reduce(function(e,n){var i,r=t.map(function(e){return e[n]});return o(o({},e),((i={})[n]={average:Number((r.reduce(function(e,t){return e+t})/r.length).toPrecision(5)),max:Math.max.apply(Math,r),min:Math.min.apply(Math,r)},i))},{})},t.prototype._getStreamFromFile=function(){var e=this._options.audioContext;if(!e)throw new d.NotSupportedError("Cannot fake input audio stream: AudioContext is not supported by this browser.");var t=new Audio(h);t.addEventListener("canplaythrough",function(){return t.play()}),"function"==typeof t.setAttribute&&t.setAttribute("crossorigin","anonymous");var n=e.createMediaElementSource(t),i=e.createMediaStreamDestination();return n.connect(i),i.stream},t.prototype._initDevice=function(e,t){var n=this;try{this._device=new(t.deviceFactory||u.default)(e,{codecPreferences:t.codecPreferences,debug:t.debug,edge:t.edge,fileInputStream:t.fileInputStream,iceServers:t.iceServers,preflight:!0,rtcConfiguration:t.rtcConfiguration})}catch(e){return void setTimeout(function(){n._onFailed(e)})}this._device.once("ready",function(){n._onDeviceReady()}),this._device.once("error",function(e){n._onDeviceError(e)}),this._signalingTimeoutTimer=setTimeout(function(){n._onDeviceError({code:31901,message:"WebSocket - Connection Timeout"})},t.signalingTimeoutMs)},t.prototype._onDeviceError=function(e){this._device.destroy(),this._onFailed(e)},t.prototype._onDeviceReady=function(){var e=this;if(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._connection=this._device.connect(),this._networkTiming.signaling={start:Date.now()},this._setupConnectionHandlers(this._connection),this._edge=this._device.edge||void 0,this._options.fakeMicInput){this._echoTimer=setTimeout(function(){return e._device.disconnectAll()},m);var t=this._device.audio;t&&(t.disconnect(!1),t.outgoing(!1))}this._device.once("disconnect",function(){e._device.once("offline",function(){return e._onOffline()}),e._device.destroy()}),this._connection._publisher.on("error",function(){e._hasInsightsErrored||e._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),e._hasInsightsErrored=!0})},t.prototype._onFailed=function(e){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=t.Status.Failed,this.emit(t.Events.Failed,e)},t.prototype._onOffline=function(){var e=this;setTimeout(function(){e._status!==t.Status.Failed&&(clearTimeout(e._echoTimer),clearTimeout(e._signalingTimeoutTimer),e._releaseHandlers(),e._endTime=Date.now(),e._status=t.Status.Completed,e._report=e._getReport(),e.emit(t.Events.Completed,e._report))},10)},t.prototype._releaseHandlers=function(){[this._device,this._connection].forEach(function(e){e&&e.eventNames().forEach(function(t){return e.removeAllListeners(t)})})},t.prototype._setupConnectionHandlers=function(e){var n=this;this._options.fakeMicInput&&e.once("volume",function(){e.mediaStream.outputs.forEach(function(e){return e.audio.muted=!0})}),e.on("warning",function(e,t){n._emitWarning(e,"Received an RTCWarning. See .rtcWarning for the RTCWarning",t)}),e.once("accept",function(){n._callSid=e.mediaStream.callSid,n._status=t.Status.Connected,n.emit(t.Events.Connected)}),e.on("sample",function(i){return s(n,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:return this._latestSample?[3,2]:(n=this,[4,(this._options.getRTCIceCandidateStatsReport||p.getRTCIceCandidateStatsReport)(e.mediaStream.version.pc)]);case 1:n._rtcIceCandidateStatsReport=r.sent(),r.label=2;case 2:return this._latestSample=i,this._samples.push(i),this.emit(t.Events.Sample,i),[2]}})})}),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(function(t){var i=t.type,r=t.reportLabel,o="on"+i+"statechange",s=e.mediaStream[o];e.mediaStream[o]=function(e){var t=n._networkTiming[r]=n._networkTiming[r]||{start:0};"connecting"===e||"checking"===e?t.start=Date.now():"connected"!==e&&"stable"!==e||t.duration||(t.end=Date.now(),t.duration=t.end-t.start),s(e)}})},Object.defineProperty(t.prototype,"callSid",{get:function(){return this._callSid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this._endTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latestSample",{get:function(){return this._latestSample},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"report",{get:function(){return this._report},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),t}(c.EventEmitter);t.PreflightTest=v,function(e){!function(e){e.Excellent="excellent",e.Great="great",e.Good="good",e.Fair="fair",e.Degraded="degraded"}(e.CallQuality||(e.CallQuality={})),function(e){e.Completed="completed",e.Connected="connected",e.Failed="failed",e.Sample="sample",e.Warning="warning"}(e.Events||(e.Events={})),function(e){e.Connecting="connecting",e.Connected="connected",e.Completed="completed",e.Failed="failed"}(e.Status||(e.Status={}))}(v=t.PreflightTest||(t.PreflightTest={})),t.PreflightTest=v},gVZZ:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},gwH9:function(e,t){},hlye:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const i=n("TUo+"),r=n("VedT"),o=n("zXjU"),s=n("Fy0/")("socket.io-client:socket"),a=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});t.Socket=class extends o.StrictEventEmitter{constructor(e,t,n){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[(0,r.on)(e,"open",this.onopen.bind(this)),(0,r.on)(e,"packet",this.onpacket.bind(this)),(0,r.on)(e,"error",this.onerror.bind(this)),(0,r.on)(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(a.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const n={type:i.PacketType.EVENT,data:t,options:{}};n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(s("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++);const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||r&&this.connected?this.connected?this.packet(n):this.sendBuffer.push(n):s("discard packet as the transport is not currently writable"),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){s("transport is open - connecting"),"function"==typeof this.auth?this.auth(e=>{this.packet({type:i.PacketType.CONNECT,data:e})}):this.packet({type:i.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){s("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case i.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case i.PacketType.EVENT:case i.PacketType.BINARY_EVENT:this.onevent(e);break;case i.PacketType.ACK:case i.PacketType.BINARY_ACK:this.onack(e);break;case i.PacketType.DISCONNECT:this.ondisconnect();break;case i.PacketType.CONNECT_ERROR:const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];s("emitting event %j",t),null!=e.id&&(s("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,s("sending ack %j",r),t.packet({type:i.PacketType.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(s("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):s("bad ack %s",e.id)}onconnect(e){s("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){s("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(s("performing disconnect (%s)",this.nsp),this.packet({type:i.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}},i7zY:function(e,t,n){var i=n("vzCy"),r=n("oYPl"),o=n("OMJi"),s=n("JHvc"),a=n("aPRC");function c(e,t,n){i.EventEmitter.call(this),r.checkIsFunction(e,"Expected fn to be a function."),r.checkIsArray(t,"Expected args to be an array."),r.checkIsFunction(n,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=n,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=c.DEFAULT_RETRY_PREDICATE_,this.state_=c.State_.PENDING}o.inherits(c,i.EventEmitter),c.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},c.DEFAULT_RETRY_PREDICATE_=function(e){return!0},c.prototype.isPending=function(){return this.state_==c.State_.PENDING},c.prototype.isRunning=function(){return this.state_==c.State_.RUNNING},c.prototype.isCompleted=function(){return this.state_==c.State_.COMPLETED},c.prototype.isAborted=function(){return this.state_==c.State_.ABORTED},c.prototype.setStrategy=function(e){return r.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},c.prototype.retryIf=function(e){return r.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},c.prototype.getLastResult=function(){return this.lastResult_.concat()},c.prototype.getNumRetries=function(){return this.numRetries_},c.prototype.failAfter=function(e){return r.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},c.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=c.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},c.prototype.start=function(e){r.checkState(!this.isAborted(),"FunctionCall is aborted."),r.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new a;this.backoff_=e?e(t):new s(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=c.State_.RUNNING,this.doCall_(!1)},c.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);i.EventEmitter.prototype.emit.apply(this,t);var n=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(n))},c.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},c.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,i.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=c.State_.COMPLETED,this.doCallback_())}},c.prototype.handleBackoff_=function(e,t,n){this.emit("backoff",e,t,n)},e.exports=c},iX30:function(e,t,n){var i=n("/rf/"),r=n("OMJi").inherits,o=500,s="undefined"!=typeof navigator&&navigator.mediaDevices;function a(){i.call(this),this._defineEventHandler("devicechange"),this._defineEventHandler("deviceinfochange");var e=[];Object.defineProperties(this,{_deviceChangeIsNative:{value:c(this,"devicechange")},_deviceInfoChangeIsNative:{value:c(this,"deviceinfochange")},_knownDevices:{value:e},_pollInterval:{value:null,writable:!0}}),"function"==typeof s.enumerateDevices&&s.enumerateDevices().then(function(t){t.sort(l).forEach([].push,e)}),this._eventEmitter.on("newListener",function(e){"devicechange"!==e&&"deviceinfochange"!==e||(this._pollInterval=this._pollInterval||setInterval(function(e){s.enumerateDevices().then(function(t){var n=e._knownDevices,i=n.slice();[].splice.apply(n,[0,n.length].concat(t.sort(l))),!e._deviceChangeIsNative&&function(e,t){return e.length!==t.length||(n="deviceId",i=e,r=t,i.some(function(e,t){return e[n]!==r[t][n]}));var n,i,r}(n,i)&&e.dispatchEvent(new Event("devicechange")),!e._deviceInfoChangeIsNative&&function(e,t){var n=t.reduce(function(e,t){return e.set(t.deviceId,t.label||null)},new Map);return e.some(function(e){var t=n.get(e.deviceId);return void 0!==t&&t!==e.label})}(n,i)&&e.dispatchEvent(new Event("deviceinfochange"))})}.bind(null,this),o))}.bind(this)),this._eventEmitter.on("removeListener",function(){var e;!this._pollInterval||(e=this,["devicechange","deviceinfochange"].reduce(function(t,n){return t+e._eventEmitter.listenerCount(n)},0)>0)||(clearInterval(this._pollInterval),this._pollInterval=null)}.bind(this))}function c(e,t){var n="on"+t;function i(t){e.dispatchEvent(t)}return n in s&&("addEventListener"in s?s.addEventListener(t,i):s[n]=i,!0)}function l(e,t){return e.deviceId<t.deviceId}r(a,i),s&&"function"==typeof s.enumerateDevices&&(a.prototype.enumerateDevices=function(){return s.enumerateDevices.apply(s,arguments)}),a.prototype.getUserMedia=function(){return s.getUserMedia.apply(s,arguments)},e.exports=s?new a:null},kVGU:function(e,t){!function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;n<r;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,i,r,o,s,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(n=0;n<c;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),d[l++]=i<<2|r>>4,d[l++]=(15&r)<<4|o>>2,d[l++]=(3&o)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},lOtu:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n("vzCy"),a=n("QqWh"),c=n("6D9g"),l=n("o8cY"),u=n("b+fm"),d=n("K5Cq"),p=n("SBlr"),f=n("e21k"),h=n("Atx/"),m=n("/rKa").PeerConnection,v=n("fTPN").getPreferredCodecInfo,g={factor:1.1,initialDelay:1,maxDelay:3e4,randomisationFactor:.5},_=70,A=500,y=160,b=10,w=5e3,C={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new c.MediaErrors.ConnectionError}},S={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},E={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},k={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"},x=!1,T=function(e){function t(n,i){var r=e.call(this)||this;r.parameters={},r._inputVolumeStreak=0,r._isAnswered=!1,r._isCancelled=!1,r._latestInputVolume=0,r._latestOutputVolume=0,r._log=l.default.getInstance(),r._metricsSamples=[],r._outputVolumeStreak=0,r._soundcache=new Map,r._status=t.State.Pending,r.options={enableRingingState:!1,mediaStreamFactory:m,offerSdp:null,shouldPlayDisconnect:function(){return!0}},r.sendHangup=!0,r.toString=function(){return"[Twilio.Connection instance]"},r._emitWarning=function(e,t,n,i,o,s){var a=e+"warning"+(o?"-cleared":"-raised");if("constant-audio-input-level"!==t||!r.isMuted()){var c=o?"info":"warning";"constant-audio-output-level"===t&&(c="info");var l={threshold:n};if(i&&(i instanceof Array?l.values=i.map(function(e){return"number"==typeof e?Math.round(100*e)/100:i}):l.value=i),r._publisher.post(c,a,t,{data:l},r),"constant-audio-output-level"!==t){var u=o?"warning-cleared":"warning";r.emit(u,t,s&&!o?s:null)}}},r._onAnswer=function(e){r._isAnswered||(r._setCallSid(e),r._isAnswered=!0,r._maybeTransitionToOpen())},r._onCancel=function(e){var n=e.callsid;r.parameters.CallSid===n&&(r._isCancelled=!0,r._publisher.info("connection","cancel",null,r),r._cleanupEventListeners(),r.mediaStream.close(),r._status=t.State.Closed,r.emit("cancel"),r.pstream.removeListener("cancel",r._onCancel))},r._onHangup=function(e){if(e.callsid&&(r.parameters.CallSid||r.outboundConnectionId)){if(e.callsid!==r.parameters.CallSid&&e.callsid!==r.outboundConnectionId)return}else if(e.callsid)return;if(r._log.info("Received HANGUP from gateway"),e.error){var t={code:e.error.code||31e3,connection:r,message:e.error.message||"Error sent from gateway in HANGUP",twilioError:new c.GeneralErrors.ConnectionError};r._log.error("Received an error from the gateway:",t),r.emit("error",t)}r.sendHangup=!1,r._publisher.info("connection","disconnected-by-remote",null,r),r._disconnect(null,!0),r._cleanupEventListeners()},r._onMediaFailure=function(e){var n=t.MediaFailure,i=n.ConnectionDisconnected,o=n.ConnectionFailed,s=n.IceGatheringFailed,a=n.LowBytes,l=e===o||e===s;if(!r.options.enableIceRestart&&l||!p.isChrome(window,window.navigator)&&e===o)return r.mediaStream.onerror(C);if(r.options.enableIceRestart)if(r._status!==t.State.Reconnecting){var u=r.mediaStream.version.pc,d=u&&"disconnected"===u.iceConnectionState,f=r._monitor.hasActiveWarning("bytesSent","min")||r._monitor.hasActiveWarning("bytesReceived","min");if(e===a&&d||e===i&&f||l){var h={code:53405,message:"Media connection failed.",twilioError:new c.MediaErrors.ConnectionError};r._log.warn("ICE Connection disconnected."),r._publisher.warn("connection","error",h,r),r._publisher.info("connection","reconnecting",null,r),r._mediaReconnectStartTime=Date.now(),r._status=t.State.Reconnecting,r._mediaReconnectBackoff.reset(),r._mediaReconnectBackoff.backoff(),r.emit("reconnecting",h)}}else if(l){if(Date.now()-r._mediaReconnectStartTime>g.maxDelay)return r._log.info("Exceeded max ICE retries"),r.mediaStream.onerror(C);r._mediaReconnectBackoff.backoff()}},r._onMediaReconnected=function(){r._status===t.State.Reconnecting&&(r._log.info("ICE Connection reestablished."),r._publisher.info("connection","reconnected",null,r),r._status=t.State.Open,r.emit("reconnected"))},r._onRinging=function(e){if(r._setCallSid(e),r._status===t.State.Connecting||r._status===t.State.Ringing){var n=!!e.sdp;r.options.enableRingingState?(r._status=t.State.Ringing,r._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:n},r),r.emit("ringing",n)):n&&r._onAnswer(e)}},r._onRTCSample=function(e){var t=o(o({},e),{inputVolume:r._latestInputVolume,outputVolume:r._latestOutputVolume});r._codec=t.codecName,r._metricsSamples.push(t),r._metricsSamples.length>=b&&r._publishMetrics(),r.emit("sample",e)},r._onTransportClose=function(){r._log.error("Received transportClose from pstream"),r.emit("transportClose")},r._reemitWarning=function(e,t){var n,i=/^audio/.test(e.name)?"audio-level-":"network-quality-",o=k[e.threshold.name];e.name in S?n=S[e.name][e.threshold.name]:e.name in E&&(n=E[e.name]);var s=o+n;r._emitWarning(i,s,e.threshold.value,e.values||e.value,t,e)},r._reemitWarningCleared=function(e){r._reemitWarning(e,!0)},r._isUnifiedPlanDefault=n.isUnifiedPlanDefault,r._soundcache=n.soundcache,r.message=i&&i.twimlParams||{},r.customParameters=new Map(Object.entries(r.message).map(function(e){var t=e[0],n=e[1];return[t,String(n)]})),Object.assign(r.options,i),r.options.callParameters&&(r.parameters=r.options.callParameters),r._direction=r.parameters.CallSid?t.CallDirection.Incoming:t.CallDirection.Outgoing,r._direction===t.CallDirection.Incoming&&r.parameters?r.callerInfo=r.parameters.StirStatus?{isVerified:"TN-Validation-Passed-A"===r.parameters.StirStatus}:null:r.callerInfo=null,r._mediaReconnectBackoff=f.exponential(g),r._mediaReconnectBackoff.on("ready",function(){return r.mediaStream.iceRestart()}),r.outboundConnectionId="TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});var s=r._publisher=n.publisher;r._direction===t.CallDirection.Incoming?s.info("connection","incoming",null,r):s.info("connection","outgoing",{preflight:r.options.preflight},r);var h=r._monitor=new(r.options.StatsMonitor||d.default);return h.on("sample",r._onRTCSample),h.disableWarnings(),setTimeout(function(){return h.enableWarnings()},w),h.on("warning",function(e,n){"bytesSent"!==e.name&&"bytesReceived"!==e.name||r._onMediaFailure(t.MediaFailure.LowBytes),r._reemitWarning(e,n)}),h.on("warning-cleared",function(e){r._reemitWarningCleared(e)}),r.mediaStream=new(r.options.MediaStream||r.options.mediaStreamFactory)(n.audioHelper,n.pstream,n.getUserMedia,{codecPreferences:r.options.codecPreferences,dscp:r.options.dscp,enableIceRestart:r.options.enableIceRestart,forceAggressiveIceNomination:r.options.forceAggressiveIceNomination,isUnifiedPlan:r._isUnifiedPlanDefault,maxAverageBitrate:r.options.maxAverageBitrate,preflight:r.options.preflight}),r.on("volume",function(e,t){r._inputVolumeStreak=r._checkVolume(e,r._inputVolumeStreak,r._latestInputVolume,"input"),r._outputVolumeStreak=r._checkVolume(t,r._outputVolumeStreak,r._latestOutputVolume,"output"),r._latestInputVolume=e,r._latestOutputVolume=t}),r.mediaStream.onvolume=function(e,t,n,i){h.addVolumes(n/255*32767,i/255*32767),r.emit("volume",e,t)},r.mediaStream.ondtlstransportstatechange=function(e){var t="failed"===e?"error":"debug";r._publisher.post(t,"dtls-transport-state",e,null,r)},r.mediaStream.onpcconnectionstatechange=function(e){var t="debug",n=r.mediaStream.getRTCDtlsTransport();"failed"===e&&(t=n&&"failed"===n.state?"error":"warning"),r._publisher.post(t,"pc-connection-state",e,null,r)},r.mediaStream.onicecandidate=function(e){var t=new u.IceCandidate(e).toPayload();r._publisher.debug("ice-candidate","ice-candidate",t,r)},r.mediaStream.onselectedcandidatepairchange=function(e){var t=new u.IceCandidate(e.local).toPayload(),n=new u.IceCandidate(e.remote,!0).toPayload();r._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:t,remote_candidate:n},r)},r.mediaStream.oniceconnectionstatechange=function(e){var t="failed"===e?"error":"debug";r._publisher.post(t,"ice-connection-state",e,null,r)},r.mediaStream.onicegatheringfailure=function(e){r._publisher.warn("ice-gathering-state",e,null,r),r._onMediaFailure(t.MediaFailure.IceGatheringFailed)},r.mediaStream.onicegatheringstatechange=function(e){r._publisher.debug("ice-gathering-state",e,null,r)},r.mediaStream.onsignalingstatechange=function(e){r._publisher.debug("signaling-state",e,null,r)},r.mediaStream.ondisconnected=function(e){r._log.info(e),r._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:e},r),r.emit("warning","ice-connectivity-lost"),r._onMediaFailure(t.MediaFailure.ConnectionDisconnected)},r.mediaStream.onfailed=function(e){r._onMediaFailure(t.MediaFailure.ConnectionFailed)},r.mediaStream.onconnected=function(){r._status===t.State.Reconnecting&&r._onMediaReconnected()},r.mediaStream.onreconnected=function(e){r._log.info(e),r._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:e},r),r.emit("warning-cleared","ice-connectivity-lost"),r._onMediaReconnected()},r.mediaStream.onerror=function(e){!0===e.disconnect&&r._disconnect(e.info&&e.info.message);var t={code:e.info.code,connection:r,info:e.info,message:e.info.message||"Error with mediastream",twilioError:e.info.twilioError};r._log.error("Received an error from MediaStream:",e),r.emit("error",t)},r.mediaStream.onopen=function(){r._status!==t.State.Open&&r._status!==t.State.Reconnecting&&(r._status===t.State.Ringing||r._status===t.State.Connecting?(r.mute(!1),r._maybeTransitionToOpen()):r.mediaStream.close())},r.mediaStream.onclose=function(){r._status=t.State.Closed,r.options.shouldPlayDisconnect&&r.options.shouldPlayDisconnect()&&!r._isCancelled&&r._soundcache.get(a.default.SoundName.Disconnect).play(),h.disable(),r._publishMetrics(),r._isCancelled||r.emit("disconnect",r)},r.pstream=n.pstream,r.pstream.on("cancel",r._onCancel),r.pstream.on("ringing",r._onRinging),r.pstream.on("transportClose",r._onTransportClose),r.on("error",function(e){r._publisher.error("connection","error",{code:e.code,message:e.message},r),r.pstream&&"disconnected"===r.pstream.status&&r._cleanupEventListeners()}),r.on("disconnect",function(){r._cleanupEventListeners()}),r}return r(t,e),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"codec",{get:function(){return this._codec},enumerable:!0,configurable:!0}),t.prototype._getRealCallSid=function(){return this._log.warn("_getRealCallSid is deprecated and will be removed in 2.0."),/^TJ/.test(this.parameters.CallSid)?null:this.parameters.CallSid},t.prototype._getTempCallSid=function(){return this._log.warn("_getTempCallSid is deprecated and will be removed in 2.0.                     Please use outboundConnectionId instead."),this.outboundConnectionId},t.prototype._setInputTracksFromStream=function(e){return this.mediaStream.setInputTracksFromStream(e)},t.prototype._setSinkIds=function(e){return this.mediaStream._setSinkIds(e)},t.prototype.accept=function(e,n){var i=this;if("function"!=typeof e){if(this._status===t.State.Pending){var r=e||this.options.audioConstraints;this._status=t.State.Connecting;this.options.beforeAccept&&this.options.beforeAccept(this);var o="function"==typeof this.options.getInputStream&&this.options.getInputStream();(o?this.mediaStream.setInputTracksFromStream(o):this.mediaStream.openWithConstraints(r)).then(function(){i._publisher.info("get-user-media","succeeded",{data:{audioConstraints:r}},i),function(){if(i._status!==t.State.Connecting)return i._cleanupEventListeners(),void i.mediaStream.close();var e=function(e){var n=i._direction===t.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";i._publisher.info("connection",n,null,i);var r=v(i.mediaStream.version.getSDP()),o=r.codecName,s=r.codecParams;i._publisher.info("settings","codec",{codec_params:s,selected_codec:o},i),i._monitor.enable(e)},r="function"==typeof i.options.getSinkIds&&i.options.getSinkIds();if(Array.isArray(r)&&i.mediaStream._setSinkIds(r).catch(function(){}),i.pstream.addListener("hangup",i._onHangup),n=n||i.options.rtcConfiguration,i._direction===t.CallDirection.Incoming)i._isAnswered=!0,i.mediaStream.answerIncomingCall(i.parameters.CallSid,i.options.offerSdp,i.options.rtcConstraints,n,e);else{var o=Array.from(i.customParameters.entries()).map(function(e){return encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])}).join("&");i.pstream.once("answer",i._onAnswer.bind(i)),i.mediaStream.makeOutgoingCall(i.pstream.token,o,i.outboundConnectionId,i.options.rtcConstraints,n,e)}}()},function(e){var t,n;31208===e.code||-1!==["PermissionDeniedError","NotAllowedError"].indexOf(e.name)?(n=31208,t="User denied access to microphone, or the web browser did not allow microphone access at this address.",i._publisher.error("get-user-media","denied",{data:{audioConstraints:r,error:e}},i)):(n=31201,t="Error occurred while accessing microphone: "+e.name+(e.message?" ("+e.message+")":""),i._publisher.error("get-user-media","failed",{data:{audioConstraints:r,error:e}},i)),i._disconnect(),i.emit("error",{message:t,code:n})})}}else this._addHandler("accept",e)},t.prototype.cancel=function(e){this._log.warn(".cancel() is deprecated. Please use .ignore() instead."),e?this.ignore(e):this.ignore()},t.prototype.disconnect=function(e){"function"!=typeof e?this._disconnect():this._addHandler("disconnect",e)},t.prototype.error=function(e){"function"==typeof e&&this._addHandler("error",e)},t.prototype.getLocalStream=function(){return this.mediaStream&&this.mediaStream.stream},t.prototype.getRemoteStream=function(){return this.mediaStream&&this.mediaStream._remoteStream},t.prototype.ignore=function(e){"function"!=typeof e?this._status===t.State.Pending&&(this._status=t.State.Closed,this.emit("cancel"),this.mediaStream.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this)):this._addHandler("cancel",e)},t.prototype.isMuted=function(){return this.mediaStream.isMuted},t.prototype.mute=function(e){if(void 0===e&&(e=!0),"function"!=typeof e){var t=this.mediaStream.isMuted;this.mediaStream.mute(e);var n=this.mediaStream.isMuted;t!==n&&(this._publisher.info("connection",n?"muted":"unmuted",null,this),this.emit("mute",n,this))}else this._addHandler("mute",e)},t.prototype.postFeedback=function(e,n){if(void 0===e||null===e)return this._postFeedbackDeclined();if(!Object.values(t.FeedbackScore).includes(e))throw new c.InvalidArgumentError("Feedback score must be one of: "+Object.values(t.FeedbackScore));if(void 0!==n&&null!==n&&!Object.values(t.FeedbackIssue).includes(n))throw new c.InvalidArgumentError("Feedback issue must be one of: "+Object.values(t.FeedbackIssue));return this._publisher.info("feedback","received",{issue_name:n,quality_score:e},this,!0)},t.prototype.reject=function(e){"function"!=typeof e?this._status===t.State.Pending&&(this.pstream.reject(this.parameters.CallSid),this._status=t.State.Closed,this.emit("reject"),this.mediaStream.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this)):this._addHandler("reject",e)},t.prototype.sendDigits=function(e){if(e.match(/[^0-9*#w]/))throw new c.InvalidArgumentError("Illegal character passed into sendDigits");var t=[];e.split("").forEach(function(e){var n="w"!==e?"dtmf"+e:"";"dtmf*"===n&&(n="dtmfs"),"dtmf#"===n&&(n="dtmfh"),t.push(n)}),function e(n,i){var r=t.shift();r&&(i?i.play(r):n.get(r).play()),t.length&&setTimeout(e.bind(null,n),200)}(this._soundcache,this.options.dialtonePlayer);var n=this.mediaStream.getOrCreateDTMFSender();if(n){if(!("canInsertDTMF"in n)||n.canInsertDTMF)return this._log.info("Sending digits using RTCDTMFSender"),void function e(t){if(t.length){var i=t.shift();i&&i.length&&n.insertDTMF(i,y,_),setTimeout(e.bind(null,t),A)}}(e.split("w"));this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),null!==this.pstream&&"disconnected"!==this.pstream.status)this.pstream.dtmf(this.parameters.CallSid,e);else{var i={code:31e3,connection:this,message:"Could not send DTMF: Signaling channel is disconnected"};this.emit("error",i)}},t.prototype.status=function(){return this._status},t.prototype.unmute=function(){this._log.warn(".unmute() is deprecated. Please use .mute(false) to unmute a call instead."),this.mute(!1)},t.prototype.volume=function(e){window&&(window.AudioContext||window.webkitAudioContext)||this._log.warn("This browser does not support Connection.volume"),this._addHandler("volume",e)},t.prototype._addHandler=function(e,t){return x||(this._log.warn("Connection callback handlers (accept, cancel, disconnect, error, ignore, mute, reject,\n        volume) have been deprecated and will be removed in the next breaking release. Instead, the EventEmitter         interface can be used to set event listeners. Example: connection.on('"+e+"', handler)"),x=!0),this.addListener(e,t),this},t.prototype._checkVolume=function(e,t,n,i){var r=t>=10,o=0;return n===e&&(o=t),o>=10?this._emitWarning("audio-level-","constant-audio-"+i+"-level",10,o,!1):r&&this._emitWarning("audio-level-","constant-audio-"+i+"-level",10,o,!0),o},t.prototype._cleanupEventListeners=function(){var e=this,t=function(){e.pstream&&(e.pstream.removeListener("answer",e._onAnswer),e.pstream.removeListener("cancel",e._onCancel),e.pstream.removeListener("hangup",e._onHangup),e.pstream.removeListener("ringing",e._onRinging),e.pstream.removeListener("transportClose",e._onTransportClose))};t(),setTimeout(t,0)},t.prototype._createMetricPayload=function(){var e={call_sid:this.parameters.CallSid,dscp:!!this.options.dscp,sdk_version:h.RELEASE_VERSION,selected_region:this.options.selectedRegion};return this.options.gateway&&(e.gateway=this.options.gateway),this.options.region&&(e.region=this.options.region),e.direction=this._direction,e},t.prototype._disconnect=function(e,n){if(e="string"==typeof e?e:null,this._status===t.State.Open||this._status===t.State.Connecting||this._status===t.State.Reconnecting||this._status===t.State.Ringing){if(this._log.info("Disconnecting..."),null!==this.pstream&&"disconnected"!==this.pstream.status&&this.sendHangup){var i=this.parameters.CallSid||this.outboundConnectionId;i&&this.pstream.hangup(i,e)}this._cleanupEventListeners(),this.mediaStream.close(),n||this._publisher.info("connection","disconnected-by-local",null,this)}},t.prototype._maybeTransitionToOpen=function(){this.mediaStream&&"open"===this.mediaStream.status&&this._isAnswered&&(this._status=t.State.Open,this.emit("accept",this))},t.prototype._postFeedbackDeclined=function(){return this._publisher.info("feedback","received-none",null,this,!0)},t.prototype._publishMetrics=function(){var e=this;0!==this._metricsSamples.length&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(function(t){e._log.warn("Unable to post metrics to Insights. Received error:",t)})},t.prototype._setCallSid=function(e){var t=e.callsid;t&&(this.parameters.CallSid=t,this.mediaStream.callSid=t)},t.toString=function(){return"[Twilio.Connection class]"},t}(s.EventEmitter);!function(e){!function(e){e.Closed="closed",e.Connecting="connecting",e.Open="open",e.Pending="pending",e.Reconnecting="reconnecting",e.Ringing="ringing"}(e.State||(e.State={})),function(e){e.AudioLatency="audio-latency",e.ChoppyAudio="choppy-audio",e.DroppedCall="dropped-call",e.Echo="echo",e.NoisyCall="noisy-call",e.OneWayAudio="one-way-audio"}(e.FeedbackIssue||(e.FeedbackIssue={})),function(e){e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five"}(e.FeedbackScore||(e.FeedbackScore={})),function(e){e.Incoming="INCOMING",e.Outgoing="OUTGOING"}(e.CallDirection||(e.CallDirection={})),function(e){e.Opus="opus",e.PCMU="pcmu"}(e.Codec||(e.Codec={})),function(e){e.None="none",e.Timeout="timeout"}(e.IceGatheringFailureReason||(e.IceGatheringFailureReason={})),function(e){e.ConnectionDisconnected="ConnectionDisconnected",e.ConnectionFailed="ConnectionFailed",e.IceGatheringFailed="IceGatheringFailed",e.LowBytes="LowBytes"}(e.MediaFailure||(e.MediaFailure={}))}(T||(T={})),t.default=T},m3hW:function(e,t,n){"use strict";var i={r0:94.768,is:1.42611};function r(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)&&e>=0}e.exports={calculate:function(e,t,n){if(!r(e)||!r(t)||!r(n))return null;var o=function(e,t,n){var r=e+2*t+10,o=0;switch(!0){case r<160:o=i.r0-r/40;break;case r<1e3:o=i.r0-(r-120)/10;break;case r>=1e3:o=i.r0-r/100}var s=.01;switch(!0){case-1===n:s=0,o=0;break;case n<=o/2.5:s=2.5;break;case n>o/2.5&&n<100:s=.25}return o-=n*s}(e,t,n),s=1+.035*o+7e-6*o*(o-60)*(100-o);return s>=1&&s<4.6?s:null}}},mEdf:function(e,t){},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},n0T6:function(e,t,n){var i=n("Ibhu"),r=n("xnc9").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},nXuP:function(e,t,n){const i=n("P2cu"),r=n("5+9/"),o=n("pnVU"),{pick:s,installTimerFunctions:a}=n("7mji"),c=n("vveS"),l=n("Fy0/")("engine.io-client:polling-xhr");function u(){}const d=null!=new i({xdomain:!1}).responseType;class p extends o{constructor(e,t){super(),a(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=s(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new i(e);try{l("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=(()=>{this.onLoad()}),t.onerror=(()=>{this.onError(t.responseText)})):t.onreadystatechange=(()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof t.status?t.status:0)},0))}),l("xhr data %s",this.data),t.send(this.data)}catch(e){return void this.setTimeoutFn(()=>{this.onError(e)},0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}if(p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",f);else if("function"==typeof addEventListener){addEventListener("onpagehide"in c?"pagehide":"unload",f,!1)}function f(){for(let e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}e.exports=class extends r{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=d&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",e=>{this.onError("xhr post error",e)})}doPoll(){l("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",e=>{this.onError("xhr poll error",e)}),this.pollXhr=e}},e.exports.Request=p},o8cY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("yPK5"),r=n("Atx/"),o=function(){function e(e){this._log=(e&&e.LogLevelModule?e.LogLevelModule:i).getLogger(r.PACKAGE_NAME)}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this._log).debug.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this._log).error.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this._log).info.apply(e,t)},e.prototype.setDefaultLevel=function(e){this._log.setDefaultLevel(e)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this._log).warn.apply(e,t)},e.levels=i.levels,e}();t.default=o},oYPl:function(e,t,n){e.exports=n("63Gd")},ozHJ:function(e,t,n){var i,r;!function(o,s){"use strict";var a=Math.pow(2,-24),c=Math.pow(2,32),l=Math.pow(2,53);var u={encode:function(e){var t,n=new ArrayBuffer(256),i=new DataView(n),r=0;function o(e){for(var o=n.byteLength,s=r+e;o<s;)o*=2;if(o!==n.byteLength){var a=i;n=new ArrayBuffer(o),i=new DataView(n);for(var c=r+3>>2,l=0;l<c;++l)i.setUint32(4*l,a.getUint32(4*l))}return t=e,i}function a(){r+=t}function u(e){a(o(1).setUint8(r,e))}function d(e){for(var t=o(e.length),n=0;n<e.length;++n)t.setUint8(r+n,e[n]);a()}function p(e,t){var n;t<24?u(e<<5|t):t<256?(u(e<<5|24),u(t)):t<65536?(u(e<<5|25),n=t,a(o(2).setUint16(r,n))):t<4294967296?(u(e<<5|26),function(e){a(o(4).setUint32(r,e))}(t)):(u(e<<5|27),function(e){var t=e%c,n=(e-t)/c,i=o(8);i.setUint32(r,n),i.setUint32(r+4,t),a()}(t))}if(function e(t){var n;if(!1===t)return u(244);if(!0===t)return u(245);if(null===t)return u(246);if(t===s)return u(247);switch(typeof t){case"number":if(Math.floor(t)===t){if(0<=t&&t<=l)return p(0,t);if(-l<=t&&t<0)return p(1,-(t+1))}return u(251),function(e){a(o(8).setFloat64(r,e))}(t);case"string":var i=[];for(n=0;n<t.length;++n){var c=t.charCodeAt(n);c<128?i.push(c):c<2048?(i.push(192|c>>6),i.push(128|63&c)):c<55296?(i.push(224|c>>12),i.push(128|c>>6&63),i.push(128|63&c)):(c=(1023&c)<<10,c|=1023&t.charCodeAt(++n),c+=65536,i.push(240|c>>18),i.push(128|c>>12&63),i.push(128|c>>6&63),i.push(128|63&c))}return p(3,i.length),d(i);default:var f;if(Array.isArray(t))for(p(4,f=t.length),n=0;n<f;++n)e(t[n]);else if(t instanceof Uint8Array)p(2,t.length),d(t);else{var h=Object.keys(t);for(p(5,f=h.length),n=0;n<f;++n){var m=h[n];e(m),e(t[m])}}}}(e),"slice"in n)return n.slice(0,r);for(var f=new ArrayBuffer(r),h=new DataView(f),m=0;m<r;++m)h.setUint8(m,i.getUint8(m));return f},decode:function(e,t,n){var i=new DataView(e),r=0;function o(e,t){return r+=t,e}function l(t){return o(new Uint8Array(e,r,t),t)}function u(){return o(i.getUint8(r),1)}function d(){return o(i.getUint16(r),2)}function p(){return o(i.getUint32(r),4)}function f(){return 255===i.getUint8(r)&&(r+=1,!0)}function h(e){if(e<24)return e;if(24===e)return u();if(25===e)return d();if(26===e)return p();if(27===e)return p()*c+p();if(31===e)return-1;throw"Invalid length encoding"}function m(e){var t=u();if(255===t)return-1;var n=h(31&t);if(n<0||t>>5!==e)throw"Invalid indefinite length element";return n}function v(e,t){for(var n=0;n<t;++n){var i=u();128&i&&(i<224?(i=(31&i)<<6|63&u(),t-=1):i<240?(i=(15&i)<<12|(63&u())<<6|63&u(),t-=2):(i=(15&i)<<18|(63&u())<<12|(63&u())<<6|63&u(),t-=3)),i<65536?e.push(i):(i-=65536,e.push(55296|i>>10),e.push(56320|1023&i))}}"function"!=typeof t&&(t=function(e){return e}),"function"!=typeof n&&(n=function(){return s});var g=function e(){var c,p,g=u(),_=g>>5,A=31&g;if(7===_)switch(A){case 25:return function(){var e=new ArrayBuffer(4),t=new DataView(e),n=d(),i=32768&n,r=31744&n,o=1023&n;if(31744===r)r=261120;else if(0!==r)r+=114688;else if(0!==o)return o*a;return t.setUint32(0,i<<16|r<<13|o<<13),t.getFloat32(0)}();case 26:return o(i.getFloat32(r),4);case 27:return o(i.getFloat64(r),8)}if((p=h(A))<0&&(_<2||6<_))throw"Invalid length";switch(_){case 0:return p;case 1:return-1-p;case 2:if(p<0){for(var y=[],b=0;(p=m(_))>=0;)b+=p,y.push(l(p));var w=new Uint8Array(b),C=0;for(c=0;c<y.length;++c)w.set(y[c],C),C+=y[c].length;return w}return l(p);case 3:var S=[];if(p<0)for(;(p=m(_))>=0;)v(S,p);else v(S,p);return String.fromCharCode.apply(null,S);case 4:var E;if(p<0)for(E=[];!f();)E.push(e());else for(E=new Array(p),c=0;c<p;++c)E[c]=e();return E;case 5:var k={};for(c=0;c<p||p<0&&!f();++c)k[e()]=e();return k;case 6:return t(e(),p);case 7:switch(p){case 20:return!1;case 21:return!0;case 22:return null;case 23:return s;default:return n(p)}}}();if(r!==e.byteLength)throw"Remaining bytes";return g}};(r="function"==typeof(i=u)?i.call(t,n,t,e):i)===s||(e.exports=r)}()},pA9u:function(e,t){var n=32767,i="undefined"!=typeof window?window.RTCStatsReport:void 0;function r(e){if(!(this instanceof r))return new r(e);var t=this;Object.defineProperties(this,{size:{enumerable:!0,get:function(){return t._map.size}},_map:{value:e}}),this[Symbol.iterator]=e[Symbol.iterator]}function o(e){return{type:"transport",id:e.id,timestamp:Date.parse(e.timestamp),bytesSent:void 0,bytesReceived:void 0,rtcpTransportStatsId:void 0,dtlsState:void 0,selectedCandidatePairId:e.stat("selectedCandidatePairId"),localCertificateId:e.stat("localCertificateId"),remoteCertificateId:e.stat("remoteCertificateId")}}function s(e,t){return{id:e.id,timestamp:Date.parse(e.timestamp),ssrc:e.stat("ssrc"),associateStatsId:void 0,isRemote:void 0,mediaType:e.stat("mediaType"),trackId:"track-"+e.id,transportId:e.stat("transportId"),codecId:"codec-"+e.id,firCount:t?l(e,"googFirsSent"):void 0,pliCount:l(e,t?"googPlisSent":"googPlisReceived"),nackCount:l(e,t?"googNacksSent":"googNacksReceived"),sliCount:void 0,qpSum:l(e,"qpSum")}}function a(e,t){return{type:t?"remote-candidate":"local-candidate",id:e.id,timestamp:Date.parse(e.timestamp),transportId:void 0,isRemote:t,ip:e.stat("ipAddress"),port:l(e,"portNumber"),protocol:e.stat("transport"),candidateType:function(e){switch(e){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";case"host":case"relay":default:return e}}(e.stat("candidateType")),priority:u(e,"priority"),url:void 0,relayProtocol:void 0,deleted:void 0}}function c(e){return isNaN(e)||""===e?void 0:parseInt(e,10)/1e3}function l(e,t){var n=e.stat(t);return p(e,t)?parseInt(n,10):void 0}function u(e,t){var n=e.stat(t);return p(e,t)?parseFloat(n):void 0}function d(e,t){var n=e.stat(t);return p(e,t)?"true"===n||!0===n:void 0}function p(e,t){var n=e.stat(t);return void 0!==n&&""!==n}i&&(r.prototype=Object.create(i.prototype),r.prototype.constructor=r),["entries","forEach","get","has","keys","values"].forEach(function(e){r.prototype[e]=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(t=this._map)[e].apply(t,n)}}),r.fromArray=function(e){return new r(e.reduce(function(e,t){return e.set(t.id,t),e},new Map))},r.fromRTCStatsResponse=function(e){var t,i=new Map,f=e.result().reduce(function(e,r){var f=r.id;switch(r.type){case"googCertificate":e.set(f,function(e){return{type:"certificate",id:e.id,timestamp:Date.parse(e.timestamp),fingerprint:e.stat("googFingerprint"),fingerprintAlgorithm:e.stat("googFingerprintAlgorithm"),base64Certificate:e.stat("googDerBase64"),issuerCertificateId:e.stat("googIssuerId")}}(r));break;case"datachannel":e.set(f,function(e){return{type:"data-channel",id:e.id,timestamp:Date.parse(e.timestamp),label:e.stat("label"),protocol:e.stat("protocol"),datachannelid:e.stat("datachannelid"),transportId:e.stat("transportId"),state:e.stat("state"),messagesSent:void 0,bytesSent:void 0,messagesReceived:void 0,bytesReceived:void 0}}(r));break;case"googCandidatePair":d(r,"googActiveConnection")&&(t=f),e.set(f,function(e){return{type:"candidate-pair",id:e.id,timestamp:Date.parse(e.timestamp),transportId:e.stat("googChannelId"),localCandidateId:e.stat("localCandidateId"),remoteCandidateId:e.stat("remoteCandidateId"),state:void 0,priority:void 0,nominated:void 0,writable:d(e,"googWritable"),readable:void 0,bytesSent:l(e,"bytesSent"),bytesReceived:l(e,"bytesReceived"),lastPacketSentTimestamp:void 0,lastPacketReceivedTimestamp:void 0,totalRoundTripTime:void 0,currentRoundTripTime:c(e.stat("googRtt")),availableOutgoingBitrate:void 0,availableIncomingBitrate:void 0,requestsReceived:l(e,"requestsReceived"),requestsSent:l(e,"requestsSent"),responsesReceived:l(e,"responsesReceived"),responsesSent:l(e,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,consentRequestsSent:l(e,"consentRequestsSent")}}(r));break;case"localcandidate":e.set(f,a(r,!1));break;case"remotecandidate":e.set(f,a(r,!0));break;case"ssrc":p(r,"packetsReceived")?e.set("rtp-"+f,function(e){var t=s(e,!0);return Object.assign(t,{type:"inbound-rtp",packetsReceived:l(e,"packetsReceived"),bytesReceived:l(e,"bytesReceived"),packetsLost:l(e,"packetsLost"),jitter:c(e.stat("googJitterReceived")),fractionLost:void 0,roundTripTime:c(e.stat("googRtt")),packetsDiscarded:void 0,packetsRepaired:void 0,burstPacketsLost:void 0,burstPacketsDiscarded:void 0,burstLossCount:void 0,burstDiscardCount:void 0,burstLossRate:void 0,burstDiscardRate:void 0,gapLossRate:void 0,gapDiscardRate:void 0,framesDecoded:l(e,"framesDecoded")}),t}(r)):e.set("rtp-"+f,function(e){var t=s(e,!1);return Object.assign(t,{type:"outbound-rtp",remoteTimestamp:void 0,packetsSent:l(e,"packetsSent"),bytesSent:l(e,"bytesSent"),targetBitrate:void 0,framesEncoded:l(e,"framesEncoded")}),t}(r)),e.set("track-"+f,function(e){return{type:"track",id:e.id,timestamp:Date.parse(e.timestamp),trackIdentifier:e.stat("googTrackId"),remoteSource:void 0,ended:void 0,kind:e.stat("mediaType"),detached:void 0,ssrcIds:void 0,frameWidth:p(e,"googFrameWidthReceived")?l(e,"googFrameWidthReceived"):l(e,"googFrameWidthSent"),frameHeight:p(e,"googFrameHeightReceived")?l(e,"googFrameHeightReceived"):l(e,"googFrameHeightSent"),framesPerSecond:void 0,framesSent:l(e,"framesEncoded"),framesReceived:void 0,framesDecoded:l(e,"framesDecoded"),framesDropped:void 0,framesCorrupted:void 0,partialFramesLost:void 0,fullFramesLost:void 0,audioLevel:p(e,"audioOutputLevel")?l(e,"audioOutputLevel")/n:(l(e,"audioInputLevel")||0)/n,echoReturnLoss:u(e,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:u(e,"googEchoCancellationReturnLossEnhancement")}}(r)),e.set("codec-"+f,function(e){return{type:"codec",id:e.id,timestamp:Date.parse(e.timestamp),payloadType:void 0,mimeType:e.stat("mediaType")+"/"+e.stat("googCodecName"),clockRate:void 0,channels:void 0,sdpFmtpLine:void 0,implementation:void 0}}(r));break;case"googComponent":var h=o(r);i.set(h.selectedCandidatePairId,f),e.set(f,o(r))}return e},new Map);if(t){var h=i.get(t);h&&(f.get(h).dtlsState="connected")}return new r(f)},e.exports=r},pFYg:function(e,t,n){"use strict";t.__esModule=!0;var i=s(n("Zzip")),r=s(n("5QVw")),o="function"==typeof r.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof r.default&&"symbol"===o(i.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":o(e)}},pnVU:function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},psuf:function(e,t,n){const i=n("Xqxu");e.exports=((e,t)=>new i(e,t)),e.exports.Socket=i,e.exports.protocol=i.protocol,e.exports.Transport=n("ZOjo"),e.exports.transports=n("Y+et"),e.exports.parser=n("qFti")},qFti:function(e,t,n){const i=n("uOMm"),r=n("uVmP"),o=String.fromCharCode(30);e.exports={protocol:4,encodePacket:i,encodePayload:(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((e,a)=>{i(e,!1,e=>{r[a]=e,++s===n&&t(r.join(o))})})},decodePacket:r,decodePayload:(e,t)=>{const n=e.split(o),i=[];for(let e=0;e<n.length;e++){const o=r(n[e],t);if(i.push(o),"error"===o.type)break}return i}}},qkKv:function(e,t,n){var i=n("FeBl"),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},qyJz:function(e,t,n){"use strict";var i=n("+ZMJ"),r=n("kM2E"),o=n("sB3e"),s=n("msXi"),a=n("Mhyx"),c=n("QRG4"),l=n("fBQ2"),u=n("3fs2");r(r.S+r.F*!n("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,p=o(e),f="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=0,_=u(p);if(v&&(m=i(m,h>2?arguments[2]:void 0,2)),void 0==_||f==Array&&a(_))for(n=new f(t=c(p.length));t>g;g++)l(n,g,v?m(p[g],g):p[g]);else for(d=_.call(p),n=new f;!(r=d.next()).done;g++)l(n,g,v?s(d,m,[r.value,g],!0):r.value);return n.length=g,n}})},rtsM:function(e,t,n){var i;!function(){"use strict";for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",r=new Uint8Array(256),o=0;o<n.length;o++)r[n.charCodeAt(o)]=o;var s=function(e){var t,i=new Uint8Array(e),r=i.length,o="";for(t=0;t<r;t+=3)o+=n[i[t]>>2],o+=n[(3&i[t])<<4|i[t+1]>>4],o+=n[(15&i[t+1])<<2|i[t+2]>>6],o+=n[63&i[t+2]];return r%3==2?o=o.substring(0,o.length-1):r%3==1&&(o=o.substring(0,o.length-2)),o},a=function(e){var t,n,i,o,s,a=.75*e.length,c=e.length,l=0,u=new ArrayBuffer(a),d=new Uint8Array(u);for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)],i=r[e.charCodeAt(t+1)],o=r[e.charCodeAt(t+2)],s=r[e.charCodeAt(t+3)],d[l++]=n<<2|i>>4,d[l++]=(15&i)<<4|o>>2,d[l++]=(3&o)<<6|63&s;return u};void 0!==e&&void 0!==e.exports?e.exports={encode:s,decode:a}:void 0===(i=function(){return{encode:s,decode:a}}.apply(t,[]))||(e.exports=i)}()},sOR5:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},t4n9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const i="function"==typeof ArrayBuffer,r=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);function c(e){return i&&(e instanceof ArrayBuffer||r(e))||s&&e instanceof Blob||a&&e instanceof File}t.isBinary=c,t.hasBinary=function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(e(t[n]))return!0;return!1}if(c(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1}},tb8o:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("vzCy"),s=n("6D9g"),a=n("o8cY"),c=n("3bUl"),l=n("iX30"),u=n("SBlr"),d=n("Jm5Q"),p={audioinput:"Audio Input",audiooutput:"Audio Output"},f=function(e){function t(t,n,i,r){var o=e.call(this)||this;o.availableInputDevices=new Map,o.availableOutputDevices=new Map,o._audioConstraints=null,o._inputDevice=null,o._inputStream=null,o._isPollingInputVolume=!1,o._log=a.default.getInstance(),o._unknownDeviceIndexes={audioinput:{},audiooutput:{}},o._removeLostInput=function(e){if(!o.inputDevice||o.inputDevice.deviceId!==e.deviceId)return!1;o._replaceStream(null),o._inputDevice=null,o._maybeStopPollingVolume();var t=o.availableInputDevices.get("default")||Array.from(o.availableInputDevices.values())[0];return t&&o.setInputDevice(t.deviceId),!0},o._removeLostOutput=function(e){var t=o.speakerDevices.delete(e),n=o.ringtoneDevices.delete(e);return t||n},o._updateAvailableDevices=function(){return o._mediaDevices?o._mediaDevices.enumerateDevices().then(function(e){o._updateDevices(e.filter(function(e){return"audiooutput"===e.kind}),o.availableOutputDevices,o._removeLostOutput),o._updateDevices(e.filter(function(e){return"audioinput"===e.kind}),o.availableInputDevices,o._removeLostInput);var t=o.availableOutputDevices.get("default")||Array.from(o.availableOutputDevices.values())[0];[o.speakerDevices,o.ringtoneDevices].forEach(function(e){!e.get().size&&o.availableOutputDevices.size&&o.isOutputSelectionSupported&&e.set(t.deviceId).catch(function(e){o._log.warn("Unable to set audio output devices. "+e)})})}):Promise.reject("Enumeration not supported")},r=Object.assign({AudioContext:"undefined"!=typeof AudioContext&&AudioContext,setSinkId:"undefined"!=typeof HTMLAudioElement&&HTMLAudioElement.prototype.setSinkId},r),o._getUserMedia=i,o._mediaDevices=r.mediaDevices||l,o._onActiveInputChanged=n;var s=!(!r.AudioContext&&!r.audioContext),u=!(!o._mediaDevices||!o._mediaDevices.enumerateDevices),d="function"==typeof r.setSinkId;return o.isOutputSelectionSupported=u&&d,o.isVolumeSupported=s,r.enabledSounds&&o._addEnabledSounds(r.enabledSounds),o.isVolumeSupported&&(o._audioContext=r.audioContext||r.AudioContext&&new r.AudioContext,o._audioContext&&(o._inputVolumeAnalyser=o._audioContext.createAnalyser(),o._inputVolumeAnalyser.fftSize=32,o._inputVolumeAnalyser.smoothingTimeConstant=.3)),o.ringtoneDevices=new c.default("ringtone",o.availableOutputDevices,t,o.isOutputSelectionSupported),o.speakerDevices=new c.default("speaker",o.availableOutputDevices,t,o.isOutputSelectionSupported),o.addListener("newListener",function(e){"inputVolume"===e&&o._maybeStartPollingVolume()}),o.addListener("removeListener",function(e){"inputVolume"===e&&o._maybeStopPollingVolume()}),o.once("newListener",function(){o.isOutputSelectionSupported||o._log.warn("Warning: This browser does not support audio output selection."),o.isVolumeSupported||o._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),u&&o._initializeEnumeration(),o}return r(t,e),Object.defineProperty(t.prototype,"audioConstraints",{get:function(){return this._audioConstraints},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDevice",{get:function(){return this._inputDevice},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputStream",{get:function(){return this._inputStream},enumerable:!0,configurable:!0}),t.prototype._maybeStartPollingVolume=function(){var e=this;if(this.isVolumeSupported&&this._inputStream&&(this._updateVolumeSource(),!this._isPollingInputVolume&&this._inputVolumeAnalyser)){var t=this._inputVolumeAnalyser.frequencyBinCount,n=new Uint8Array(t);this._isPollingInputVolume=!0;var i=function(){if(e._isPollingInputVolume){if(e._inputVolumeAnalyser){e._inputVolumeAnalyser.getByteFrequencyData(n);var t=u.average(n);e.emit("inputVolume",t/255)}requestAnimationFrame(i)}};requestAnimationFrame(i)}},t.prototype._maybeStopPollingVolume=function(){this.isVolumeSupported&&(!this._isPollingInputVolume||this._inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))},t.prototype._unbind=function(){if(!this._mediaDevices)throw new s.NotSupportedError("Enumeration is not supported");this._mediaDevices.removeEventListener&&(this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices),this._mediaDevices.removeEventListener("deviceinfochange",this._updateAvailableDevices))},t.prototype.setAudioConstraints=function(e){return this._audioConstraints=Object.assign({},e),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()},t.prototype.setInputDevice=function(e){return u.isFirefox()?Promise.reject(new s.NotSupportedError("Firefox does not currently support opening multiple audio input tracks simultaneously, even across different tabs. As a result, Device.audio.setInputDevice is disabled on Firefox until support is added.\nRelated BugZilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324")):this._setInputDevice(e,!1)},t.prototype.unsetAudioConstraints=function(){return this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()},t.prototype.unsetInputDevice=function(){var e=this;return this.inputDevice?this._onActiveInputChanged(null).then(function(){e._replaceStream(null),e._inputDevice=null,e._maybeStopPollingVolume()}):Promise.resolve()},t.prototype._addEnabledSounds=function(e){var t=this;Object.keys(e).forEach(function(n){t[n]=function(t,n){return void 0!==n&&(e[t]=n),e[t]}.bind(null,n)})},t.prototype._getUnknownDeviceIndex=function(e){var t=e.deviceId,n=e.kind,i=this._unknownDeviceIndexes[n][t];return i||(i=Object.keys(this._unknownDeviceIndexes[n]).length+1,this._unknownDeviceIndexes[n][t]=i),i},t.prototype._initializeEnumeration=function(){var e=this;if(!this._mediaDevices)throw new s.NotSupportedError("Enumeration is not supported");this._mediaDevices.addEventListener&&(this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._mediaDevices.addEventListener("deviceinfochange",this._updateAvailableDevices)),this._updateAvailableDevices().then(function(){e.isOutputSelectionSupported&&Promise.all([e.speakerDevices.set("default"),e.ringtoneDevices.set("default")]).catch(function(t){e._log.warn("Warning: Unable to set audio output devices. "+t)})})},t.prototype._replaceStream=function(e){this._inputStream&&this._inputStream.getTracks().forEach(function(e){e.stop()}),this._inputStream=e},t.prototype._setInputDevice=function(e,t){var n=this;if("string"!=typeof e)return Promise.reject(new s.InvalidArgumentError("Must specify the device to set"));var i=this.availableInputDevices.get(e);if(!i)return Promise.reject(new s.InvalidArgumentError("Device not found: "+e));if(this._inputDevice&&this._inputDevice.deviceId===e&&this._inputStream){if(!t)return Promise.resolve();this._inputStream.getTracks().forEach(function(e){e.stop()})}var r={audio:Object.assign({deviceId:{exact:e}},this.audioConstraints)};return this._getUserMedia(r).then(function(e){return n._onActiveInputChanged(e).then(function(){n._replaceStream(e),n._inputDevice=i,n._maybeStartPollingVolume()})})},t.prototype._updateDevices=function(e,t,n){var i=this,r=e.map(function(e){return e.deviceId}),o=Array.from(t.values()).map(function(e){return e.deviceId}),s=[],a=u.difference(o,r);a.forEach(function(e){var i=t.get(e);i&&(t.delete(e),n(i)&&s.push(i))});var c=!1;e.forEach(function(e){var n=t.get(e.deviceId),r=i._wrapMediaDeviceInfo(e);n&&n.label===r.label||(t.set(e.deviceId,r),c=!0)}),(c||a.length)&&(null!==this.inputDevice&&"default"===this.inputDevice.deviceId&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),this._setInputDevice(this.inputDevice.deviceId,!0)),this.emit("deviceChange",s))},t.prototype._updateVolumeSource=function(){this._inputStream&&this._audioContext&&this._inputVolumeAnalyser&&(this._inputVolumeSource&&this._inputVolumeSource.disconnect(),this._inputVolumeSource=this._audioContext.createMediaStreamSource(this._inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser))},t.prototype._wrapMediaDeviceInfo=function(e){var t={deviceId:e.deviceId,groupId:e.groupId,kind:e.kind,label:e.label};if(!t.label)if("default"===t.deviceId)t.label="Default";else{var n=this._getUnknownDeviceIndex(e);t.label="Unknown "+p[t.kind]+" Device "+n}return new d(t)},t}(o.EventEmitter);f||(f={}),t.default=f},uAzU:function(e,t,n){const i=n("vveS"),r="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0);e.exports={WebSocket:i.WebSocket||i.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:r}},uOMm:function(e,t,n){const{PACKET_TYPES:i}=n("5e3N"),r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,s=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=(({type:e,data:t},n,a)=>r&&t instanceof Blob?n?a(t):s(t,a):o&&(t instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer)(t))?n?a(t):s(new Blob([t]),a):a(i[e]+(t||"")))},uVmP:function(e,t,n){const{PACKET_TYPES_REVERSE:i,ERROR_PACKET:r}=n("5e3N");let o;"function"==typeof ArrayBuffer&&(o=n("kVGU"));const s=(e,t)=>{if(o){const n=o.decode(e);return a(n,t)}return{base64:!0,data:e}},a=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=((e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:s(e.substring(1),t)}:i[n]?e.length>1?{type:i[n],data:e.substring(1)}:{type:i[n]}:r})},uXxT:function(e,t,n){"use strict";var i=n("FDmz").AsyncQueue,r=n("FIts"),o=n("6D9g").InvalidArgumentError;function s(e,t,n){if(!(this instanceof s))return new s(e,t,n);if(!e||!t)throw new o("name and url are required arguments");(n=Object.assign({AudioFactory:"undefined"!=typeof Audio?Audio:null,maxDuration:0,shouldLoop:!1},n)).AudioPlayer=n.audioContext?r.bind(r,n.audioContext):n.AudioFactory,Object.defineProperties(this,{_activeEls:{value:new Map},_Audio:{value:n.AudioPlayer},_isSinkSupported:{value:null!==n.AudioFactory&&"function"==typeof n.AudioFactory.prototype.setSinkId},_maxDuration:{value:n.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new i},_playPromise:{value:null,writable:!0},_shouldLoop:{value:n.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get:function(){return!!this._playPromise}},name:{enumerable:!0,value:e},url:{enumerable:!0,value:t}}),this._Audio&&this._play(!0,!1)}function a(e){e&&(e.pause(),e.src="",e.srcObject=null,e.load())}s.prototype._playAudioElement=function(e,t,n){var i=this,r=this._activeEls.get(e);if(!r)throw new o('sinkId: "'+e+"\" doesn't have an audio element");return r.muted=!!t,r.loop=!!n,r.play().then(function(){return r}).catch(function(t){throw a(r),i._activeEls.delete(e),t})},s.prototype._play=function(e,t){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),t="boolean"==typeof t?t:this._shouldLoop;var n=this;return this._playPromise=Promise.all(this._sinkIds.map(function(i){if(!n._Audio)return Promise.resolve();var r=n._activeEls.get(i);return r?n._playAudioElement(i,e,t):("function"==typeof(r=new n._Audio(n.url)).setAttribute&&r.setAttribute("crossorigin","anonymous"),new Promise(function(e){r.addEventListener("canplaythrough",e)}).then(function(){return(n._isSinkSupported?r.setSinkId(i):Promise.resolve()).then(function(){return n._activeEls.set(i,r),n._playPromise?n._playAudioElement(i,e,t):Promise.resolve()})}))}))},s.prototype._stop=function(){var e=this;this._activeEls.forEach(function(t,n){e._sinkIds.includes(n)?(t.pause(),t.currentTime=0):(a(t),e._activeEls.delete(n))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null},s.prototype.setSinkIds=function(e){this._isSinkSupported&&(e=e.forEach?e:[e],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(e)))},s.prototype.stop=function(){var e=this;this._operations.enqueue(function(){return e._stop(),Promise.resolve()})},s.prototype.play=function(){var e=this;return this._operations.enqueue(function(){return e._play()})},e.exports=s},ujcs:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?r-1:0,p=n?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+d],d+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=l}return(f?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var s,a,c,l=8*o-r-1,u=(1<<l)-1,d=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,h=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+f]=255&a,f+=h,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;e[n+f]=255&s,f+=h,s/=256,l-=8);e[n+f-h]|=128*m}},vBgO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("vzCy"),r=n("lOtu");t.Connection=r.default;var o=n("QqWh");t.Device=o.default;var s=n("gAEt");t.PreflightTest=s.PreflightTest;var a,c=n("KI75");function l(){a=new o.default,Object.getOwnPropertyNames(o.default.prototype).concat(Object.getOwnPropertyNames(i.EventEmitter.prototype)).filter(function(e){return"function"==typeof o.default.prototype[e]}).filter(function(e){return"destroy"!==e}).forEach(function(e){o.default[e]=o.default.prototype[e].bind(a)})}t.PStream=c,Object.defineProperty(o.default,"instance",{get:function(){return a},set:function(e){null===e&&(a=null)}}),o.default.destroy=function(){a&&a.destroy(),l()},l(),Object.getOwnPropertyNames(a).filter(function(e){return"function"!=typeof o.default.prototype[e]}).forEach(function(e){Object.defineProperty(o.default,e,{get:function(){if(a)return a[e]},set:function(t){a&&(a[e]=t)}})})},vdhV:function(e,t,n){var i;window,i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=6)}([function(e,t,n){var i=n(8);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),(0,n(4).default)("7ec05f6c",i,!1,{})},function(e,t,n){var i=n(10);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),(0,n(4).default)("3453d19d",i,!1,{})},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[i].concat(s).concat([o]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];null!=o&&(i[o]=!0)}for(r=0;r<e.length;r++){var s=e[r];null!=s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t){e.exports="data:application/vnd.ms-fontobject;base64,aAUAAMQEAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAUdPJHwAAAAAAAAAAAAAAAAAAAAAAAA4AaQBjAG8AbQBvAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBpAGMAbwBtAG8AbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDxIFrAAAALwAAABgY21hcBdW0okAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmpZ+jMAAAAXgAAAD8aGVhZA/FmAgAAAJ0AAAANmhoZWEHgAPIAAACrAAAACRobXR4EgABvgAAAtAAAAAcbG9jYQCSAOIAAALsAAAAEG1heHAACQAfAAAC/AAAACBuYW1lmUoJ+wAAAxwAAAGGcG9zdAADAAAAAASkAAAAIAADA4ABkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkCA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpAv/9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAVgEBA74CgQAcAAABMhceARcWFwcmJy4BJyYjIgYHFyERFzY3PgE3NgIWSkNDbykpF2QQIB9VMzQ5P3AtnP6AmB0iIkspKAJVFxhSODlCIDMrKz4REislmgGAmhkVFBwICAABANYAgQMqAtUACwAAAQcXBycHJzcnNxc3Ayru7jzu7jzu7jzu7gKZ7u487u487u487u4AAQCSAIEDgAK9AAUAACUBFwEnNwGAAcQ8/gDuPPkBxDz+AO48AAAAAAEAAAAAAAAfydNRXw889QALBAAAAAAA1nUqGwAAAADWdSobAAAAAAO+AtUAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAA74AAQAAAAAAAAAAAAAAAAAAAAcEAAAAAAAAAAAAAAACAAAABAAAVgQAANYEAACSAAAAAAAKABQAHgBQAGoAfgABAAAABwAdAAEAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],s=o[0],a={id:e+":"+r,css:o[1],media:o[2],sourceMap:o[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}n.r(t),n.d(t,"default",function(){return h});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=r&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,l=!1,u=function(){},d=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,r){l=n,d=r||{};var s=i(e,t);return m(s),function(t){for(var n=[],r=0;r<s.length;r++){var a=s[r];(c=o[a.id]).refs--,n.push(c)}for(t?m(s=i(e,t)):s=[],r=0;r<n.length;r++){var c;if(0===(c=n[r]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],i=o[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(g(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(g(n.parts[r]));o[n.id]={id:n.id,refs:1,parts:s}}}}function v(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function g(e){var t,n,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(l)return u;i.parentNode.removeChild(i)}if(f){var r=c++;i=a||(a=v()),t=y.bind(null,i,r,!1),n=y.bind(null,i,r,!0)}else i=v(),t=function(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),d.ssrId&&e.setAttribute(p,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var _,A=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function y(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=A(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}},function(e,t,n){"use strict";var i=Array.isArray,r=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var s,a,c,l=i(t),u=i(n);if(l&&u){if((a=t.length)!=n.length)return!1;for(s=a;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(l!=u)return!1;var d=t instanceof Date,p=n instanceof Date;if(d!=p)return!1;if(d&&p)return t.getTime()==n.getTime();var f=t instanceof RegExp,h=n instanceof RegExp;if(f!=h)return!1;if(f&&h)return t.toString()==n.toString();var m=r(t);if((a=m.length)!==r(n).length)return!1;for(s=a;0!=s--;)if(!o.call(n,m[s]))return!1;for(s=a;0!=s--;)if(!e(t[c=m[s]],n[c]))return!1;return!0}return t!=t&&n!=n}},function(e,t,n){e.exports=n(14)},function(e,t,n){"use strict";var i=n(0);n.n(i).a},function(e,t,n){(e.exports=n(2)(!0)).push([e.i,".ti-tag-input[data-v-108f4f13] {\n  background-color: transparent;\n  color: inherit;\n  border: none;\n  padding: 0px;\n  margin: 0px;\n  display: flex;\n  top: 0px;\n  position: absolute;\n  width: 100%;\n  line-height: inherit;\n}\n.ti-tag-input[data-v-108f4f13]::-ms-clear {\n  display: none;\n}\ninput[data-v-108f4f13]:focus {\n  outline: none;\n}\ninput[disabled][data-v-108f4f13] {\n  background-color: transparent;\n}\n","",{version:3,sources:["C:/Users/johan/dev/vue-tags-input/vue-tags-input/C:/Users/johan/dev/vue-tags-input/vue-tags-input/tag-input.vue"],names:[],mappings:"AAAA;EACE,8BAA8B;EAC9B,eAAe;EACf,aAAa;EACb,aAAa;EACb,YAAY;EACZ,cAAc;EACd,SAAS;EACT,mBAAmB;EACnB,YAAY;EACZ,qBAAqB;CAAE;AAEzB;EACE,cAAc;CAAE;AAElB;EACE,cAAc;CAAE;AAElB;EACE,8BAA8B;CAAE",file:"tag-input.vue?vue&type=style&index=0&id=108f4f13&lang=css&scoped=true&",sourcesContent:[".ti-tag-input {\n  background-color: transparent;\n  color: inherit;\n  border: none;\n  padding: 0px;\n  margin: 0px;\n  display: flex;\n  top: 0px;\n  position: absolute;\n  width: 100%;\n  line-height: inherit; }\n\n.ti-tag-input::-ms-clear {\n  display: none; }\n\ninput:focus {\n  outline: none; }\n\ninput[disabled] {\n  background-color: transparent; }\n"],sourceRoot:""}])},function(e,t,n){"use strict";var i=n(1);n.n(i).a},function(e,t,n){t=e.exports=n(2)(!0);var i=n(11),r=i(n(3)),o=i(n(3)+"#iefix"),s=i(n(12)),a=i(n(13));t.push([e.i,"@font-face {\n  font-family: 'icomoon';\n  src: url("+r+");\n  src: url("+o+') format("embedded-opentype"), url('+s+') format("truetype"), url('+a+') format("woff");\n  font-weight: normal;\n  font-style: normal;\n}\n[class^="ti-icon-"][data-v-61d92e31], [class*=" ti-icon-"][data-v-61d92e31] {\n  font-family: \'icomoon\' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.ti-icon-check[data-v-61d92e31]:before {\n  content: "\\e902";\n}\n.ti-icon-close[data-v-61d92e31]:before {\n  content: "\\e901";\n}\n.ti-icon-undo[data-v-61d92e31]:before {\n  content: "\\e900";\n}\nul[data-v-61d92e31] {\n  margin: 0px;\n  padding: 0px;\n  list-style-type: none;\n}\n*[data-v-61d92e31], *[data-v-61d92e31]:before, *[data-v-61d92e31]:after {\n  box-sizing: border-box;\n}\ninput[data-v-61d92e31]:focus {\n  outline: none;\n}\ninput[disabled][data-v-61d92e31] {\n  background-color: transparent;\n}\n.vue-tags-input[data-v-61d92e31] {\n  max-width: 450px;\n  position: relative;\n  background-color: #fff;\n}\ndiv.vue-tags-input.disabled[data-v-61d92e31] {\n  opacity: 0.5;\n}\ndiv.vue-tags-input.disabled *[data-v-61d92e31] {\n    cursor: default;\n}\n.ti-input[data-v-61d92e31] {\n  border: 1px solid #ccc;\n  display: flex;\n  padding: 4px;\n  flex-wrap: wrap;\n}\n.ti-tags[data-v-61d92e31] {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  line-height: 1em;\n}\n.ti-tag[data-v-61d92e31] {\n  background-color: #5C6BC0;\n  color: #fff;\n  border-radius: 2px;\n  display: flex;\n  padding: 3px 5px;\n  margin: 2px;\n  font-size: .85em;\n}\n.ti-tag[data-v-61d92e31]:focus {\n    outline: none;\n}\n.ti-tag .ti-content[data-v-61d92e31] {\n    display: flex;\n    align-items: center;\n}\n.ti-tag .ti-tag-center[data-v-61d92e31] {\n    position: relative;\n}\n.ti-tag span[data-v-61d92e31] {\n    line-height: .85em;\n}\n.ti-tag span.ti-hidden[data-v-61d92e31] {\n    padding-left: 14px;\n    visibility: hidden;\n    height: 0px;\n    white-space: pre;\n}\n.ti-tag .ti-actions[data-v-61d92e31] {\n    margin-left: 2px;\n    display: flex;\n    align-items: center;\n    font-size: 1.15em;\n}\n.ti-tag .ti-actions i[data-v-61d92e31] {\n      cursor: pointer;\n}\n.ti-tag[data-v-61d92e31]:last-child {\n    margin-right: 4px;\n}\n.ti-tag.ti-invalid[data-v-61d92e31], .ti-tag.ti-tag.ti-deletion-mark[data-v-61d92e31] {\n    background-color: #e54d42;\n}\n.ti-new-tag-input-wrapper[data-v-61d92e31] {\n  display: flex;\n  flex: 1 0 auto;\n  padding: 3px 5px;\n  margin: 2px;\n  font-size: .85em;\n}\n.ti-new-tag-input-wrapper input[data-v-61d92e31] {\n    flex: 1 0 auto;\n    min-width: 100px;\n    border: none;\n    padding: 0px;\n    margin: 0px;\n}\n.ti-new-tag-input[data-v-61d92e31] {\n  line-height: initial;\n}\n.ti-autocomplete[data-v-61d92e31] {\n  border: 1px solid #ccc;\n  border-top: none;\n  position: absolute;\n  width: 100%;\n  background-color: #fff;\n  z-index: 20;\n}\n.ti-item > div[data-v-61d92e31] {\n  cursor: pointer;\n  padding: 3px 6px;\n  width: 100%;\n}\n.ti-selected-item[data-v-61d92e31] {\n  background-color: #5C6BC0;\n  color: #fff;\n}\n',"",{version:3,sources:["C:/Users/johan/dev/vue-tags-input/vue-tags-input/C:/Users/johan/dev/vue-tags-input/vue-tags-input/vue-tags-input.scss"],names:[],mappings:"AAAA;EACE,uBAAuB;EACvB,mCAA8C;EAC9C,+JAAuM;EACvM,oBAAoB;EACpB,mBAAmB;CAAE;AAEvB;EACE,kCAAkC;EAClC,YAAY;EACZ,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,qBAAqB;EACrB,eAAe;EACf,oCAAoC;EACpC,mCAAmC;CAAE;AAEvC;EACE,iBAAiB;CAAE;AAErB;EACE,iBAAiB;CAAE;AAErB;EACE,iBAAiB;CAAE;AAErB;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;CAAE;AAE1B;EACE,uBAAuB;CAAE;AAE3B;EACE,cAAc;CAAE;AAElB;EACE,8BAA8B;CAAE;AAElC;EACE,iBAAiB;EACjB,mBAAmB;EACnB,uBAAuB;CAAE;AAE3B;EACE,aAAa;CAAE;AACf;IACE,gBAAgB;CAAE;AAEtB;EACE,uBAAuB;EACvB,cAAc;EACd,aAAa;EACb,gBAAgB;CAAE;AAEpB;EACE,cAAc;EACd,gBAAgB;EAChB,YAAY;EACZ,iBAAiB;CAAE;AAErB;EACE,0BAA0B;EAC1B,YAAY;EACZ,mBAAmB;EACnB,cAAc;EACd,iBAAiB;EACjB,YAAY;EACZ,iBAAiB;CAAE;AACnB;IACE,cAAc;CAAE;AAClB;IACE,cAAc;IACd,oBAAoB;CAAE;AACxB;IACE,mBAAmB;CAAE;AACvB;IACE,mBAAmB;CAAE;AACvB;IACE,mBAAmB;IACnB,mBAAmB;IACnB,YAAY;IACZ,iBAAiB;CAAE;AACrB;IACE,iBAAiB;IACjB,cAAc;IACd,oBAAoB;IACpB,kBAAkB;CAAE;AACpB;MACE,gBAAgB;CAAE;AACtB;IACE,kBAAkB;CAAE;AACtB;IACE,0BAA0B;CAAE;AAEhC;EACE,cAAc;EACd,eAAe;EACf,iBAAiB;EACjB,YAAY;EACZ,iBAAiB;CAAE;AACnB;IACE,eAAe;IACf,iBAAiB;IACjB,aAAa;IACb,aAAa;IACb,YAAY;CAAE;AAElB;EACE,qBAAqB;CAAE;AAEzB;EACE,uBAAuB;EACvB,iBAAiB;EACjB,mBAAmB;EACnB,YAAY;EACZ,uBAAuB;EACvB,YAAY;CAAE;AAEhB;EACE,gBAAgB;EAChB,iBAAiB;EACjB,YAAY;CAAE;AAEhB;EACE,0BAA0B;EAC1B,YAAY;CAAE",file:"vue-tags-input.scss?vue&type=style&index=0&id=61d92e31&lang=scss&scoped=true&",sourcesContent:['@font-face {\n  font-family: \'icomoon\';\n  src: url("./assets/fonts/icomoon.eot?7grlse");\n  src: url("./assets/fonts/icomoon.eot?7grlse#iefix") format("embedded-opentype"), url("./assets/fonts/icomoon.ttf?7grlse") format("truetype"), url("./assets/fonts/icomoon.woff?7grlse") format("woff");\n  font-weight: normal;\n  font-style: normal; }\n\n[class^="ti-icon-"], [class*=" ti-icon-"] {\n  font-family: \'icomoon\' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; }\n\n.ti-icon-check:before {\n  content: "\\e902"; }\n\n.ti-icon-close:before {\n  content: "\\e901"; }\n\n.ti-icon-undo:before {\n  content: "\\e900"; }\n\nul {\n  margin: 0px;\n  padding: 0px;\n  list-style-type: none; }\n\n*, *:before, *:after {\n  box-sizing: border-box; }\n\ninput:focus {\n  outline: none; }\n\ninput[disabled] {\n  background-color: transparent; }\n\n.vue-tags-input {\n  max-width: 450px;\n  position: relative;\n  background-color: #fff; }\n\ndiv.vue-tags-input.disabled {\n  opacity: 0.5; }\n  div.vue-tags-input.disabled * {\n    cursor: default; }\n\n.ti-input {\n  border: 1px solid #ccc;\n  display: flex;\n  padding: 4px;\n  flex-wrap: wrap; }\n\n.ti-tags {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  line-height: 1em; }\n\n.ti-tag {\n  background-color: #5C6BC0;\n  color: #fff;\n  border-radius: 2px;\n  display: flex;\n  padding: 3px 5px;\n  margin: 2px;\n  font-size: .85em; }\n  .ti-tag:focus {\n    outline: none; }\n  .ti-tag .ti-content {\n    display: flex;\n    align-items: center; }\n  .ti-tag .ti-tag-center {\n    position: relative; }\n  .ti-tag span {\n    line-height: .85em; }\n  .ti-tag span.ti-hidden {\n    padding-left: 14px;\n    visibility: hidden;\n    height: 0px;\n    white-space: pre; }\n  .ti-tag .ti-actions {\n    margin-left: 2px;\n    display: flex;\n    align-items: center;\n    font-size: 1.15em; }\n    .ti-tag .ti-actions i {\n      cursor: pointer; }\n  .ti-tag:last-child {\n    margin-right: 4px; }\n  .ti-tag.ti-invalid, .ti-tag.ti-tag.ti-deletion-mark {\n    background-color: #e54d42; }\n\n.ti-new-tag-input-wrapper {\n  display: flex;\n  flex: 1 0 auto;\n  padding: 3px 5px;\n  margin: 2px;\n  font-size: .85em; }\n  .ti-new-tag-input-wrapper input {\n    flex: 1 0 auto;\n    min-width: 100px;\n    border: none;\n    padding: 0px;\n    margin: 0px; }\n\n.ti-new-tag-input {\n  line-height: initial; }\n\n.ti-autocomplete {\n  border: 1px solid #ccc;\n  border-top: none;\n  position: absolute;\n  width: 100%;\n  background-color: #fff;\n  z-index: 20; }\n\n.ti-item > div {\n  cursor: pointer;\n  padding: 3px 6px;\n  width: 100%; }\n\n.ti-selected-item {\n  background-color: #5C6BC0;\n  color: #fff; }\n'],sourceRoot:""}])},function(e,t,n){"use strict";e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports="data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SBawAAAC8AAAAYGNtYXAXVtKJAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZqWfozAAAAF4AAAA/GhlYWQPxZgIAAACdAAAADZoaGVhB4ADyAAAAqwAAAAkaG10eBIAAb4AAALQAAAAHGxvY2EAkgDiAAAC7AAAABBtYXhwAAkAHwAAAvwAAAAgbmFtZZlKCfsAAAMcAAABhnBvc3QAAwAAAAAEpAAAACAAAwOAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6QL//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAFYBAQO+AoEAHAAAATIXHgEXFhcHJicuAScmIyIGBxchERc2Nz4BNzYCFkpDQ28pKRdkECAfVTM0OT9wLZz+gJgdIiJLKSgCVRcYUjg5QiAzKys+ERIrJZoBgJoZFRQcCAgAAQDWAIEDKgLVAAsAAAEHFwcnByc3JzcXNwMq7u487u487u487u4Cme7uPO7uPO7uPO7uAAEAkgCBA4ACvQAFAAAlARcBJzcBgAHEPP4A7jz5AcQ8/gDuPAAAAAABAAAAAAAAH8nTUV8PPPUACwQAAAAAANZ1KhsAAAAA1nUqGwAAAAADvgLVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAO+AAEAAAAAAAAAAAAAAAAAAAAHBAAAAAAAAAAAAAAAAgAAAAQAAFYEAADWBAAAkgAAAAAACgAUAB4AUABqAH4AAQAAAAcAHQABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="},function(e,t){e.exports="data:font/woff;base64,d09GRgABAAAAAAUQAAsAAAAABMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIFrGNtYXAAAAFoAAAAVAAAAFQXVtKJZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAPwAAAD8pZ+jMGhlYWQAAALAAAAANgAAADYPxZgIaGhlYQAAAvgAAAAkAAAAJAeAA8hobXR4AAADHAAAABwAAAAcEgABvmxvY2EAAAM4AAAAEAAAABAAkgDibWF4cAAAA0gAAAAgAAAAIAAJAB9uYW1lAAADaAAAAYYAAAGGmUoJ+3Bvc3QAAATwAAAAIAAAACAAAwAAAAMDgAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QIDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkC//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQBWAQEDvgKBABwAAAEyFx4BFxYXByYnLgEnJiMiBgcXIREXNjc+ATc2AhZKQ0NvKSkXZBAgH1UzNDk/cC2c/oCYHSIiSykoAlUXGFI4OUIgMysrPhESKyWaAYCaGRUUHAgIAAEA1gCBAyoC1QALAAABBxcHJwcnNyc3FzcDKu7uPO7uPO7uPO7uApnu7jzu7jzu7jzu7gABAJIAgQOAAr0ABQAAJQEXASc3AYABxDz+AO48+QHEPP4A7jwAAAAAAQAAAAAAAB/J01FfDzz1AAsEAAAAAADWdSobAAAAANZ1KhsAAAAAA74C1QAAAAgAAgAAAAAAAAABAAADwP/AAAAEAAAAAAADvgABAAAAAAAAAAAAAAAAAAAABwQAAAAAAAAAAAAAAAIAAAAEAABWBAAA1gQAAJIAAAAAAAoAFAAeAFAAagB+AAEAAAAHAB0AAQAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-tags-input",class:[{"ti-disabled":e.disabled},{"ti-focus":e.focused}]},[n("div",{staticClass:"ti-input"},[e.tagsCopy?n("ul",{staticClass:"ti-tags"},[e._l(e.tagsCopy,function(t,i){return n("li",{key:i,staticClass:"ti-tag",class:[{"ti-editing":e.tagsEditStatus[i]},t.tiClasses,t.classes,{"ti-deletion-mark":e.isMarked(i)}],style:t.style,attrs:{tabindex:"0"},on:{click:function(n){return e.$emit("tag-clicked",{tag:t,index:i})}}},[n("div",{staticClass:"ti-content"},[e.$scopedSlots["tag-left"]?n("div",{staticClass:"ti-tag-left"},[e._t("tag-left",null,{tag:t,index:i,edit:e.tagsEditStatus[i],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(i)})],2):e._e(),e._v(" "),n("div",{ref:"tagCenter",refInFor:!0,staticClass:"ti-tag-center"},[e.$scopedSlots["tag-center"]?e._e():n("span",{class:{"ti-hidden":e.tagsEditStatus[i]},on:{click:function(t){return e.performEditTag(i)}}},[e._v(e._s(t.text))]),e._v(" "),e.$scopedSlots["tag-center"]?e._e():n("tag-input",{attrs:{scope:{edit:e.tagsEditStatus[i],maxlength:e.maxlength,tag:t,index:i,validateTag:e.createChangedTag,performCancelEdit:e.cancelEdit,performSaveEdit:e.performSaveTag}}}),e._v(" "),e._t("tag-center",null,{tag:t,index:i,maxlength:e.maxlength,edit:e.tagsEditStatus[i],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,validateTag:e.createChangedTag,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(i)})],2),e._v(" "),e.$scopedSlots["tag-right"]?n("div",{staticClass:"ti-tag-right"},[e._t("tag-right",null,{tag:t,index:i,edit:e.tagsEditStatus[i],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(i)})],2):e._e()]),e._v(" "),n("div",{staticClass:"ti-actions"},[e.$scopedSlots["tag-actions"]?e._e():n("i",{directives:[{name:"show",rawName:"v-show",value:e.tagsEditStatus[i],expression:"tagsEditStatus[index]"}],staticClass:"ti-icon-undo",on:{click:function(t){return e.cancelEdit(i)}}}),e._v(" "),e.$scopedSlots["tag-actions"]?e._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!e.tagsEditStatus[i],expression:"!tagsEditStatus[index]"}],staticClass:"ti-icon-close",on:{click:function(t){return e.performDeleteTag(i)}}}),e._v(" "),e.$scopedSlots["tag-actions"]?e._t("tag-actions",null,{tag:t,index:i,edit:e.tagsEditStatus[i],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(i)}):e._e()],2)])}),e._v(" "),n("li",{staticClass:"ti-new-tag-input-wrapper"},[n("input",e._b({ref:"newTagInput",staticClass:"ti-new-tag-input",class:[e.createClasses(e.newTag,e.tags,e.validation,e.isDuplicate)],attrs:{placeholder:e.placeholder,maxlength:e.maxlength,disabled:e.disabled,type:"text",size:"1"},domProps:{value:e.newTag},on:{keydown:[function(t){return e.performAddTags(e.filteredAutocompleteItems[e.selectedItem]||e.newTag,t)},function(t){return t.type.indexOf("key")||8===t.keyCode?e.invokeDelete(t):null},function(t){return t.type.indexOf("key")||9===t.keyCode?e.performBlur(t):null},function(t){return t.type.indexOf("key")||38===t.keyCode?e.selectItem(t,"before"):null},function(t){return t.type.indexOf("key")||40===t.keyCode?e.selectItem(t,"after"):null}],paste:e.addTagsFromPaste,input:e.updateNewTag,blur:function(t){return e.$emit("blur",t)},focus:function(t){e.focused=!0,e.$emit("focus",t)},click:function(t){!e.addOnlyFromAutocomplete&&(e.selectedItem=null)}}},"input",e.$attrs,!1))])],2):e._e()]),e._v(" "),e._t("between-elements"),e._v(" "),e.autocompleteOpen?n("div",{staticClass:"ti-autocomplete",on:{mouseout:function(t){e.selectedItem=null}}},[e._t("autocomplete-header"),e._v(" "),n("ul",e._l(e.filteredAutocompleteItems,function(t,i){return n("li",{key:i,staticClass:"ti-item",class:[t.tiClasses,t.classes,{"ti-selected-item":e.isSelected(i)}],style:t.style,on:{mouseover:function(t){!e.disabled&&(e.selectedItem=i)}}},[e.$scopedSlots["autocomplete-item"]?e._t("autocomplete-item",null,{item:t,index:i,performAdd:function(t){return e.performAddTags(t,void 0,"autocomplete")},selected:e.isSelected(i)}):n("div",{on:{click:function(n){return e.performAddTags(t,void 0,"autocomplete")}}},[e._v("\n          "+e._s(t.text)+"\n        ")])],2)}),0),e._v(" "),e._t("autocomplete-footer")],2):e._e()],2)};i._withStripped=!0;var r=n(5),o=n.n(r),s=function(e){return JSON.parse(JSON.stringify(e))},a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;void 0===e.text&&(e={text:e});var r=function(e,t){return n.filter(function(t){var n=e.text;return"string"==typeof t.rule?!new RegExp(t.rule).test(n):t.rule instanceof RegExp?!t.rule.test(n):"[object Function]"==={}.toString.call(t.rule)?t.rule(e):void 0}).map(function(e){return e.classes})}(e),o=function(e,t){for(var n=0;n<e.length;){if(t(e[n]))return n;n++}return-1}(t,function(t){return t===e}),a=s(t),c=-1!==o?a.splice(o,1)[0]:s(e);return(i?i(a,c):-1!==a.map(function(e){return e.text}).indexOf(c.text))&&r.push("ti-duplicate"),0===r.length?r.push("ti-valid"):r.push("ti-invalid"),r},c=function(e){void 0===e.text&&(e={text:e});for(var t=s(e),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.tiClasses=a.apply(void 0,[e].concat(i)),t},l=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.map(function(t){return c.apply(void 0,[t,e].concat(n))})},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.scope.edit?n("input",{directives:[{name:"model",rawName:"v-model",value:e.scope.tag.text,expression:"scope.tag.text"}],staticClass:"ti-tag-input",attrs:{maxlength:e.scope.maxlength,type:"text",size:"1"},domProps:{value:e.scope.tag.text},on:{input:[function(t){t.target.composing||e.$set(e.scope.tag,"text",t.target.value)},function(t){return e.scope.validateTag(e.scope.index,t)}],blur:function(t){return e.scope.performCancelEdit(e.scope.index)},keydown:function(t){return e.scope.performSaveEdit(e.scope.index,t)}}}):e._e()};u._withStripped=!0;var d={name:"TagInput",props:{scope:{type:Object}}};function p(e,t,n,i,r,o,s,a){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n(7);var f=p(d,u,[],!1,null,"108f4f13",null);f.options.__file="vue-tags-input/tag-input.vue";var h=f.exports,m=function(e){return!e.some(function(e){var t=!e.text;t&&console.warn('Missing property "text"',e);var n=!1;return e.classes&&(n="string"!=typeof e.classes),n&&console.warn('Property "classes" must be type of string',e),t||n})},v=function(e){return!e.some(function(e){if("number"==typeof e){var t=isFinite(e)&&Math.floor(e)===e;return t||console.warn("Only numerics are allowed for this prop. Found:",e),!t}if("string"==typeof e){var n=/\W|[a-z]|!\d/i.test(e);return n||console.warn("Only alpha strings are allowed for this prop. Found:",e),!n}return console.warn("Only numeric and string values are allowed. Found:",e),!1})},g={value:{type:String,default:"",required:!0},tags:{type:Array,default:function(){return[]},validator:m},autocompleteItems:{type:Array,default:function(){return[]},validator:m},allowEditTags:{type:Boolean,default:!1},autocompleteFilterDuplicates:{default:!0,type:Boolean},addOnlyFromAutocomplete:{type:Boolean,default:!1},autocompleteMinLength:{type:Number,default:1},autocompleteAlwaysOpen:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Add Tag"},addOnKey:{type:Array,default:function(){return[13]},validator:v},saveOnKey:{type:Array,default:function(){return[13]},validator:v},maxTags:{type:Number},maxlength:{type:Number},validation:{type:Array,default:function(){return[]},validator:function(e){return!e.some(function(e){var t=!e.rule;t&&console.warn('Property "rule" is missing',e);var n=e.rule&&("string"==typeof e.rule||e.rule instanceof RegExp||"[object Function]"==={}.toString.call(e.rule));n||console.warn("A rule must be type of string, RegExp or function. Found:",JSON.stringify(e.rule));var i=!e.classes;i&&console.warn('Property "classes" is missing',e);var r=e.type&&"string"!=typeof e.type;return r&&console.warn('Property "type" must be type of string. Found:',e),!n||t||i||r})}},separators:{type:Array,default:function(){return[";"]},validator:function(e){return!e.some(function(e){var t="string"!=typeof e;return t&&console.warn("Separators must be type of string. Found:",e),t})}},avoidAddingDuplicates:{type:Boolean,default:!0},addOnBlur:{type:Boolean,default:!0},isDuplicate:{type:Function,default:null},addFromPaste:{type:Boolean,default:!0},deleteOnBackspace:{default:!0,type:Boolean}};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A={name:"VueTagsInput",components:{TagInput:h},props:g,data:function(){return{newTag:null,tagsCopy:null,tagsEditStatus:null,deletionMark:null,deletionMarkTime:null,selectedItem:null,focused:null}},computed:{autocompleteOpen:function(){return!!this.autocompleteAlwaysOpen||null!==this.newTag&&this.newTag.length>=this.autocompleteMinLength&&this.filteredAutocompleteItems.length>0&&this.focused},filteredAutocompleteItems:function(){var e=this,t=this.autocompleteItems.map(function(t){return c(t,e.tags,e.validation,e.isDuplicate)});return this.autocompleteFilterDuplicates?t.filter(this.duplicateFilter):t}},methods:{createClasses:a,getSelectedIndex:function(e){var t=this.filteredAutocompleteItems,n=this.selectedItem,i=t.length-1;if(0!==t.length)return null===n?0:"before"===e&&0===n?i:"after"===e&&n===i?0:"after"===e?n+1:n-1},selectDefaultItem:function(){this.addOnlyFromAutocomplete&&this.filteredAutocompleteItems.length>0?this.selectedItem=0:this.selectedItem=null},selectItem:function(e,t){e.preventDefault(),this.selectedItem=this.getSelectedIndex(t)},isSelected:function(e){return this.selectedItem===e},isMarked:function(e){return this.deletionMark===e},invokeDelete:function(){var e=this;if(this.deleteOnBackspace&&!(this.newTag.length>0)){var t=this.tagsCopy.length-1;null===this.deletionMark?(this.deletionMarkTime=setTimeout(function(){return e.deletionMark=null},1e3),this.deletionMark=t):this.performDeleteTag(t)}},addTagsFromPaste:function(){var e=this;this.addFromPaste&&setTimeout(function(){return e.performAddTags(e.newTag)},10)},performEditTag:function(e){var t=this;this.allowEditTags&&(this._events["before-editing-tag"]||this.editTag(e),this.$emit("before-editing-tag",{index:e,tag:this.tagsCopy[e],editTag:function(){return t.editTag(e)}}))},editTag:function(e){this.allowEditTags&&(this.toggleEditMode(e),this.focus(e))},toggleEditMode:function(e){this.allowEditTags&&!this.disabled&&this.$set(this.tagsEditStatus,e,!this.tagsEditStatus[e])},createChangedTag:function(e,t){var n=this.tagsCopy[e];n.text=t?t.target.value:this.tagsCopy[e].text,this.$set(this.tagsCopy,e,c(n,this.tagsCopy,this.validation,this.isDuplicate))},focus:function(e){var t=this;this.$nextTick(function(){var n=t.$refs.tagCenter[e].querySelector("input.ti-tag-input");n&&n.focus()})},quote:function(e){return e.replace(/([()[{*+.$^\\|?])/g,"\\$1")},cancelEdit:function(e){this.tags[e]&&(this.tagsCopy[e]=s(c(this.tags[e],this.tags,this.validation,this.isDuplicate)),this.$set(this.tagsEditStatus,e,!1))},hasForbiddingAddRule:function(e){var t=this;return e.some(function(e){var n=t.validation.find(function(t){return e===t.classes});return!!n&&n.disableAdd})},createTagTexts:function(e){var t=this,n=new RegExp(this.separators.map(function(e){return t.quote(e)}).join("|"));return e.split(n).map(function(e){return{text:e}})},performDeleteTag:function(e){var t=this;this._events["before-deleting-tag"]||this.deleteTag(e),this.$emit("before-deleting-tag",{index:e,tag:this.tagsCopy[e],deleteTag:function(){return t.deleteTag(e)}})},deleteTag:function(e){this.disabled||(this.deletionMark=null,clearTimeout(this.deletionMarkTime),this.tagsCopy.splice(e,1),this._events["update:tags"]&&this.$emit("update:tags",this.tagsCopy),this.$emit("tags-changed",this.tagsCopy))},noTriggerKey:function(e,t){var n=-1!==this[t].indexOf(e.keyCode)||-1!==this[t].indexOf(e.key);return n&&e.preventDefault(),!n},performAddTags:function(e,t,n){var i=this;if(!(this.disabled||t&&this.noTriggerKey(t,"addOnKey"))){var r=[];"object"===_(e)&&(r=[e]),"string"==typeof e&&(r=this.createTagTexts(e)),(r=r.filter(function(e){return e.text.trim().length>0})).forEach(function(e){e=c(e,i.tags,i.validation,i.isDuplicate),i._events["before-adding-tag"]||i.addTag(e,n),i.$emit("before-adding-tag",{tag:e,addTag:function(){return i.addTag(e,n)}})})}},duplicateFilter:function(e){return this.isDuplicate?!this.isDuplicate(this.tagsCopy,e):!this.tagsCopy.find(function(t){return t.text===e.text})},addTag:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new-tag-input",i=this.filteredAutocompleteItems.map(function(e){return e.text});this.addOnlyFromAutocomplete&&-1===i.indexOf(e.text)||this.$nextTick(function(){return t.maxTags&&t.maxTags<=t.tagsCopy.length?t.$emit("max-tags-reached",e):t.avoidAddingDuplicates&&!t.duplicateFilter(e)?t.$emit("adding-duplicate",e):void(t.hasForbiddingAddRule(e.tiClasses)||(t.$emit("input",""),t.tagsCopy.push(e),t._events["update:tags"]&&t.$emit("update:tags",t.tagsCopy),"autocomplete"===n&&t.$refs.newTagInput.focus(),t.$emit("tags-changed",t.tagsCopy)))})},performSaveTag:function(e,t){var n=this,i=this.tagsCopy[e];this.disabled||t&&this.noTriggerKey(t,"addOnKey")||0!==i.text.trim().length&&(this._events["before-saving-tag"]||this.saveTag(e,i),this.$emit("before-saving-tag",{index:e,tag:i,saveTag:function(){return n.saveTag(e,i)}}))},saveTag:function(e,t){if(this.avoidAddingDuplicates){var n=s(this.tagsCopy),i=n.splice(e,1)[0];if(this.isDuplicate?this.isDuplicate(n,i):-1!==n.map(function(e){return e.text}).indexOf(i.text))return this.$emit("saving-duplicate",t)}this.hasForbiddingAddRule(t.tiClasses)||(this.$set(this.tagsCopy,e,t),this.toggleEditMode(e),this._events["update:tags"]&&this.$emit("update:tags",this.tagsCopy),this.$emit("tags-changed",this.tagsCopy))},tagsEqual:function(){var e=this;return!this.tagsCopy.some(function(t,n){return!o()(t,e.tags[n])})},updateNewTag:function(e){var t=e.target.value;this.newTag=t,this.$emit("input",t)},initTags:function(){this.tagsCopy=l(this.tags,this.validation,this.isDuplicate),this.tagsEditStatus=s(this.tags).map(function(){return!1}),this._events["update:tags"]&&!this.tagsEqual()&&this.$emit("update:tags",this.tagsCopy)},blurredOnClick:function(e){this.$el.contains(e.target)||this.$el.contains(document.activeElement)||this.performBlur(e)},performBlur:function(){this.addOnBlur&&this.focused&&this.performAddTags(this.newTag),this.focused=!1}},watch:{value:function(e){this.addOnlyFromAutocomplete||(this.selectedItem=null),this.newTag=e},tags:{handler:function(){this.initTags()},deep:!0},autocompleteOpen:"selectDefaultItem"},created:function(){this.newTag=this.value,this.initTags()},mounted:function(){this.selectDefaultItem(),document.addEventListener("click",this.blurredOnClick)},destroyed:function(){document.removeEventListener("click",this.blurredOnClick)}},y=(n(9),p(A,i,[],!1,null,"61d92e31",null));y.options.__file="vue-tags-input/vue-tags-input.vue";var b=y.exports;n.d(t,"VueTagsInput",function(){return b}),n.d(t,"createClasses",function(){return a}),n.d(t,"createTag",function(){return c}),n.d(t,"createTags",function(){return l}),n.d(t,"TagInput",function(){return h}),b.install=function(e){return e.component(b.name,b)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(b),t.default=b}])},e.exports=i()},vveS:function(e,t){e.exports=(()=>"undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")())()},vzCy:function(e,t,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise(function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,n)}(e,r,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,s,a;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=u(e))>0&&s.length>r&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(i);return r.listener=n,i.wrapFn=r,r}function f(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function v(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function r(o){i.once&&e.removeEventListener(t,r),n(o)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var l=c.length,u=m(c,l);for(n=0;n<l;++n)o(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,r,o,s;if(l(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},wkuB:function(e,t,n){"use strict";var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},i.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},i.getDescription=function(e){var t=i.splitSections(e);return t&&t[0]},i.getMediaSections=function(e){var t=i.splitSections(e);return t.shift(),t},i.matchPrefix=function(e,t){return i.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},i.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:n[t[i]]=t[i+1]}return n},i.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},i.parseIceOptions=function(e){return e.substr(14).split(" ")},i.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},i.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},i.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},i.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},i.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)n[(t=i[r].trim().split("="))[0].trim()]=t[1];return n},i.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)}),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},i.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},i.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},i.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},i.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},i.getMid=function(e){var t=i.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},i.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},i.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:i.matchPrefix(e+t,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},i.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},i.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?i.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},i.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},i.getCryptoParameters=function(e,t){return i.matchPrefix(e+t,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(e,t){var n=i.matchPrefix(e+t,"a=ice-ufrag:")[0],r=i.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substr(12),password:r.substr(10)}:null},i.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},i.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=i.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var o=n[r],s=i.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=i.parseRtpMap(s),c=i.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?i.parseFmtp(c[0]):{},a.rtcpFeedback=i.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(i.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return i.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(i.parseExtmap(e))}),t},i.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=i.writeRtpMap(e),n+=i.writeFmtp(e),n+=i.writeRtcpFb(e)});var r=0;return t.codecs.forEach(function(e){e.maxptime>r&&(r=e.maxptime)}),r>0&&(n+="a=maxptime:"+r+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=i.writeExtmap(e)}),n},i.parseRtpEncodingParameters=function(e){var t,n=[],r=i.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=i.matchPrefix(e,"a=ssrc:").map(function(e){return i.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=a.length>0&&a[0].ssrc,l=i.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(t=l[0][1]),r.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var i={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(i.rtx={ssrc:t}),n.push(i),o&&((i=JSON.parse(JSON.stringify(i))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(i))}}),0===n.length&&c&&n.push({ssrc:c});var u=i.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=u})),n},i.parseRtcpParameters=function(e){var t={},n=i.matchPrefix(e,"a=ssrc:").map(function(e){return i.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var r=i.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var o=i.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},i.parseMsid=function(e){var t,n=i.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var r=i.matchPrefix(e,"a=ssrc:").map(function(e){return i.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return r.length>0?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},i.parseSctpDescription=function(e){var t,n=i.parseMLine(e),r=i.matchPrefix(e,"a=max-message-size:");r.length>0&&(t=parseInt(r[0].substr(19),10)),isNaN(t)&&(t=65536);var o=i.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(i.matchPrefix(e,"a=sctpmap:").length>0){var s=i.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},i.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(e,t,n){var r,o=void 0!==t?t:2;return r=e||i.generateSessionId(),"v=0\r\no="+(n||"thisisadapterortc")+" "+r+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(e,t,n,r){var o=i.writeRtpDescription(e.kind,t);if(o+=i.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),o},i.getDirection=function(e,t){for(var n=i.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?i.getDirection(t):"sendrecv"},i.getKind=function(e){return i.splitLines(e)[0].split(" ")[0].substr(2)},i.isRejected=function(e){return"0"===e.split(" ",2)[1]},i.parseMLine=function(e){var t=i.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},i.parseOLine=function(e){var t=i.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},i.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=i.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=i},x6bz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.io=t.Socket=t.Manager=t.protocol=void 0;const i=n("/tGp"),r=n("ClGK"),o=n("Fy0/")("socket.io-client");e.exports=t=a;const s=t.managers={};function a(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const n=(0,i.url)(e,t.path||"/socket.io"),a=n.source,c=n.id,l=n.path,u=s[c]&&l in s[c].nsps;let d;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(o("ignoring socket cache for %s",a),d=new r.Manager(a,t)):(s[c]||(o("new io instance for %s",a),s[c]=new r.Manager(a,t)),d=s[c]),n.query&&!t.query&&(t.query=n.queryKey),d.socket(n.path,t)}t.io=a;var c=n("TUo+");Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return c.protocol}}),t.connect=a;var l=n("ClGK");Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return l.Manager}});var u=n("hlye");Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return u.Socket}}),t.default=a},yPK5:function(e,t,n){var i,r;!function(o,s){"use strict";void 0===(r="function"==typeof(i=s)?i.call(t,n,t,e):i)||(e.exports=r)}(0,function(){"use strict";var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(t,n){for(var r=0;r<i.length;r++){var o=i[r];this[o]=r<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function a(i,a,c){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?o:void 0!==console[i]?r(console,i):void 0!==console.log?r(console,"log"):e)}(i)||function(e,n,i){return function(){typeof console!==t&&(s.call(this,n,i),this[e].apply(this,arguments))}}.apply(this,arguments)}function c(e,n,r){var o,c=this,l="loglevel";function u(){var e;if(typeof window!==t){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(l)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===c.levels[e]&&(e=void 0),e}}e&&(l+=":"+e),c.name=e,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=r||a,c.getLevel=function(){return o},c.setLevel=function(n,r){if("string"==typeof n&&void 0!==c.levels[n.toUpperCase()]&&(n=c.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==r&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[l]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+n+";"}catch(e){}}}(n),s.call(c,n,e),typeof console===t&&n<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(e){u()||c.setLevel(e,!1)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)};var d=u();null==d&&(d=null==n?"WARN":n),c.setLevel(d,!1)}var l=new c,u={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new c(e,l.getLevel(),l.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=d),l},l.getLoggers=function(){return u},l})},zXjU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;const i=n("pnVU");t.StrictEventEmitter=class extends i{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t),this}emitReserved(e,...t){return super.emit(e,...t),this}listeners(e){return super.listeners(e)}}}});
//# sourceMappingURL=3.20a63d5f7c49634ed4b4.js.map