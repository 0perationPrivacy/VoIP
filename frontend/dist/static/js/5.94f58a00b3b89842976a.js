webpackJsonp([5],{aodO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),i=n("exGp"),u=n.n(i),s=n("Tk3H"),o=n("ozHJ"),c={data:function(){return{status:""}},methods:{register:function(){var t=this;this.status="Start Register...";var e;this.$store.dispatch(s.c,{url:"hardwarekey/register-key",data:{}}).then((e=u()(a.a.mark(function e(n){var r,i,c,f,l,h,p,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(t){return Uint8Array.from(atob(t),function(t){return t.charCodeAt(0)})},i=function(t){return t.replace(/\-/g,"+").replace(/_/g,"/")+"=".repeat(t.length%4?4-t.length%4:0)},c=function(t){return btoa(t.reduce(function(t,e){return t+String.fromCharCode(e)},""))},n.user.id=r(n.user.id),f=n.challenge,n.challenge=r(i(n.challenge)),console.log("challengeStr",f),t.status="Awaiting PIN to Register...",e.next=10,navigator.credentials.create({publicKey:n});case 10:return l=e.sent,e.next=13,o.decode(l.response.attestationObject);case 13:h=e.sent,console.log(h),p={id:l.id,rawId:c(new Uint8Array(l.rawId)),response:{clientDataJSON:c(new Uint8Array(l.response.clientDataJSON)),attestationObject:c(new Uint8Array(l.response.attestationObject))},type:l.type},console.log("passableCredential",p),d={url:"hardwarekey/register",data:{passableCredential:p,attestationObject:l.response.attestationObject}},t.$store.dispatch(s.c,d).then(function(){var e=u()(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("rv",n),t.status="Register Pass...";case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){});case 19:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)})).catch(function(t){})},validate:function(){var t=this;this.status="start Validate...";var e;this.$store.dispatch(s.c,{url:"hardwarekey/login-key",data:{}}).then((e=u()(a.a.mark(function e(n){var r,i,o,c,f,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(t){return Uint8Array.from(atob(t),function(t){return t.charCodeAt(0)})},i=function(t){return t.replace(/\-/g,"+").replace(/_/g,"/")+"=".repeat(t.length%4?4-t.length%4:0)},o=function(t){return btoa(t.reduce(function(t,e){return t+String.fromCharCode(e)},""))},n.allowCredentials=n.allowCredentials.map(function(t){return t.id=r(t.id),t}),t.status="Awaiting PIN to Validate...",n.challenge=r(i(n.challenge)),e.next=8,navigator.credentials.get({publicKey:n});case 8:c=e.sent,console.log("assert credential",c),f={id:c.id,rawId:o(new Uint8Array(c.rawId)),response:{clientDataJSON:o(new Uint8Array(c.response.clientDataJSON)),authenticatorData:o(new Uint8Array(c.response.authenticatorData)),signature:o(new Uint8Array(c.response.signature)),userHandle:"test"},type:c.type},console.log("assert passableCredential",f),l={url:"hardwarekey/login",data:f},t.$store.dispatch(s.c,l).then(function(){var e=u()(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("rv",n),t.status="Validate Pass...";case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){});case 14:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)})).catch(function(t){})}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:function(e){return t.register()}}},[t._v("Register")]),t._v(" "),n("button",{on:{click:function(e){return t.validate()}}},[t._v("Validate")]),t._v(" "),n("pre",[t._v(" "+t._s(t.status)+" ")])])},staticRenderFns:[]},l=n("VU/8")(c,f,!1,null,null,null);e.default=l.exports},ozHJ:function(t,e,n){var r,a;!function(i,u){"use strict";var s=Math.pow(2,-24),o=Math.pow(2,32),c=Math.pow(2,53);var f={encode:function(t){var e,n=new ArrayBuffer(256),r=new DataView(n),a=0;function i(t){for(var i=n.byteLength,u=a+t;i<u;)i*=2;if(i!==n.byteLength){var s=r;n=new ArrayBuffer(i),r=new DataView(n);for(var o=a+3>>2,c=0;c<o;++c)r.setUint32(4*c,s.getUint32(4*c))}return e=t,r}function s(){a+=e}function f(t){s(i(1).setUint8(a,t))}function l(t){for(var e=i(t.length),n=0;n<t.length;++n)e.setUint8(a+n,t[n]);s()}function h(t,e){var n;e<24?f(t<<5|e):e<256?(f(t<<5|24),f(e)):e<65536?(f(t<<5|25),n=e,s(i(2).setUint16(a,n))):e<4294967296?(f(t<<5|26),function(t){s(i(4).setUint32(a,t))}(e)):(f(t<<5|27),function(t){var e=t%o,n=(t-e)/o,r=i(8);r.setUint32(a,n),r.setUint32(a+4,e),s()}(e))}if(function t(e){var n;if(!1===e)return f(244);if(!0===e)return f(245);if(null===e)return f(246);if(e===u)return f(247);switch(typeof e){case"number":if(Math.floor(e)===e){if(0<=e&&e<=c)return h(0,e);if(-c<=e&&e<0)return h(1,-(e+1))}return f(251),function(t){s(i(8).setFloat64(a,t))}(e);case"string":var r=[];for(n=0;n<e.length;++n){var o=e.charCodeAt(n);o<128?r.push(o):o<2048?(r.push(192|o>>6),r.push(128|63&o)):o<55296?(r.push(224|o>>12),r.push(128|o>>6&63),r.push(128|63&o)):(o=(1023&o)<<10,o|=1023&e.charCodeAt(++n),o+=65536,r.push(240|o>>18),r.push(128|o>>12&63),r.push(128|o>>6&63),r.push(128|63&o))}return h(3,r.length),l(r);default:var p;if(Array.isArray(e))for(h(4,p=e.length),n=0;n<p;++n)t(e[n]);else if(e instanceof Uint8Array)h(2,e.length),l(e);else{var d=Object.keys(e);for(h(5,p=d.length),n=0;n<p;++n){var g=d[n];t(g),t(e[g])}}}}(t),"slice"in n)return n.slice(0,a);for(var p=new ArrayBuffer(a),d=new DataView(p),g=0;g<a;++g)d.setUint8(g,r.getUint8(g));return p},decode:function(t,e,n){var r=new DataView(t),a=0;function i(t,e){return a+=e,t}function c(e){return i(new Uint8Array(t,a,e),e)}function f(){return i(r.getUint8(a),1)}function l(){return i(r.getUint16(a),2)}function h(){return i(r.getUint32(a),4)}function p(){return 255===r.getUint8(a)&&(a+=1,!0)}function d(t){if(t<24)return t;if(24===t)return f();if(25===t)return l();if(26===t)return h();if(27===t)return h()*o+h();if(31===t)return-1;throw"Invalid length encoding"}function g(t){var e=f();if(255===e)return-1;var n=d(31&e);if(n<0||e>>5!==t)throw"Invalid indefinite length element";return n}function v(t,e){for(var n=0;n<e;++n){var r=f();128&r&&(r<224?(r=(31&r)<<6|63&f(),e-=1):r<240?(r=(15&r)<<12|(63&f())<<6|63&f(),e-=2):(r=(15&r)<<18|(63&f())<<12|(63&f())<<6|63&f(),e-=3)),r<65536?t.push(r):(r-=65536,t.push(55296|r>>10),t.push(56320|1023&r))}}"function"!=typeof e&&(e=function(t){return t}),"function"!=typeof n&&(n=function(){return u});var w=function t(){var o,h,w=f(),y=w>>5,U=31&w;if(7===y)switch(U){case 25:return function(){var t=new ArrayBuffer(4),e=new DataView(t),n=l(),r=32768&n,a=31744&n,i=1023&n;if(31744===a)a=261120;else if(0!==a)a+=114688;else if(0!==i)return i*s;return e.setUint32(0,r<<16|a<<13|i<<13),e.getFloat32(0)}();case 26:return i(r.getFloat32(a),4);case 27:return i(r.getFloat64(a),8)}if((h=d(U))<0&&(y<2||6<y))throw"Invalid length";switch(y){case 0:return h;case 1:return-1-h;case 2:if(h<0){for(var A=[],b=0;(h=g(y))>=0;)b+=h,A.push(c(h));var k=new Uint8Array(b),m=0;for(o=0;o<A.length;++o)k.set(A[o],m),m+=A[o].length;return k}return c(h);case 3:var C=[];if(h<0)for(;(h=g(y))>=0;)v(C,h);else v(C,h);return String.fromCharCode.apply(null,C);case 4:var O;if(h<0)for(O=[];!p();)O.push(t());else for(O=new Array(h),o=0;o<h;++o)O[o]=t();return O;case 5:var _={};for(o=0;o<h||h<0&&!p();++o)_[t()]=t();return _;case 6:return e(t(),h);case 7:switch(h){case 20:return!1;case 21:return!0;case 22:return null;case 23:return u;default:return n(h)}}}();if(a!==t.byteLength)throw"Remaining bytes";return w}};(a="function"==typeof(r=f)?r.call(e,n,e,t):r)===u||(t.exports=a)}()}});
//# sourceMappingURL=5.94f58a00b3b89842976a.js.map