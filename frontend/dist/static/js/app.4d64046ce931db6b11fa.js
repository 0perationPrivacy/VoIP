webpackJsonp([1],{"5mAI":function(e,t){},"9M+g":function(e,t){},CuRo:function(e,t){},Jmt5:function(e,t){},K9Bd:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),a={props:["idHide"],mounted:function(){var e=localStorage.getItem("user-theme"),t=void 0;t=e||this.getMediaPreference(),this.setTheme(t)},data:function(){return{userTheme:"light-theme"}},methods:{toggleTheme:function(){"light-theme"===localStorage.getItem("user-theme")?this.setTheme("dark-theme"):this.setTheme("light-theme")},setTheme:function(e){localStorage.setItem("user-theme",e),this.userTheme=e,document.documentElement.className=e},getMediaPreference:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark-theme":"light-theme"}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return"false"===e.idHide?s("div",[s("input",{staticClass:"switch-checkbox",attrs:{id:"checkbox",type:"checkbox"},on:{change:e.toggleTheme}}),e._v(" "),s("label",{staticClass:"switch-label switch-label-mode",attrs:{for:"checkbox"}},[s("span",[e._v("ðŸŒ™")]),e._v(" "),s("span",[e._v("â˜€ï¸")]),e._v(" "),s("div",{staticClass:"switch-toggle",class:{"switch-toggle-checked":"dark-theme"===e.userTheme}})])]):e._e()},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(e){s("O6hW")},"data-v-5322af84",null).exports,n={name:"App",components:{ThemeButton:o}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var d=s("VU/8")(n,l,!1,function(e){s("jkqK")},null,null).exports,c=s("/ocq"),u=s("ESwS"),m=s.n(u),p=s("mvHQ"),h=s.n(p),v=s("+cKO"),f={name:"Login",components:{ThemeButton:o},data:function(){return{baseurl:"",switch1:!0,otpScreen:!1,otpError:!1,loginId:0,signUpOption:!1,versionOption:"v1.0.0",user:{email:"",password:""},otpForm:{otp:""},submitted:!1,submitted2:!1}},validations:{user:{email:{required:v.required,minLength:Object(v.minLength)(2)},password:{required:v.required,minLength:Object(v.minLength)(6)}}},mounted:function(){"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.$cookie.get("access_token")&&this.$router.push("/dashboard"),this.getsignup(),this.getVersion()},methods:{getsignup:function(){var e=this;axios.post(this.baseurl+"/api/auth/get-signup",{}).then(function(t){"on"===t.data.data?e.signUpOption=!0:e.signUpOption=!1}).catch(function(){e.signUpOption=!1})},getVersion:function(){var e=this;axios.post(this.baseurl+"/api/auth/get-version",{}).then(function(t){e.versionOption=t.data.data})},handleSubmit:function(e){var t=this;e.preventDefault(),this.submitted=!0,this.$v.$touch(),this.$v.$invalid||axios.post(this.baseurl+"/api/auth/login",this.user).then(function(e){t.$cookie.set("access_token",e.data.token,30),t.$cookie.set("userdata",h()(e.data.data),30),t.$router.push("/dashboard")}).catch(function(e){401===e.response.status&&t.$swal({icon:"error",title:"Oops...",text:e.response.data.message})})},handleSubmit2:function(e){var t=this;this.submitted2=!0,""!==this.otpForm.otp.trim()?axios.post(this.baseurl+"/api/auth/otp-verify",{user:this.loginId,otp:this.otpForm.otp}).then(function(e){localStorage.setItem("access_token",e.data.token),localStorage.setItem("userdata",h()(e.data.data)),t.$router.push("/dashboard")}).catch(function(e){401===e.response.status&&t.$swal({icon:"error",title:"Oops...",text:e.response.data.message})}):this.otpError=!0}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"login-box dark-mode p-3"},[s("theme-button",{attrs:{"id-hide":"false"}}),e._v(" "),s("h1",{staticClass:"dark-mode"},[e._v("Login")]),e._v(" "),e.otpScreen?e._e():s("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"person-fill"}})],1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control chat-input",class:{"is-invalid":e.submitted&&e.$v.user.email.$error},attrs:{type:"text",placeholder:"Username",id:"login-input"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})],1),e._v(" "),e.submitted&&e.$v.user.email.$error?s("div",{staticClass:"invalid-feedback"},[e.$v.user.email.required?e._e():s("span",[e._v("Username is required")]),e._v(" "),e.$v.user.email.minLength?e._e():s("span",[e._v("Username is invalid")])]):e._e()],1),e._v(" "),s("div",{staticClass:"form-group mb-2 mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"shield-lock"}})],1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"chat-input form-control",class:{"is-invalid":e.submitted&&e.$v.user.password.$error},attrs:{type:"password",placeholder:"Password",id:"login-input"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})],1),e._v(" "),e.submitted&&e.$v.user.password.$error?s("div",{staticClass:"invalid-feedback"},[e.$v.user.password.required?e._e():s("span",[e._v("Password is required")]),e._v(" "),e.$v.user.password.minLength?e._e():s("span",[e._v("Password is invalid")])]):e._e()],1),e._v(" "),e._m(0),e._v(" "),e.signUpOption?s("div",{staticClass:"my-2 small"},[e._v("\n            Donâ€™t have an account yet? "),s("router-link",{staticClass:"mx-2",attrs:{to:"/signup"}},[e._v(" Sign up")])],1):s("div",{staticClass:"d-grid d-md-flex mt-2 small"},[e._v("\n            New registrations are disabled\n          ")])]),e._v(" "),s("form",{staticClass:"ml-2 mr-2",class:{"d-none":!e.otpScreen}},[s("div",{staticClass:"form-group mb-2 mt-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.otpForm.otp,expression:"otpForm.otp"}],staticClass:"chat-input form-control",class:{"is-invalid":e.submitted2&&e.otpError},attrs:{type:"text",placeholder:"OTP"},domProps:{value:e.otpForm.otp},on:{input:function(t){t.target.composing||e.$set(e.otpForm,"otp",t.target.value)}}}),e._v(" "),e.submitted2&&e.otpError?s("div",{staticClass:"invalid-feedback"},[s("span",[e._v("OTP is required")])]):e._e()]),e._v(" "),s("div",{staticClass:"d-grid d-md-flex"},[s("button",{staticClass:"btn btn-success mt-3",attrs:{type:"button",id:"login-button"},on:{click:function(t){return e.handleSubmit2(t)}}},[e._v("Submit")])])]),e._v(" "),s("div",{staticClass:"d-flex my-4 justify-content-center"},[s("a",{attrs:{href:"https://www.twitter.com/0perationP",target:"_blank","aria-label":"Twitter",title:"Twitter"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"twitter",variant:"secondary"}})],1),e._v(" "),s("a",{attrs:{href:"https://github.com/0perationPrivacy/",target:"_blank","aria-label":"Github",title:"Github"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"github",variant:"secondary"}})],1),e._v(" "),s("a",{attrs:{href:"https://www.OperationPrivacy.com/Donate",target:"_blank","aria-label":"Donate",title:"Donate"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"credit-card",variant:"secondary"}})],1)])],1),e._v(" "),s("p",{staticClass:"version"},[e._v(e._s(e.versionOption))])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-grid"},[t("button",{staticClass:"btn btn-success mt-3",attrs:{type:"submit",id:"login-button"}},[this._v("Login")])])}]};var _=s("VU/8")(f,g,!1,function(e){s("rnCr")},"data-v-e10dc1aa",null).exports,b=s("QmSG"),w=s.n(b),C={name:"Signup",data:function(){return{version:Object({NODE_ENV:"production"}).VERSION,user:{email:"",password:""},submitted:!1,baseurl:""}},validations:{user:{email:{required:v.required,minLength:Object(v.minLength)(2)},password:{required:v.required,minLength:Object(v.minLength)(6)},c_password:{required:v.required,sameAsPassword:Object(v.sameAs)("password")}}},mounted:function(){"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.getsignup()},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.submitted=!0,this.$v.$touch(),this.$v.$invalid||axios.post(w.a.baseurl+"/auth/register",this.user).then(function(e){t.$router.push("/")}).catch(function(e){401===e.response.status&&t.$swal({icon:"error",title:"Oops...",text:e.response.data.message}),400===e.response.status&&t.$swal({icon:"error",title:"Oops...",text:e.response.data.errors.errors.email[0]})})},getsignup:function(){var e=this;axios.post(this.baseurl+"/api/auth/get-signup",{}).then(function(t){"on"===t.data.data?e.signUpOption=!0:e.$router.push("/")}).catch(function(){e.signUpOption=!1})}}},y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"login-box dark-mode p-3"},[s("h1",{staticClass:"dark-mode"},[e._v("Signup")]),e._v(" "),s("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"person-fill"}})],1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control chat-input",class:{"is-invalid":e.submitted&&e.$v.user.email.$error},attrs:{type:"text",placeholder:"Username",id:"login-input"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})],1),e._v(" "),e.submitted&&e.$v.user.email.$error?s("div",{staticClass:"invalid-feedback"},[e.$v.user.email.required?e._e():s("span",[e._v("Username is required")]),e._v(" "),e.$v.user.email.minLength?e._e():s("span",[e._v("Please enter a valid Username")])]):e._e()],1),e._v(" "),s("div",{staticClass:"form-group mb-2 mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"shield-lock"}})],1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"chat-input form-control",class:{"is-invalid":e.submitted&&e.$v.user.password.$error},attrs:{type:"password",placeholder:"Password",id:"login-input"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})],1),e._v(" "),e.submitted&&e.$v.user.password.$error?s("div",{staticClass:"invalid-feedback"},[e.$v.user.password.required?e._e():s("span",[e._v("Password is required")]),e._v(" "),e.$v.user.password.minLength?e._e():s("span",[e._v("Please enter a valid password")])]):e._e()],1),e._v(" "),s("div",{staticClass:"form-group mb-2 mt-2"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"shield-lock"}})],1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.c_password,expression:"user.c_password"}],staticClass:"chat-input form-control",class:{"is-invalid":e.submitted&&e.$v.user.c_password.$error},attrs:{type:"password",placeholder:"Confirm Password",id:"clogin-input"},domProps:{value:e.user.c_password},on:{input:function(t){t.target.composing||e.$set(e.user,"c_password",t.target.value)}}})],1),e._v(" "),e.submitted&&e.$v.user.c_password.$error?s("div",{staticClass:"invalid-feedback"},[e.$v.user.c_password.required?e._e():s("span",[e._v("Password is required"),s("br")]),e._v(" "),e.$v.user.c_password.sameAsPassword?e._e():s("span",[e._v("Password and confirm password are not match!")])]):e._e()],1),e._v(" "),e._m(0),e._v(" "),s("div",{staticClass:"my-2 small"},[e._v("\n            Already have an account? "),s("router-link",{staticClass:"mx-2",attrs:{to:"/"}},[e._v("Login")])],1)]),e._v(" "),s("div",{staticClass:"d-flex my-4 justify-content-center"},[s("a",{attrs:{href:"https://www.twitter.com/0perationP",target:"_blank","aria-label":"Twitter",title:"Twitter"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"twitter",variant:"secondary"}})],1),e._v(" "),s("a",{attrs:{href:"https://github.com/0perationPrivacy/",target:"_blank","aria-label":"Github",title:"Github"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"github",variant:"secondary"}})],1),e._v(" "),s("a",{attrs:{href:"https://www.OperationPrivacy.com/Donate",target:"_blank","aria-label":"Donate",title:"Donate"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"credit-card",variant:"secondary"}})],1)])]),e._v(" "),s("p",{staticClass:"version"},[e._v(e._s(e.version))])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-grid"},[t("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit"}},[this._v("Sign Up")])])}]};var $=s("VU/8")(C,y,!1,function(e){s("5mAI")},"data-v-70bf2c8e",null).exports,k=s("Gu7T"),x=s.n(k),P={data:function(){return{access_token:null,headers:null,baseurl:"",profiles:[],activeProfile:null,submitted3:!1,form:{profile:""}}},validations:{form:{profile:{required:v.required}}},mounted:function(){this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.headers={headers:{token:this.access_token}},"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.getallProfile()},methods:{onClickButton:function(e){this.$emit("clicked",e)},changeProfile:function(e){this.activeProfile=e,localStorage.setItem("activeProfile",h()(e)),this.$emit("clicked",e)},activeFirstProfile:function(){this.profiles.length>0?this.changeProfile(this.profiles[0]):(this.activeProfile=null,this.$emit("clicked",null))},getallProfile:function(){var e=this;axios.post(this.baseurl+"/api/profile/getdata",{},this.headers).then(function(t){if(e.profiles=t.data.data,!e.activeProfile){var s=localStorage.getItem("activeProfile");if(s)for(var i=JSON.parse(s),a=0;a<e.profiles.length;a++)e.profiles[a]._id===i._id&&(e.activeProfile=e.profiles[a]);else e.activeProfile=e.profiles[0];e.$emit("clicked",e.activeProfile)}}).catch(function(t){401===t.response.status&&(e.$swal({icon:"error",title:"Oops...",text:t.response.data.message}),e.$cookie.delete("access_token"),e.$router.push("/"))})},handleSubmit:function(e){var t=this;this.submitted3=!0,this.$v.$touch(),this.$v.$invalid||axios.post(this.baseurl+"/api/profile/create",this.form,this.headers).then(function(e){t.$swal({icon:"success",title:"Success",text:"Profile added successfully!"}),t.$refs["add-profile"].hide(),t.getallProfile()}).catch(function(e){401===e.response.status&&(t.$swal({icon:"error",title:"Oops...",text:e.response.data.message}),t.$cookie.delete("access_token"),t.$router.push("/")),400===e.response.status&&t.$swal({icon:"error",title:"Oops...",text:"Settings not saved"})})}}},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.profiles,function(t){return s("div",{key:t._id},[s("b-dropdown-item-button",{on:{click:function(s){return e.changeProfile(t)}}},[s("div",{staticClass:"d-flex flex-row"},[s("div",[s("div",{staticClass:"d-flex flex-column"},[s("div",[e._v("\n              "+e._s(t.profile)+"\n            ")]),e._v(" "),s("div",[t.number&&""!==t.number?s("span",{staticClass:"profileNum"},[e._v("("+e._s(t.number)+")")]):e._e()])])]),e._v(" "),s("div",[t.messageCount>0?s("span",{staticClass:"start-100 translate-middle badge border border-light rounded-circle bg-danger p-2"},[s("span",{staticClass:"visually-hidden"},[e._v("unread messages")])]):e._e()])])]),e._v(" "),s("b-dropdown-divider")],1)}),e._v(" "),s("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-profile",modifiers:{"add-profile":!0}}]},[s("b-icon",{attrs:{icon:"person-plus-fill","aria-hidden":"true"}}),e._v("\n      Add New Profile\n  ")],1),e._v(" "),s("b-dropdown-divider"),e._v(" "),s("b-modal",{ref:"add-profile",attrs:{id:"add-profile",size:"lg",title:"Add Profile","hide-footer":""}},[s("span",{staticClass:"small text-secondary"},[e._v("Profile")]),e._v(" "),s("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.profile,expression:"form.profile"}],staticClass:"form-control chat-input",class:{"is-invalid":e.submitted3&&e.$v.form.profile.$error},attrs:{name:"profile",placeholder:"Enter Profile"},domProps:{value:e.form.profile},on:{input:function(t){t.target.composing||e.$set(e.form,"profile",t.target.value)}}}),e._v(" "),e.submitted3&&e.$v.form.profile.$error?s("div",{staticClass:"invalid-feedback"},[e.$v.form.profile.required?e._e():s("span",[e._v("Profile are required")])]):e._e()]),e._v(" "),s("div",{staticClass:"d-grid d-md-flex mt-3"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Save")])])])])],2)},staticRenderFns:[]};var N={components:{ProfileView:s("VU/8")(P,S,!1,function(e){s("ctJg")},"data-v-ad978f76",null).exports,ThemeButton:o},data:function(){return{user:{api_key:"",number:"",twilio_sid:"",twilio_token:"",twilio_number:"",profile:""},activeChat:"",submitted:!1,messageListLoader:!0,numbers:[],baseurl:"",userdata:null,access_token:null,activeProfile:null,headers:null,tNumbers:[],twilioNumbers:[],options:[{text:"Telnyx",value:"telnyx"},{text:"Twilio",value:"twilio"}],selected:"telnyx"}},validations:{user:{api_key:{required:v.required},number:{required:v.required},twilio_sid:{required:v.required},twilio_token:{required:v.required},twilio_number:{required:v.required},profile:{required:v.required}}},mounted:function(){"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.headers={headers:{token:this.access_token}}},methods:{getOneProfile:function(){var e=this;axios.post(this.baseurl+"/api/profile/getdata-one",{setting:this.activeProfile._id},this.headers).then(function(t){e.activeProfile=t.data.data}).catch(function(t){401===t.response.status&&(e.$swal({icon:"error",title:"Oops...",text:t.response.data.message}),e.$cookie.delete("access_token"),e.$router.push("/"))})},refreshProfile:function(){this.$refs.childComponent.getallProfile()},onClickChild2:function(e){this.activeProfile=e,this.getSetting()},onClickChild:function(e){this.activeProfile=e,this.messageListLoader=!0,this.getNumberList(),this.$emit("activeChat",e),this.getSetting()},firstChatShow:function(e){var t=document.getElementById(e.id);t&&(t.style.display="none"),this.activeChat=e._id,localStorage.setItem("activenumber",h()(e)),this.$emit("clicked",e)},logout:function(){this.$cookie.delete("access_token"),this.$cookie.delete("userdata"),this.$router.push("/")},getNumberList:function(){var e=this;this.numbers=[],axios.post(this.baseurl+"/api/setting/sms-number-list",{user:this.userdata._id,setting:this.activeProfile._id},this.headers).then(function(t){e.numbers=t.data,e.messageListLoader=!1}).catch(function(t){401===t.response.status&&(e.$swal({icon:"error",title:"Oops...",text:t.response.data.message}),e.$cookie.delete("access_token"),e.$router.push("/"))})},getSetting:function(){var e=this;axios.post(this.baseurl+"/api/setting/get-setting",{user:this.userdata._id,setting:this.activeProfile._id},this.headers).then(function(t){t.data.data&&(e.user=t.data.data,e.user.twilio_number=t.data.data.number,t.data.data.number,e.getNumbers(t.data.data.type),e.selected=t.data.data.type)}).catch(function(t){401===t.response.status&&(e.$swal({icon:"error",title:"Oops...",text:t.response.data.message}),e.$cookie.delete("access_token"),e.$router.push("/"))})},deleteProfile:function(){var e=this;this.$swal.fire({icon:"info",title:"Do you want to delete this Profile?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(t){t.isConfirmed?axios.post(e.baseurl+"/api/profile/delete-profile",{user:e.userdata._id,profile_id:e.activeProfile._id},e.headers).then(function(t){e.$swal({icon:"success",title:"Success",text:"Profile deleted successfully!"}),e.user.api_key="",e.user.number="",e.user.twilio_sid="",e.user.twilio_token="",e.user.twilio_number="",e.tNumbers=[],e.twilioNumbers=[],e.activeProfile=t.data.data,localStorage.removeItem("activeProfile"),e.$refs["my-modal"].hide(),e.$refs.childComponent.getallProfile();var s=e;setTimeout(function(){s.$refs.childComponent.activeFirstProfile()},2e3)}).catch(function(t){401===t.response.status&&(e.$swal({icon:"error",title:"Oops...",text:t.response.data.message}),e.$cookie.delete("access_token"),e.$router.push("/"))}):t.isDenied&&e.$swal.fire("Profile not deleted","","info")})},deleteApiKey:function(){var e=this;this.$swal.fire({icon:"info",title:"Do you want to delete this setting?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(t){t.isConfirmed?axios.post(e.baseurl+"/api/setting/delete-key",{user:e.userdata._id,profile_id:e.activeProfile._id},e.headers).then(function(t){e.$swal({icon:"success",title:"Success",text:"Key deleted successfully!"}),e.user.api_key="",e.user.number="",e.user.twilio_sid="",e.user.twilio_token="",e.user.twilio_number="",e.tNumbers=[],e.twilioNumbers=[],e.activeProfile=t.data.data,e.$refs.childComponent.getallProfile()}).catch(function(t){401===t.response.status&&(e.$swal({icon:"error",title:"Oops...",text:t.response.data.message}),e.$cookie.delete("access_token"),e.$router.push("/"))}):t.isDenied&&e.$swal.fire("setting not deleted","","info")})},getNumbers:function(e){var t=this,s=this.user;s.type=e,axios.post(this.baseurl+"/api/setting/get-number",s,this.headers).then(function(s){"telnyx"===e?t.tNumbers=s.data.data.data:t.twilioNumbers=s.data.data}).catch(function(e){401===e.response.status&&(t.$swal({icon:"error",title:"Oops...",text:e.response.data.message}),t.$cookie.delete("access_token"),t.$router.push("/"))})},handleSubmit:function(e){var t=this;if(this.submitted=!0,this.$v.$touch(),""!=this.user.profile||"telnyx"===this.selected&&!this.$v.user.api_key.$error&&!this.$v.user.number.$error&&!this.$v.user.profile.$error||""!=this.user.profile||"twilio"===this.selected&&!this.$v.user.twilio_sid.$error&&!this.$v.user.twilio_token.$error&&!this.$v.user.twilio_number.$error&&!this.$v.user.profile.$error){var s="";if("telnyx"===this.selected)for(var i=0;i<this.tNumbers.length;i++)this.tNumbers[i].phone_number===this.user.number&&(s=this.tNumbers[i].id);else for(var a=0;a<this.twilioNumbers.length;a++)this.twilioNumbers[a].phoneNumber===this.user.twilio_number&&(s=this.twilioNumbers[a].sid);var r={api_key:this.user.api_key,number:this.user.number,user:this.userdata._id,sid:s,type:this.selected,twilio_sid:this.user.twilio_sid,twilio_token:this.user.twilio_token,twilio_number:this.user.twilio_number,setting:this.activeProfile._id,profile:this.user.profile};axios.post(this.baseurl+"/api/setting/create",r,this.headers).then(function(e){t.$swal({icon:"success",title:"Success",text:"Settings saved successfully!"}),t.$refs["my-modal"].hide(),t.activeProfile=e.data.data,t.$refs.childComponent.getallProfile(),t.$v.$reset()}).catch(function(e){401===e.response.status&&(t.$swal({icon:"error",title:"Oops...",text:e.response.data.message}),t.$cookie.delete("access_token"),t.$router.push("/")),400===e.response.status&&t.$swal({icon:"error",title:"Oops...",text:e.response.data.message})})}}}},q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"profile"},[s("div",{staticClass:"d-flex flex-row bd-highlight align-items-center align-self-center"},[s("div",{staticClass:"mt-2"},[s("b-icon",{staticClass:"m-2",attrs:{"font-scale":"1",icon:"person-lines-fill","aria-hidden":"true",title:"Contacts"}}),e._v(" "),s("b-icon",{staticClass:"m-2",attrs:{"font-scale":"1",icon:"telephone","aria-hidden":"true",title:"Call"}}),e._v(" "),s("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-2",modifiers:{"modal-2":!0}}],staticClass:"m-2",staticStyle:{cursor:"pointer"},attrs:{"font-scale":"1",icon:"pencil-square","aria-hidden":"true",title:"Compose"}})],1),e._v(" "),s("div",{staticClass:"icons mt-2"},[s("b-dropdown",{staticClass:"dropDown",attrs:{variant:"primary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("div",{staticClass:"d-flex flex-row align-items-center bd-highlight"},[e.activeProfile?s("div",{staticClass:"d-flex flex-column bd-highlight"},[s("div",{staticClass:"profileName"},[e._v(e._s(e.activeProfile.profile))]),e._v(" "),s("div",{staticClass:"profileNum"},[e._v(e._s(e.activeProfile.number))]),e._v(" "),e.activeProfile.totalCount>0?s("span",{staticClass:"position-absolute top-0 start-100 translate-middle badge border border-light rounded-circle bg-danger p-2"},[s("span",{staticClass:"visually-hidden"},[e._v("unread messages")])]):e._e()]):s("div",[e.userdata?s("span",[e._v(e._s(e.userdata.name))]):e._e()]),e._v(" "),s("div",[s("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"1",icon:"person-badge","aria-hidden":"true",title:"Profiles"}})],1),e._v(" "),s("div",{staticClass:"droupdownAdd"})])]},proxy:!0}])},[e._v(" "),s("b-dropdown-divider"),e._v(" "),e.activeProfile?s("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}]},[s("b-icon",{attrs:{icon:"gear-fill","aria-hidden":"true"}}),e._v("\n            Settings\n          ")],1):e._e(),e._v(" "),e.activeProfile?s("b-dropdown-divider"):e._e(),e._v(" "),s("profile-view",{ref:"childComponent",on:{clicked2:e.onClickChild2,clicked:e.onClickChild}}),e._v(" "),s("b-dropdown-item-button",{on:{click:function(t){return e.logout()}}},[s("b-icon",{attrs:{icon:"power","aria-hidden":"true"}}),e._v("\n            Logout\n          ")],1)],1)],1)])]),e._v(" "),e._m(0),e._v(" "),s("div",{staticClass:"contact-list"},[e.messageListLoader?s("div",{staticClass:"box-placeholder"},[e._m(1),e._v(" "),s("hr"),e._v(" "),e._m(2),e._v(" "),s("hr"),e._v(" "),e._m(3),e._v(" "),s("hr"),e._v(" "),e._m(4)]):e._e(),e._v(" "),e._l(e.numbers,function(t){return s("div",{key:t._id,staticClass:"contact",class:{activeChat:e.activeChat==t._id},on:{click:function(s){return e.firstChatShow(t)}}},[s("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"2",icon:"person-bounding-box","aria-hidden":"true"}}),e._v(" "),s("div",{staticClass:"contact-preview"},[s("div",{staticClass:"contact-text"},[s("h1",{staticClass:"font-name"},[e._v(e._s(t._id))]),e._v(" "),s("p",{staticClass:"font-preview"},[e._v(e._s(t.message))])])]),e._v(" "),s("div",{staticClass:"contact-time"},[s("p",{},[e._v(e._s(e._f("moment")(t.created_at,"HH:mm")))]),e._v(" "),t.isview>0?s("span",{staticClass:"badge message_count bg-success",attrs:{id:t._id}},[e._v(e._s(t.isview))]):e._e()])],1)})],2),e._v(" "),s("b-modal",{ref:"my-modal",attrs:{id:"modal-1",size:"lg",title:"Settings","hide-footer":""}},[s("theme-button",{attrs:{"id-hide":"false"}}),e._v(" "),s("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[s("b-form-radio-group",{attrs:{id:"btn-radios-2",options:e.options,"button-variant":"outline-primary",size:"lg",name:"radio-btn-outline",buttons:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),s("div",{staticClass:"card form-group mt-4"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row m-auto"},[s("div",{staticClass:"col-auto m-auto mb-1 mb-sm-auto"},[s("label",[s("b-icon",{attrs:{icon:"person-fill","aria-hidden":"true"}}),e._v("\n                Profile\n              ")],1)]),e._v(" "),s("div",{staticClass:"col-sm m-auto col-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.profile,expression:"user.profile"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.profile.$error},attrs:{type:"text",placeholder:"Alias/Name"},domProps:{value:e.user.profile},on:{input:function(t){t.target.composing||e.$set(e.user,"profile",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.profile.$error?s("div",{staticClass:"invalid-feedback"},[e.$v.user.profile.required?e._e():s("span",[e._v("Profile is required")])]):e._e()]),e._v(" "),s("div",{staticClass:"col-1 m-auto"},[s("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"}},[s("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"},on:{click:function(t){return e.deleteProfile()}}})],1)])])])]),e._v(" "),"telnyx"==e.selected?s("div",{staticClass:"card form-group mt-4"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto m-auto"},[s("label",[s("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),e._v(" "),s("b",[e._v("Telnyx")]),e._v(" API Key\n              ")],1)]),e._v(" "),s("div",{staticClass:"col-sm col-12 m-auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.api_key,expression:"user.api_key"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.api_key.$error&&""==e.user.profile},attrs:{type:"text",placeholder:"Telnyx API Key"},domProps:{value:e.user.api_key},on:{input:function(t){t.target.composing||e.$set(e.user,"api_key",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.api_key.$error&&""==e.user.profile?s("div",{staticClass:"invalid-feedback"},[e.$v.user.api_key.required?e._e():s("span",[e._v("API Key is required")])]):e._e()])]),e._v(" "),s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto m-auto"},[s("button",{staticClass:"dark-mode btn btn-secondary btn-sm",attrs:{type:"button",id:"get-number"},on:{click:function(t){return e.getNumbers("telnyx")}}},[s("b-icon",{attrs:{icon:"telephone-plus","aria-hidden":"true"}}),e._v("\n                Get Number\n              ")],1)]),e._v(" "),s("div",{staticClass:"col col-lg-6 m-auto"},[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.user.number,expression:"user.number"}],class:{"is-invalid":e.submitted&&e.$v.user.number.$error&&""==e.user.profile},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.user,"number",t.target.multiple?s:s[0])}}},e._l(e.tNumbers,function(t){return s("option",{key:t.id,domProps:{value:t.phone_number}},[e._v("\n                    "+e._s(t.phone_number)+"\n                  ")])}),0),e._v(" "),e.submitted&&e.$v.user.number.$error&&""==e.user.profile?s("div",{staticClass:"invalid-feedback"},[e.$v.user.number.required?e._e():s("span",[e._v("Number is required")])]):e._e()])]),e._v(" "),s("div",{staticClass:"col-auto m-auto"},[""!=e.user.api_key?s("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(t){return e.deleteApiKey()}}},[s("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"}})],1):e._e()])])])]):e._e(),e._v(" "),"twilio"==e.selected?s("div",{staticClass:"card form-group mt-4"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto col-lg-3 m-auto"},[s("label",[s("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),e._v(" "),s("b",[e._v("Twilio")]),e._v(" SID\n              ")],1)]),e._v(" "),s("div",{staticClass:"col-12 col-sm col-lg-9 m-auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.twilio_sid,expression:"user.twilio_sid"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.$v.user.twilio_sid.$error&&""==e.user.profile},attrs:{type:"text",placeholder:"Twilio SID"},domProps:{value:e.user.twilio_sid},on:{input:function(t){t.target.composing||e.$set(e.user,"twilio_sid",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.twilio_sid.$error&&""==e.user.profile?s("div",{staticClass:"invalid-feedback"},[e.$v.user.twilio_sid.required?e._e():s("span",[e._v("Twilio sid is required")])]):e._e()])]),e._v(" "),s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto col-lg-3 m-auto"},[s("label",[s("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),e._v(" "),s("b",[e._v("Twilio")]),e._v(" Token\n              ")],1)]),e._v(" "),s("div",{staticClass:"col-12 col-sm col-lg-9 m-auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.twilio_token,expression:"user.twilio_token"}],staticClass:"form-control ",class:{"is-invalid":e.submitted&&e.$v.user.twilio_token.$error&&""==e.user.profile},attrs:{type:"text",placeholder:"Twilio Token"},domProps:{value:e.user.twilio_token},on:{input:function(t){t.target.composing||e.$set(e.user,"twilio_token",t.target.value)}}}),e._v(" "),e.submitted&&e.$v.user.twilio_token.$error&&""==e.user.profile?s("div",{staticClass:"invalid-feedback"},[e.$v.user.twilio_token.required?e._e():s("span",[e._v("Twilio token is required")])]):e._e()])]),e._v(" "),s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto m-auto"},[s("button",{staticClass:"dark-mode btn btn-secondary btn-sm",attrs:{type:"button",id:"get-number-twilio"},on:{click:function(t){return e.getNumbers("twilio")}}},[s("b-icon",{attrs:{icon:"telephone-plus","aria-hidden":"true"}}),e._v("\n                Get Number\n              ")],1)]),e._v(" "),s("div",{staticClass:"col col-lg-6 m-auto"},[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.user.twilio_number,expression:"user.twilio_number"}],class:{"is-invalid":e.submitted&&e.$v.user.twilio_number.$error&&""==e.user.profile},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.user,"twilio_number",t.target.multiple?s:s[0])}}},e._l(e.twilioNumbers,function(t){return s("option",{key:t.sid,domProps:{value:t.phoneNumber}},[e._v(e._s(t.phoneNumber))])}),0),e._v(" "),e.submitted&&e.$v.user.twilio_number.$error&&""==e.user.profile?s("div",{staticClass:"invalid-feedback"},[e.$v.user.twilio_number.required?e._e():s("span",[e._v("Number is required")])]):e._e()])]),e._v(" "),s("div",{staticClass:"col-auto m-auto"},[""!=e.user.api_key?s("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(t){return e.deleteApiKey()}}},[s("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"}})],1):e._e()])])])]):e._e(),e._v(" "),s("div",{staticClass:"d-grid d-md-flex"},[s("button",{staticClass:"btn btn-success mt-4",attrs:{type:"submit",id:"login-button"}},[e._v("Save")])])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrap-search"},[t("div",{staticClass:"search"},[t("i",{staticClass:"fa fa-search fa",attrs:{"aria-hidden":"true"}}),this._v(" "),t("input",{staticClass:"input-search",attrs:{type:"text",placeholder:"Search"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"p-4"},[t("span",{staticClass:"category text link"}),this._v(" "),t("h4",{staticClass:"text line"}),this._v(" "),t("h4",{staticClass:"text"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("div",{staticClass:"embed-responsive embed-responsive-16by9"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"excerpt p-4"},[t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"excerpt p-4"},[t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text"})])}]};var I=s("VU/8")(N,q,!1,function(e){s("K9Bd")},"data-v-e06ebbfa",null).exports,L=s("vdhV"),O=s.n(L),E=s("x6bz"),D={name:"dashboard",components:{NumberList:I,VueTagsInput:O.a,ThemeButton:o},data:function(){return{dropArea:null,progressBar:null,filesDone:0,filesToDo:0,uploadProgress:[],uploadedImages:[],activeChatData:!1,activeProfile:null,activeChat:"",msg:"Welcome to dashboard",tags:[],sms:{numbers:"",message:""},setting:{},chatListLoader:!1,submitted2:!1,userdata:null,access_token:null,headers:null,messages:[],messageBody:"",socket:null,baseurl:"",vw:0,vh:0,modelMms:!1,modelFileValu:"",zoomImage:""}},created:function(){window.addEventListener("resize",this.updateVw,{passive:!0})},destroyed:function(){window.removeEventListener("resize",this.updateVw,{passive:!0})},mounted:function(){var e=this;this.$cookie.get("access_token")||this.$router.push("/"),this.updateVw(),"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000");var t=E(this.baseurl,{transports:["websocket"]});this.socket=t;var s=this;this.socket.on("new_message",function(e){s.getNumberList(),s.activeChatData&&s.showChat(s.activeChat)}),this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.socket.emit("join_profile_channel",this.userdata._id.toString()),this.socket.on("user_message",function(e){s.notifyMe(e.number,e.message),s.activeChatData?s.showChat(s.activeChat):(s.$refs.numberList.getOneProfile(),s.$refs.numberList.refreshProfile()),s.$refs.numberList.getNumberList()}),this.headers={headers:{token:this.access_token}},this.dropArea=document.getElementById("drop-area1"),["dragenter","dragover","dragleave","drop"].forEach(function(t){e.dropArea.addEventListener(t,e.preventDefaults,!1)}),["dragenter","dragover"].forEach(function(t){e.dropArea.addEventListener(t,e.highlight,!1)}),["dragleave","drop"].forEach(function(t){e.dropArea.addEventListener(t,e.unhighlight,!1)}),this.dropArea.addEventListener("drop",this.handleDrop,!1),this.progressBar=document.getElementById("progress-bar")},validations:{sms:{numbers:{required:v.required},message:{required:v.required}}},methods:{hiddenImage:function(){this.zoomImage="",document.getElementById("hidden").style.display="none"},showImage:function(e){this.zoomImage=e,document.getElementById("hidden").style.display="block"},choseFile2:function(){document.getElementById("model_file_input").click()},file_upload:function(){document.getElementById("fileElem").click()},initializeProgress:function(e){this.progressBar.value=0,this.uploadProgress=[];for(var t=this.numFiles;t>0;t--)this.uploadProgress.push(0)},updateProgress:function(e,t){this.uploadProgress[e]=t;var s=this.uploadProgress.reduce(function(e,t){return e+t},0)/this.uploadProgress.length;this.progressBar.value=s},progressDone:function(){this.filesDone++,this.progressBar.value=this.filesDone/this.filesToDo*100},handleDrop:function(e){var t=e.dataTransfer.files;this.handleFiles(t)},handleFiles:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){this.modelMms=!0;for(var t=[],s=0;s<e.length;s++)t.push(e[s].name);this.modelFileValu=t.join()}else this.modelMms=!1;e=[].concat(x()(e)),this.initializeProgress(e.length),e.forEach(this.uploadFile)},previewFile:function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=document.createElement("img");e.style.width="150px",e.src=t.result,document.getElementById("gallery").appendChild(e)}},removeFromPrevie:function(e){for(var t=[],s=0;s<this.uploadedImages.length;s++)this.uploadedImages[s]!==e&&t.push(this.uploadedImages[s]);this.uploadedImages=t,this.uploadedImages.length<=0&&(document.getElementById("drop-area").style.display="none")},uploadFile:function(e,t){var s=this.baseurl+"/api/media/upload-files",i=new XMLHttpRequest,a=new FormData;i.open("POST",s,!0),i.setRequestHeader("token",this.access_token);var r=this;i.upload.addEventListener("progress",function(e){r.updateProgress(t,100*e.loaded/e.total||100)}),i.addEventListener("readystatechange",function(e){if(4===i.readyState&&200===i.status){var t=JSON.parse(i.responseText);r.uploadedImages.push(""+t.data.media)}else 4===i.readyState&&i.status}),a.append("file",e),i.send(a)},highlight:function(e){document.getElementById("drop-area").style.display="block",this.dropArea.classList.add("highlight")},unhighlight:function(e){this.dropArea.classList.remove("highlight")},preventDefaults:function(e){e.preventDefault(),e.stopPropagation()},activeProfileView:function(e){this.activeProfile=e},onClickChild:function(e){this.firstChatShow(e)},notifyMe:function(e,t){var s="https://www.operationprivacy.com/img/favicon/favicon.ico";if("Notification"in window)if("granted"===Notification.permission){new Notification("Message from "+e,{body:t,dir:"auto",icon:s})}else"denied"!==Notification.permission&&Notification.requestPermission(function(i){("permission"in Notification||(Notification.permission=i),"granted"===i)&&new Notification("Message from "+e,{body:t,dir:"auto",icon:s})});else alert("This browser does not support desktop notification")},deletechat:function(){var e=this;this.$swal.fire({icon:"info",title:"Do you want to delete this chat?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(t){if(t.isConfirmed){var s={user:e.userdata._id,number:e.activeChat};axios.post(e.baseurl+"/api/setting/message-list-delete",s,e.headers).then(function(t){e.activeChatData&&e.showChat(e.activeChat),e.$refs.numberList.getNumberList()}).catch(function(t){401===t.response.status&&(e.$swal({icon:"error",title:"Oops...",text:t.response.data.message}),e.$cookie.delete("access_token"),e.$router.push("/"))})}else t.isDenied&&e.$swal.fire("chat not deleted","","info")})},sendSms:function(){if(""!==this.messageBody.trim()||0!==this.uploadedImages.length){var e=[JSON.parse(localStorage.getItem("activenumber"))._id];this.commonSendMessage(e,this.messageBody)}else this.$swal({icon:"error",title:"Oops...",text:"Message or file required"})},commonSendMessage:function(e,t){var s=this,i={user:this.userdata._id,numbers:e,message:t,profile:this.activeProfile,media:this.uploadedImages};axios.post(this.baseurl+"/api/setting/send-sms",i,this.headers).then(function(e){s.messageBody="",s.sms.numbers="",s.sms.message="",s.uploadedImages=[],s.modelFileValu="",document.getElementById("drop-area").style.display="none",s.tags=[],s.$refs.numberList.getNumberList(),s.activeChatData&&s.showChat(s.activeChat),s.$refs["my-modal2"].hide(),s.vw<576&&s.$refs.mySidebar2.hide()}).catch(function(e){400===e.response.status&&s.$swal({icon:"error",title:"Oops...",text:e.response.data.errors}),401===e.response.status&&(s.$swal({icon:"error",title:"Oops...",text:e.response.data.message}),s.$cookie.delete("access_token"),s.$router.push("/"))})},firstChatShow:function(e){this.chatListLoader=!0;var t=document.getElementById(e._id);t&&t.remove(),this.showChat(e),document.getElementById("drop-area").style.display="none",this.uploadedImages=[],this.vw<576&&this.$refs.mySidebar2.hide()},showChat:function(e){var t=this;this.activeChat=e,this.activeChatData=!0,axios.post(this.baseurl+"/api/setting/message-list",{user:this.userdata._id,number:e,profile:this.activeProfile},this.headers).then(function(e){t.messages=e.data,t.chatListLoader=!1;var s=t.$el.querySelector("#chat-container");s.scrollTop=s.scrollHeight,t.$refs.numberList.refreshProfile(),t.$refs.numberList.getOneProfile()}).catch(function(e){401===e.response.status&&(t.$swal({icon:"error",title:"Oops...",text:e.response.data.message}),t.$cookie.delete("access_token"),t.$router.push("/"))})},handleSubmit2:function(e){if(this.submitted2=!0,this.$v.$touch(),this.tags.length<=0)this.$swal({icon:"error",title:"Oops...",text:"please enter number!"});else{for(var t=[],s=0;s<this.tags.length;s++)t.push(this.tags[s].text);!this.$v.sms.message.$error||this.uploadedImages.length>0?this.commonSendMessage(t,this.sms.message):this.$swal({icon:"error",title:"Oops...",text:"Message or file required!"})}},updateVw:function(){this.vw=this.getVw(),this.vh=this.getVh();var e=this.vh-120;document.getElementById("wrapbody").style.height=this.vh+"px",document.getElementById("chat_body").style.height=e+"px"},getVw:function(){return Math.round(Math.max(document.documentElement.clientWidth||0,window.innerWidth||0))},getVh:function(){return Math.round(Math.max(document.documentElement.innerHeight||0,window.innerHeight||0))}}},T={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrap",attrs:{id:"wrapbody"}},[s("theme-button",{attrs:{"id-hide":"true"}}),e._v(" "),e.vw<576?s("b-sidebar",{ref:"mySidebar2",staticClass:"d-sm-none",attrs:{id:"sidebar-no-header","aria-labelledby":"sidebar-no-header-title","no-header":"",shadow:"",backdrop:"",visible:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hide;return[s("div",{staticClass:"d-flex flex-row-reverse bd-highlight"},[s("div",{staticClass:"bd-highlight dropDown"},[s("b-button",{staticClass:"float-right d-flex",attrs:{size:"sm",variant:"primary"}},[s("b-icon",{attrs:{icon:"x",scale:"1"},on:{click:i}})],1)],1)]),e._v(" "),s("number-list",{ref:"numberList",on:{activeChat:e.activeProfileView,clicked:e.onClickChild}})]}}],null,!1,3892138129)}):e._e(),e._v(" "),s("section",{staticClass:"col-auto col-md-4 d-none d-sm-block"},[e.vw>=576?s("number-list",{ref:"numberList",on:{activeChat:e.activeProfileView,clicked:e.onClickChild}}):e._e()],1),e._v(" "),s("section",{staticClass:"col col-md-8 pb-2",attrs:{id:"drop-area1"}},[s("div",{staticClass:"chat-head"},[s("b-icon",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-no-header",modifiers:{"sidebar-no-header":!0}}],staticClass:"mx-2 my-auto d-sm-none",attrs:{"font-scale":"2",icon:"chevron-right","aria-hidden":"true"}}),e._v(" "),s("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"2",icon:"person-bounding-box","aria-hidden":"true"}}),e._v(" "),s("div",{staticClass:"chat-name"},[e.activeChat?s("h1",{staticClass:"font-name"},[s("div",{staticClass:"d-flex align-items-start align-self-center"},[s("div",{staticClass:"mt-2 ml-4"},[e._v(e._s(e.activeChat._id))])])]):e._e()]),e._v(" "),s("div",{staticClass:"d-flex m-auto"},[s("span",{staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(t){return e.deletechat()}}},[s("b-icon",{attrs:{"font-scale":"2",icon:"trash","aria-hidden":"true"}})],1)])],1),e._v(" "),s("div",{class:!this.activeChat||e.modelMms?"d-none":""},[s("div",{class:e.uploadedImages.length>0?"activeImageArea":"inactive",staticStyle:{"z-index":"1"},attrs:{id:"drop-area"}},[s("form",{staticClass:"my-form"},[s("p",[e._v("Upload multiple files by dragging and dropping images inside this box")]),e._v(" "),s("input",{attrs:{type:"file",id:"fileElem",multiple:"",accept:"image/*"},on:{change:function(t){return e.handleFiles(t.target.files)}}})]),e._v(" "),s("div",{staticClass:"row",attrs:{id:"gallery"}},e._l(e.uploadedImages,function(t){return s("div",{key:t,staticClass:"col-lg-4"},[s("img",{staticStyle:{width:"150px"},attrs:{src:t}}),e._v(" "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return e.removeFromPrevie(t)}}},[s("span",{staticClass:"start-100 translate-middle badge border border-light rounded-circle bg-danger"},[e._v("X")])])])}),0),e._v(" "),s("progress",{staticStyle:{display:"none"},attrs:{id:"progress-bar",max:"100",value:"0"}})])]),e._v(" "),s("div",{staticClass:"wrap-chat",attrs:{id:"chat_body"}},[e.chatListLoader?s("div",{staticClass:"chat row"},[e._m(0),e._v(" "),e._m(1)]):e._e(),e._v(" "),s("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"chat",attrs:{id:"chat-container"}},[e.activeChatData?s("div",e._l(e.messages,function(t){return s("div",{key:t._id},[s("div",{staticClass:"chat-bubble",class:{me:"send"==t.type,you:"receive"==t.type}},[s("div",{class:{"my-mouth":"send"==t.type,"your-mouth":"receive"==t.type}}),e._v(" "),s("div",{staticClass:"content"},[t.media&&JSON.parse(t.media)&&JSON.parse(t.media).length>0?s("span",e._l(JSON.parse(t.media),function(t){return s("span",{key:t},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return e.showImage(t)}}},[s("img",{attrs:{src:t,alt:"Image"}})])])}),0):e._e(),e._v("\n                "+e._s(t.message)+"\n              ")]),e._v(" "),s("div",{staticClass:"time"},[e._v("\n                "+e._s(e._f("moment")(t.created_at,"HH:mm"))+"\n              ")])])])}),0):e._e()])]),e._v(" "),s("div",{staticClass:"row wrap-container"},[s("div",{staticClass:"col-md-12 wrap-container2"},[e.activeChatData?s("div",{staticClass:"wrap-message"},[s("div",{staticClass:"message pl-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.messageBody,expression:"messageBody"}],staticClass:"input-message",attrs:{type:"text",placeholder:"Type message here"},domProps:{value:e.messageBody},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendSms.apply(null,arguments)},input:function(t){t.target.composing||(e.messageBody=t.target.value)}}}),e._v(" "),s("a",{staticClass:"m-2",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.file_upload()}}},[s("b-icon",{attrs:{icon:"paperclip",scale:"2"}})],1)]),e._v(" "),s("div",{staticClass:"btn btn-primary m-2",staticStyle:{height:"36px"},on:{click:function(t){return e.sendSms()}}},[s("b-icon",{attrs:{icon:"arrow-right-circle-fill","aria-hidden":"true"}})],1)]):e._e()])])]),e._v(" "),s("b-modal",{ref:"my-modal2",attrs:{id:"modal-2",size:"lg",title:"Compose Message","hide-footer":""}},[s("span",{staticClass:"small text-secondary"},[e._v("Input (+) and country code followed by the 10 digit phone number. If no country code is provided (+1) is assumed. Multiple numbers will be sent as Bulk SMS (individual sms's to recipients). "),s("span",{staticClass:"small text-center"},[e._v("[Telnyx does not support group texting]")])]),e._v(" "),s("form",{staticClass:"ml-2 mr-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit2.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-4"},[s("vue-tags-input",{staticClass:"form-control chat-input",attrs:{tags:e.tags,placeholder:"Enter phone number"},on:{"tags-changed":function(t){return e.tags=t}},model:{value:e.sms.numbers,callback:function(t){e.$set(e.sms,"numbers",t)},expression:"sms.numbers"}}),e._v(" "),e.tags.length<=0?s("div",{staticClass:"invalid-feedback"},[s("span",[e._v("Numbers are required")])]):e._e()],1),e._v(" "),s("div",{staticClass:"form-group mb-2 mt-4"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sms.message,expression:"sms.message"}],staticClass:"form-control chat-input",class:{"is-invalid":e.submitted2&&e.$v.sms.message.$error},attrs:{rows:"8",placeholder:"Type Message here"},domProps:{value:e.sms.message},on:{input:function(t){t.target.composing||e.$set(e.sms,"message",t.target.value)}}}),e._v(" "),e.submitted2&&e.$v.sms.message.$error?s("div",{staticClass:"invalid-feedback"},[e.$v.sms.message.required?e._e():s("span",[e._v("Message is required")])]):e._e()]),e._v(" "),s("div",{staticClass:"input-group mb-3"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text paperClip chat-input",attrs:{id:"basic-addon1"},on:{click:function(t){return e.choseFile2()}}},[s("b-icon",{attrs:{icon:"paperclip"}})],1)]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.modelFileValu,expression:"modelFileValu"}],staticClass:"form-control chat-input",attrs:{type:"text",placeholder:"Choose file","aria-label":"Username",readonly:"","aria-describedby":"basic-addon1"},domProps:{value:e.modelFileValu},on:{click:function(t){return e.choseFile2()},input:function(t){t.target.composing||(e.modelFileValu=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-group mb-2 mt-4 d-none"},[s("input",{staticClass:"form-control chat-input",attrs:{type:"file",id:"model_file_input",multiple:"",accept:"image/*"},on:{change:function(t){return e.handleFiles(t.target.files,!0)}}})]),e._v(" "),s("div",{staticClass:"d-grid d-md-flex"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",id:"login-button"}},[e._v("Send Message")])])])]),e._v(" "),s("div",{attrs:{id:"hidden"},on:{click:function(t){return e.hiddenImage()}}},[s("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{height:"100vh",width:"100vw"}},[s("img",{staticClass:"img-fluid",attrs:{alt:"Responsive image",src:e.zoomImage}})])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"box-placeholder chat_loader"},[t("div",{staticClass:"excerpt p-4"},[t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text"})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"box-placeholder chat_loader"},[t("div",{staticClass:"excerpt p-4"},[t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text line"}),this._v(" "),t("div",{staticClass:"text"})])])}]};var B=s("VU/8")(D,T,!1,function(e){s("UjCs")},"data-v-b46cfd10",null).exports,F=s("Tqaz"),A=s("a+8X"),V=s.n(A);s("Jmt5"),s("9M+g");s("CuRo"),i.default.use(F.a),i.default.use(F.b),i.default.component("input-tag",V.a),i.default.use(c.a),i.default.use(m.a);var M=new c.a({mode:"history",routes:[{path:"/",name:"login",component:_},{path:"/signup",name:"signup",component:$},{path:"/dashboard",name:"dashboard",component:B}]}),U=s("NOK/"),j=s.n(U),z=(s("UdIB"),s("bNL2")),R=s.n(z),H=s("lrIR"),J=s("K/Lq");window.axios=s("mtWM"),i.default.use(R.a),i.default.use(H.a),i.default.use(J),i.default.config.productionTip=!1,i.default.use(j.a),i.default.use(s("8AgW")),new i.default({el:"#app",router:M,components:{App:d},template:"<App/>"})},O6hW:function(e,t){},QmSG:function(e,t){e.exports={baseurl:"/api",socketUrl:""}},UdIB:function(e,t){},UjCs:function(e,t){},ctJg:function(e,t){},jkqK:function(e,t){},rnCr:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.4d64046ce931db6b11fa.js.map