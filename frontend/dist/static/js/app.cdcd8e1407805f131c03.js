webpackJsonp([1],{"5vny":function(t,e){},"75l9":function(t,e){t.exports={_from:"axios@^0.21.1",_id:"axios@0.21.4",_inBundle:!1,_integrity:"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==",_location:"/axios",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"axios@^0.21.1",name:"axios",escapedName:"axios",rawSpec:"^0.21.1",saveSpec:null,fetchSpec:"^0.21.1"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz",_shasum:"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575",_spec:"axios@^0.21.1",_where:"D:\\upwork\\Telnyx web app for sms\\new\\VoIPsms\\frontend",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.14.0"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",unpkg:"dist/axios.min.js",version:"0.21.4"}},"9M+g":function(t,e){},CuRo:function(t,e){},IEj8:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),a={props:["idHide"],mounted:function(){var t=localStorage.getItem("user-theme"),e=void 0;e=t||this.getMediaPreference(),this.setTheme(e)},data:function(){return{userTheme:"light-theme"}},methods:{toggleTheme:function(){"light-theme"===localStorage.getItem("user-theme")?this.setTheme("dark-theme"):this.setTheme("light-theme")},setTheme:function(t){localStorage.setItem("user-theme",t),this.userTheme=t,document.documentElement.className=t},getMediaPreference:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark-theme":"light-theme"}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return"false"===t.idHide?s("div",[s("input",{staticClass:"switch-checkbox",attrs:{id:"checkbox",type:"checkbox"},on:{change:t.toggleTheme}}),t._v(" "),s("label",{staticClass:"switch-label switch-label-mode",attrs:{for:"checkbox"}},[s("span",[t._v("ðŸŒ™")]),t._v(" "),s("span",[t._v("â˜€ï¸")]),t._v(" "),s("div",{staticClass:"switch-toggle",class:{"switch-toggle-checked":"dark-theme"===t.userTheme}})])]):t._e()},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(t){s("O6hW")},"data-v-5322af84",null).exports,n=s("5Q7Q"),l=s.n(n),c={mounted:function(){l.a.init({mainElement:"body",onRefresh:function(){window.location.reload()},distThreshold:120,distMax:140})}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var u={name:"App",components:{ThemeButton:o,Refresh:s("VU/8")(c,d,!1,function(t){s("tvpj")},null,null).exports}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("refresh"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var v,h=s("VU/8")(u,m,!1,function(t){s("IEj8")},null,null).exports,p=s("/ocq"),f=s("ESwS"),g=s.n(f),b=s("mvHQ"),_=s.n(b),C=s("bOdI"),w=s.n(C),y=s("//Fk"),x=s.n(y),$=s("mtWM"),k=s.n($),P=s("aLYK"),N={init:function(){var t="";"http://localhost:8080"===window.location.origin&&(t="http://localhost:3000"),console.log(t),i.default.use(P.a,k.a),i.default.axios.defaults.baseURL=t+"/api"},setHeader:function(){var t=i.default.cookie.get("access_token");i.default.axios.defaults.headers.common.token=""+t},query:function(t,e){return i.default.axios.get(t,e).catch(function(t){throw console.log(t),new Error("ApiService "+t)})},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i.default.axios.get(t+"/"+e).catch(function(t){throw new Error("ApiService "+t)})},post:function(t,e){return i.default.axios.post(""+t,e)},update:function(t,e,s){return i.default.axios.put(t+"/"+e,s)},put:function(t,e){return i.default.axios.put(""+t,e)},delete:function(t){return i.default.axios.delete(t).catch(function(t){throw new Error("[RWV] ApiService "+t)})}},S=s("e7x4"),E=s.n(S),q={actions:(v={},w()(v,"post",function(t,e){return new x.a(function(t){N.setHeader(),N.post(e.url,e.data).then(function(e){var s=e.data;t(s)}).catch(function(t){var e=t.response;console.log(e),401===e.status&&(E.a.fire({title:"Error",text:e.data.error,icon:"error",confirmButtonClass:"btn btn-secondary",heightAuto:!1}),i.default.cookie.delete("access_token"),i.default.cookie.delete("userdata"),mt.push("/")),400===e.status&&E.a.fire({title:"Error",text:e.data.message,icon:"error",confirmButtonClass:"btn btn-secondary",heightAuto:!1})})})}),w()(v,"get",function(t,e){return new x.a(function(t){N.setHeader(),N.get(e.url).then(function(e){var s=e.data;t(s)}).catch(function(t){var e=t.response;401===e.status&&(E.a.fire({title:"Error",text:e.data.error,icon:"error",confirmButtonClass:"btn btn-secondary",heightAuto:!1}),i.default.cookie.delete("access_token"),i.default.cookie.delete("userdata"),mt.push("/")),400===e.status&&E.a.fire({title:"Error",text:e.data.message,icon:"error",confirmButtonClass:"btn btn-secondary",heightAuto:!1})})})}),v),mutations:{SET_ERROR:function(t,e){t.errors=e}},state:{panel:[]},getters:{}},L=s("+cKO"),D={name:"Login",components:{ThemeButton:o},data:function(){return{baseurl:"",switch1:!0,otpScreen:!1,otpError:!1,loginId:0,signUpOption:!1,versionOption:"v1.0.0",user:{email:"",password:""},otpForm:{otp:""},submitted:!1,submitted2:!1}},validations:{user:{email:{required:L.required,minLength:Object(L.minLength)(2)},password:{required:L.required,minLength:Object(L.minLength)(6)}}},mounted:function(){this.$cookie.get("access_token")&&this.$router.push("/dashboard"),this.getsignup(),this.getVersion()},methods:{getsignup:function(){var t=this;this.$store.dispatch("post",{data:{},url:"auth/get-signup"}).then(function(e){"on"===e.data?t.signUpOption=!0:t.signUpOption=!1}).catch(function(e){t.signUpOption=!1})},getVersion:function(){var t=this;this.$store.dispatch("post",{data:{},url:"auth/get-version"}).then(function(e){t.versionOption=e.data}).catch(function(t){})},handleSubmit:function(t){var e=this;if(t.preventDefault(),this.submitted=!0,this.$v.$touch(),!this.$v.$invalid){var s={data:this.user,url:"auth/login"};this.$store.dispatch("post",s).then(function(t){e.$cookie.set("access_token",t.token,30),e.$cookie.set("userdata",_()(t.data),30),console.log(e.$cookie.get("access_token")),console.log(e.$cookie.get("userdata")),e.$router.push("/dashboard")}).catch(function(t){})}}}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"login-box dark-mode p-3"},[s("theme-button",{attrs:{"id-hide":"false"}}),t._v(" "),s("h1",{staticClass:"dark-mode"},[t._v("Login")]),t._v(" "),t.otpScreen?t._e():s("form",{staticClass:"ml-2 mr-2",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"person-fill"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control chat-input",class:{"is-invalid":t.submitted&&t.$v.user.email.$error},attrs:{type:"text",placeholder:"Username",id:"login-input"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})],1),t._v(" "),t.submitted&&t.$v.user.email.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.user.email.required?t._e():s("span",[t._v("Username is required")]),t._v(" "),t.$v.user.email.minLength?t._e():s("span",[t._v("Username is invalid")])]):t._e()],1),t._v(" "),s("div",{staticClass:"form-group mb-2 mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"shield-lock"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"chat-input form-control",class:{"is-invalid":t.submitted&&t.$v.user.password.$error},attrs:{type:"password",placeholder:"Password",id:"login-input"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})],1),t._v(" "),t.submitted&&t.$v.user.password.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.user.password.required?t._e():s("span",[t._v("Password is required")]),t._v(" "),t.$v.user.password.minLength?t._e():s("span",[t._v("Password is invalid")])]):t._e()],1),t._v(" "),t._m(0),t._v(" "),t.signUpOption?s("div",{staticClass:"my-2 small"},[t._v("\n            Donâ€™t have an account yet? "),s("router-link",{staticClass:"mx-2",attrs:{to:"/signup"}},[t._v(" Sign up")])],1):s("div",{staticClass:"d-grid d-md-flex mt-2 small"},[t._v("\n            New registrations are disabled\n          ")])]),t._v(" "),s("form",{staticClass:"ml-2 mr-2",class:{"d-none":!t.otpScreen}},[s("div",{staticClass:"form-group mb-2 mt-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.otpForm.otp,expression:"otpForm.otp"}],staticClass:"chat-input form-control",class:{"is-invalid":t.submitted2&&t.otpError},attrs:{type:"text",placeholder:"OTP"},domProps:{value:t.otpForm.otp},on:{input:function(e){e.target.composing||t.$set(t.otpForm,"otp",e.target.value)}}}),t._v(" "),t.submitted2&&t.otpError?s("div",{staticClass:"invalid-feedback"},[s("span",[t._v("OTP is required")])]):t._e()]),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"d-flex my-4 justify-content-center"},[s("a",{attrs:{href:"https://www.twitter.com/0perationP",target:"_blank","aria-label":"Twitter",title:"Twitter"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"twitter",variant:"secondary"}})],1),t._v(" "),s("a",{attrs:{href:"https://github.com/0perationPrivacy/",target:"_blank","aria-label":"Github",title:"Github"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"github",variant:"secondary"}})],1),t._v(" "),s("a",{attrs:{href:"https://www.OperationPrivacy.com/Donate",target:"_blank","aria-label":"Donate",title:"Donate"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"credit-card",variant:"secondary"}})],1)])],1),t._v(" "),s("p",{staticClass:"version"},[t._v(t._s(t.versionOption))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-grid"},[e("button",{staticClass:"btn btn-success mt-3",attrs:{type:"submit",id:"login-button"}},[this._v("Login")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-grid d-md-flex"},[e("button",{staticClass:"btn btn-success mt-3",attrs:{type:"button",id:"login-button"}},[this._v("Submit")])])}]};var T=s("VU/8")(D,I,!1,function(t){s("kM3w")},"data-v-270dbc57",null).exports,B={name:"Signup",data:function(){return{version:Object({NODE_ENV:"production"}).VERSION,user:{email:"",password:""},submitted:!1,baseurl:""}},validations:{user:{email:{required:L.required,minLength:Object(L.minLength)(2)},password:{required:L.required,minLength:Object(L.minLength)(6)},c_password:{required:L.required,sameAsPassword:Object(L.sameAs)("password")}}},mounted:function(){"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.getsignup()},methods:{handleSubmit:function(t){var e=this;t.preventDefault(),this.submitted=!0,this.$v.$touch(),this.$v.$invalid||axios.post("auth/register",this.user).then(function(t){e.$router.push("/")}).catch(function(t){401===t.response.status&&e.$swal({icon:"error",title:"Oops...",text:t.response.data.message}),400===t.response.status&&e.$swal({icon:"error",title:"Oops...",text:t.response.data.errors.errors.email[0]})})},getsignup:function(){var t=this;axios.post(this.baseurl+"/api/auth/get-signup",{}).then(function(e){"on"===e.data.data?t.signUpOption=!0:t.$router.push("/")}).catch(function(){t.signUpOption=!1})}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"login-box dark-mode p-3"},[s("h1",{staticClass:"dark-mode"},[t._v("Signup")]),t._v(" "),s("form",{staticClass:"ml-2 mr-2",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"person-fill"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control chat-input",class:{"is-invalid":t.submitted&&t.$v.user.email.$error},attrs:{type:"text",placeholder:"Username",id:"login-input"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})],1),t._v(" "),t.submitted&&t.$v.user.email.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.user.email.required?t._e():s("span",[t._v("Username is required")]),t._v(" "),t.$v.user.email.minLength?t._e():s("span",[t._v("Please enter a valid Username")])]):t._e()],1),t._v(" "),s("div",{staticClass:"form-group mb-2 mt-4"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"shield-lock"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"chat-input form-control",class:{"is-invalid":t.submitted&&t.$v.user.password.$error},attrs:{type:"password",placeholder:"Password",id:"login-input"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})],1),t._v(" "),t.submitted&&t.$v.user.password.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.user.password.required?t._e():s("span",[t._v("Password is required")]),t._v(" "),t.$v.user.password.minLength?t._e():s("span",[t._v("Please enter a valid password")])]):t._e()],1),t._v(" "),s("div",{staticClass:"form-group mb-2 mt-2"},[s("b-input-group",[s("b-input-group-prepend",{attrs:{"is-text":""}},[s("b-icon",{attrs:{icon:"shield-lock"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.c_password,expression:"user.c_password"}],staticClass:"chat-input form-control",class:{"is-invalid":t.submitted&&t.$v.user.c_password.$error},attrs:{type:"password",placeholder:"Confirm Password",id:"clogin-input"},domProps:{value:t.user.c_password},on:{input:function(e){e.target.composing||t.$set(t.user,"c_password",e.target.value)}}})],1),t._v(" "),t.submitted&&t.$v.user.c_password.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.user.c_password.required?t._e():s("span",[t._v("Password is required"),s("br")]),t._v(" "),t.$v.user.c_password.sameAsPassword?t._e():s("span",[t._v("Password and confirm password are not match!")])]):t._e()],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"my-2 small"},[t._v("\n            Already have an account? "),s("router-link",{staticClass:"mx-2",attrs:{to:"/"}},[t._v("Login")])],1)]),t._v(" "),s("div",{staticClass:"d-flex my-4 justify-content-center"},[s("a",{attrs:{href:"https://www.twitter.com/0perationP",target:"_blank","aria-label":"Twitter",title:"Twitter"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"twitter",variant:"secondary"}})],1),t._v(" "),s("a",{attrs:{href:"https://github.com/0perationPrivacy/",target:"_blank","aria-label":"Github",title:"Github"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"github",variant:"secondary"}})],1),t._v(" "),s("a",{attrs:{href:"https://www.OperationPrivacy.com/Donate",target:"_blank","aria-label":"Donate",title:"Donate"}},[s("b-icon",{staticClass:"mx-2",attrs:{"font-scale":"2",icon:"credit-card",variant:"secondary"}})],1)])]),t._v(" "),s("p",{staticClass:"version"},[t._v(t._s(t.version))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-grid"},[e("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit"}},[this._v("Sign Up")])])}]};var A=s("VU/8")(B,F,!1,function(t){s("XQQ7")},"data-v-3397ae6a",null).exports,O=s("Gu7T"),j=s.n(O),V={data:function(){return{access_token:null,headers:null,baseurl:"",profiles:[],activeProfile:null,submitted3:!1,form:{profile:""}}},validations:{form:{profile:{required:L.required}}},mounted:function(){this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.headers={headers:{token:this.access_token}},"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.getallProfile()},methods:{onClickButton:function(t){this.$emit("clicked",t)},changeProfile:function(t){this.activeProfile=t,localStorage.setItem("activeProfile",_()(t)),this.$emit("clicked",t)},activeFirstProfile:function(){this.profiles.length>0?this.changeProfile(this.profiles[0]):(this.activeProfile=null,this.$emit("clicked",null))},getallProfile:function(){var t=this;this.$store.dispatch("post",{data:{},url:"profile/getdata"}).then(function(e){if(t.profiles=e.data,!t.activeProfile){var s=localStorage.getItem("activeProfile");if(s)for(var i=JSON.parse(s),a=0;a<t.profiles.length;a++)t.profiles[a]._id===i._id&&(t.activeProfile=t.profiles[a]);else t.activeProfile=t.profiles[0];t.$emit("clicked",t.activeProfile)}}).catch(function(t){console.log(t)})},handleSubmit:function(t){var e=this;if(this.submitted3=!0,this.$v.$touch(),!this.$v.$invalid){var s={data:this.form,url:"profile/create"};this.$store.dispatch("post",s).then(function(t){e.$swal({icon:"success",title:"Success",text:"Profile added successfully!"}),e.$refs["add-profile"].hide(),e.getallProfile()}).catch(function(t){console.log(t)})}}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.profiles,function(e){return s("div",{key:e._id},[s("b-dropdown-item-button",{on:{click:function(s){return t.changeProfile(e)}}},[s("div",{staticClass:"d-flex flex-row"},[s("div",[s("div",{staticClass:"d-flex flex-column"},[s("div",[t._v("\n              "+t._s(e.profile)+"\n            ")]),t._v(" "),s("div",[e.number&&""!==e.number?s("span",{staticClass:"profileNum"},[t._v("("+t._s(e.number)+")")]):t._e()])])]),t._v(" "),s("div",[e.messageCount>0?s("span",{staticClass:"start-100 translate-middle badge border border-light rounded-circle bg-danger p-2"},[s("span",{staticClass:"visually-hidden"},[t._v("unread messages")])]):t._e()])])]),t._v(" "),s("b-dropdown-divider")],1)}),t._v(" "),s("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-profile",modifiers:{"add-profile":!0}}]},[s("b-icon",{attrs:{icon:"person-plus-fill","aria-hidden":"true"}}),t._v("\n      Add New Profile\n  ")],1),t._v(" "),s("b-dropdown-divider"),t._v(" "),s("b-modal",{ref:"add-profile",attrs:{id:"add-profile",size:"lg",title:"Add Profile","hide-footer":""}},[s("span",{staticClass:"small text-secondary"},[t._v("Profile")]),t._v(" "),s("form",{staticClass:"ml-2 mr-2",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.profile,expression:"form.profile"}],staticClass:"form-control chat-input",class:{"is-invalid":t.submitted3&&t.$v.form.profile.$error},attrs:{name:"profile",placeholder:"Enter Profile"},domProps:{value:t.form.profile},on:{input:function(e){e.target.composing||t.$set(t.form,"profile",e.target.value)}}}),t._v(" "),t.submitted3&&t.$v.form.profile.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.form.profile.required?t._e():s("span",[t._v("Profile are required")])]):t._e()]),t._v(" "),s("div",{staticClass:"d-grid d-md-flex mt-3"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Save")])])])])],2)},staticRenderFns:[]};var M=s("VU/8")(V,U,!1,function(t){s("YZOz")},"data-v-e163c5de",null).exports,R=s("pFYg"),z=s.n(R),H=s("Xxa5"),J=s.n(H),K=s("exGp"),X=s.n(K),G=s("afOB"),W=s.n(G),Y=L.helpers.regex("phonenumber",/^\+?[0-9\(\-\)\ ]{3,17}$/),Q={props:["contacts"],data:function(){return{access_token:null,headers:null,baseurl:"",modelFileValu:"",submitted:!1,userdata:null,editId:!1,csvFile:null,submitted2:!1,form:{first_name:"",last_name:"",number:"",note:""},jsonData:[{first_name:"John",last_name:"Doe",number:"12300XXXXX",note:"notes go here"}],csvUploadArray2:[]}},validations:{form:{first_name:{required:L.required},last_name:{},number:{required:L.required,phonenumber:Y},note:{}}},mounted:function(){},methods:{exportContact:function(){this.downloadFile(this.contacts,"contacts")},onSelect:function(t){var e=this;return X()(J.a.mark(function s(){var i,a;return J.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.csvFile=!0,console.log(t),e.modelFileValu=t.target.files[0].name,i=t.target.files[0],s.next=6,e.readFile(i);case 6:a=s.sent,e.csvUploadArray2=a,console.log(e.csvUploadArray2);case 9:case"end":return s.stop()}},s,e)}))()},readFile:function(t){var e=this;return new x.a(function(s,i){var a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=function(t){var i=t.target.result,a={complete:function(t,s){e.csvUploadArray=t.data}};W.a.parse(i,a);for(var r=[],o=e.csvUploadArray,n=0;n<o.length;++n)if(0!==n&&""!==o[n][0]&&void 0!==o[n][0]&&isNaN(o[n][0])){var l={first_name:o[n][0],last_name:o[n][1],number:o[n][2],note:o[n][3]};r.push(l)}s(r)}})},choseFile2:function(){document.getElementById("model_file_input2").click()},downloadFile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data",s=this.ConvertToCSV(t,["first_name","last_name","number","note"]);console.log(s);var i=new Blob(["\ufeff"+s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),r=URL.createObjectURL(i);-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&a.setAttribute("target","_blank"),a.setAttribute("href",r),a.setAttribute("download",e+".csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},download:function(){this.downloadFile(this.jsonData,"sample_file")},ConvertToCSV:function(t,e){var s="object"!==(void 0===t?"undefined":z()(t))?JSON.parse(t):t,i="",a="";for(var r in e)console.log(r),console.log(e[r]),a+=e[r]+",";i+=(a=a.slice(0,-1))+"\r\n";for(var o=0;o<s.length;o++){var n="";for(var l in e){var c=e[l];n+=s[o][c]+","}i+=n+"\r\n"}return i},openContactModel:function(){this.editId=!1,this.$refs["modal-contact"].show()},handleSubmit:function(t){var e=this;if(this.submitted=!0,this.$v.$touch(),!this.$v.$invalid){if(this.editId){var s=this.form;s.contact_id=this.editId;var i={data:s,url:"contact/update"}}else i={data:this.form,url:"contact/create"};this.$store.dispatch("post",i).then(function(t){e.$refs["modal-contact"].hide(),e.$emit("onaddContact",!0)}).catch(function(t){console.log(t)})}},handleSubmit2:function(){var t=this;if(this.csvUploadArray2.length>0){var e={data:{contacts:this.csvUploadArray2},url:"contact/multiple-add"};this.$store.dispatch("post",e).then(function(e){t.$refs["modal-contact"].hide(),t.$emit("onaddContact",!0),t.modelFileValu=""}).catch(function(t){console.log(t)})}else this.$swal({icon:"error",title:"Error",text:"Please upload valid file!"})},deletechat:function(t){var e=this;this.$swal.fire({icon:"info",title:"Do you want to delete this contact?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(s){if(s.isConfirmed){var i={data:{contact_id:t},url:"contact/delete"};e.$store.dispatch("post",i).then(function(t){e.$swal({icon:"success",title:"Success",text:"Contact Deleted successfully!"}),e.$emit("onaddContact",!0)}).catch(function(t){console.log(t)})}else s.isDenied&&e.$swal.fire("contact not deleted","","info")})},updateContact:function(t){this.editId=t._id,this.form={first_name:t.first_name,last_name:t.last_name,number:t.number,note:t.note},this.$refs["modal-contact"].show()},deleteAll:function(){var t=this;this.$swal.fire({icon:"info",title:"Are you sure you want to delete ALL contacts?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete all",denyButtonText:"No"}).then(function(e){if(e.isConfirmed){t.$store.dispatch("post",{data:{},url:"contact/deleteall"}).then(function(e){t.$swal({icon:"success",title:"Success",text:"All contacts deleted successfully"}),t.$emit("onaddContact",!0)}).catch(function(t){console.log(t)})}else e.isDenied&&t.$swal.fire("contacts not deleted","","info")})}}},Z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-icon",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-right",modifiers:{"sidebar-right":!0}}],staticClass:"pointer-icon m-2",attrs:{"font-scale":"1",icon:"person-lines-fill","aria-hidden":"true",title:"Contacts"}}),t._v(" "),s("b-sidebar",{attrs:{id:"sidebar-right",right:"",shadow:"","no-header":"",backdrop:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hide;return[s("div",{staticClass:"d-flex flex-row mt-2 justify-content-between bd-highlight"},[s("div",{staticClass:"bd-highlight dropDown"},[s("b-button",{staticClass:"float-left d-flex m-1",attrs:{size:"sm",variant:"primary"}},[s("b-icon",{attrs:{icon:"x",scale:"1"},on:{click:i}})],1)],1),t._v(" "),s("div",[s("div",{staticClass:"d-flex justify-content-start"},[s("div",{staticClass:"ml-1"},[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-left d-flex m-1",attrs:{title:"Add Contact",size:"sm",variant:"primary"},on:{click:function(e){return t.openContactModel()}}},[s("b-icon",{attrs:{icon:"plus-circle",scale:"1"}})],1)],1),t._v(" "),s("div",{staticClass:"ml-2"},[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-left d-flex m-1",attrs:{title:"Export Contact",size:"sm",variant:"primary"},on:{click:function(e){return t.exportContact()}}},[s("b-icon",{attrs:{icon:"cloud-download",scale:"1"}})],1)],1),t._v(" "),s("div",{staticClass:"ml-2"},[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"float-left d-flex m-1",attrs:{title:"Delete All Contact",size:"sm",variant:"danger"},on:{click:function(e){return t.deleteAll()}}},[s("b-icon",{attrs:{icon:"trash-fill",scale:"1"}})],1)],1),t._v(" "),s("div",[s("h4",{staticClass:"pr-3 m-1"},[t._v("\n                                Contacts\n                            ")])])])])]),t._v(" "),s("div",[s("ul",{staticClass:"list-group"},t._l(t.contacts,function(e){return s("li",{key:e._id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[s("div",{staticClass:"d-flex flex-column bd-highlight"},[s("div",{staticClass:"bd-highlight"},[t._v("\n                      "+t._s(e.first_name)+" "+t._s(e.last_name)+"\n                    ")]),t._v(" "),s("div",{staticClass:"bd-highlight"},[t._v(t._s(e.number))])]),t._v(" "),s("div",[s("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"pencil-square",title:"Update"},on:{click:function(s){return t.updateContact(e)}}}),t._v(" "),s("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"trash-fill",title:"Delete"},on:{click:function(s){return t.deletechat(e._id)}}})],1)])}),0)])]}}])}),t._v(" "),s("b-modal",{ref:"modal-contact",attrs:{id:"modal-contact",title:"Contact","hide-footer":""}},[s("div",{staticClass:"card mt-4"},[s("div",{staticClass:"card-body"},[s("b-tabs",{attrs:{"content-class":"mt-3"}},[s("b-tab",{attrs:{title:"Add Contact",active:""}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:" form-group m-auto mb-2"},[s("label",[t._v("First Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.first_name,expression:"form.first_name"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.form.first_name.$error},attrs:{type:"text",placeholder:"First Name",id:"first_name",name:"first_name"},domProps:{value:t.form.first_name},on:{input:function(e){e.target.composing||t.$set(t.form,"first_name",e.target.value)}}}),t._v(" "),t.submitted&&!t.$v.form.first_name.required?s("div",{staticClass:"invalid-feedback"},[t._v("First Name is required")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group m-auto mb-2"},[s("label",[t._v("Last Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.last_name,expression:"form.last_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Last Name",id:"last_name",name:"last_name"},domProps:{value:t.form.last_name},on:{input:function(e){e.target.composing||t.$set(t.form,"last_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group m-auto mb-2"},[s("label",[t._v("Number")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.number,expression:"form.number"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.form.number.$error},attrs:{type:"text",placeholder:"Number",id:"number",name:"number"},domProps:{value:t.form.number},on:{input:function(e){e.target.composing||t.$set(t.form,"number",e.target.value)}}}),t._v(" "),t.submitted&&!t.$v.form.number.required?s("div",{staticClass:"invalid-feedback"},[t._v("Number is required")]):t._e(),t._v(" "),t.submitted&&!t.$v.form.number.phonenumber?s("div",{staticClass:"invalid-feedback"},[t._v("Please enter valid number. ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group m-auto mb-2"},[s("label",[t._v("Note")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.note,expression:"form.note"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Note",id:"note",name:"note"},domProps:{value:t.form.note},on:{input:function(e){e.target.composing||t.$set(t.form,"note",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"d-flex justify-content-start bd-highlight"},[s("div",{staticClass:"bd-highlight"},[s("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"}},[t._v("Save")])])])])]),t._v(" "),s("b-tab",{attrs:{title:"Add Multiple"}},[s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-success mb-2 float-right",on:{click:function(e){return t.download()}}},[t._v("Sample File")])]),t._v(" "),s("div",{staticClass:"input-group mb-3"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text paperClip chat-input",attrs:{id:"basic-addon1"},on:{click:function(e){return t.choseFile2()}}},[s("b-icon",{attrs:{icon:"paperclip"}})],1)]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.modelFileValu,expression:"modelFileValu"}],staticClass:"form-control csv_field_input chat-input",attrs:{type:"text",placeholder:"Choose file","aria-label":"Username",readonly:"","aria-describedby":"basic-addon1"},domProps:{value:t.modelFileValu},on:{click:function(e){return t.choseFile2()},input:function(e){e.target.composing||(t.modelFileValu=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group mb-2 mt-4 d-none"},[s("input",{staticClass:"form-control chat-input",attrs:{type:"file",id:"model_file_input2",name:"csvFile",accept:".csv"},on:{change:function(e){return t.onSelect(e)}}})]),t._v(" "),s("div",{staticClass:"d-flex justify-content-start bd-highlight"},[s("div",{staticClass:"bd-highlight"},[s("button",{staticClass:"btn btn-primary float-right",attrs:{type:"button"},on:{click:function(e){return t.handleSubmit2()}}},[t._v("Save")])])])])],1)],1)])])],1)},staticRenderFns:[]};var tt={components:{ProfileView:M,ThemeButton:o,Contact:s("VU/8")(Q,Z,!1,function(t){s("xqfx")},"data-v-1f9d4860",null).exports},data:function(){return{user:{api_key:"",number:"",twilio_sid:"",twilio_token:"",twilio_number:"",profile:""},contacts:[],activeChat:"",submitted:!1,messageListLoader:!0,numbers:[],baseurl:"",userdata:null,access_token:null,activeProfile:null,headers:null,tNumbers:[],twilioNumbers:[],options:[{text:"Telnyx",value:"telnyx"},{text:"Twilio",value:"twilio"}],selected:"telnyx"}},validations:{user:{api_key:{required:L.required},number:{required:L.required},twilio_sid:{required:L.required},twilio_token:{required:L.required},twilio_number:{required:L.required},profile:{required:L.required}}},mounted:function(){"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000"),this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.headers={headers:{token:this.access_token}},this.onaddContact()},methods:{onaddContact:function(){var t=this;this.$emit("my_signal"),this.$emit("my_signal"),this.$store.dispatch("get",{url:"contact/get-all"}).then(function(e){t.contacts=e.data,t.$emit("onaddContact",e.data)}).catch(function(t){console.log(t)})},getValidString:function(t){if(t.length>10)var e=t.substring(0,t.length-(t.length-10))+"..";else e=t;return e},getOneProfile:function(){var t=this,e={data:{setting:this.activeProfile._id},url:"profile/getdata-one"};this.$store.dispatch("post",e).then(function(e){t.activeProfile=e.data}).catch(function(t){console.log(t)})},refreshProfile:function(){this.$refs.childComponent.getallProfile()},onClickChild2:function(t){this.activeProfile=t,this.getSetting()},onClickChild:function(t){this.activeProfile=t,this.messageListLoader=!0,this.getNumberList(),t.refresh=!0,this.$emit("activeChat",t),this.getSetting()},firstChatShow:function(t){var e=document.getElementById(t.id);e&&(e.style.display="none"),this.activeChat=t._id,localStorage.setItem("activenumber",_()(t)),this.$emit("clicked",t)},logout:function(){this.$cookie.delete("access_token"),this.$cookie.delete("userdata"),this.$router.push("/")},getNumberList:function(){var t=this;this.numbers=[];var e={data:{user:this.userdata._id,setting:this.activeProfile._id},url:"setting/sms-number-list"};this.$store.dispatch("post",e).then(function(e){t.numbers=e,t.messageListLoader=!1}).catch(function(t){console.log(t)})},getSetting:function(){var t=this,e={data:{user:this.userdata._id,setting:this.activeProfile._id},url:"setting/get-setting"};this.$store.dispatch("post",e).then(function(e){e.data&&(t.user=e.data,t.user.twilio_number=e.data.number,e.data.number,t.getNumbers(e.data.type),t.selected=e.data.type)}).catch(function(t){console.log(t)})},deleteProfile:function(){var t=this;this.$swal.fire({icon:"info",title:"Do you want to delete this Profile?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(e){if(e.isConfirmed){var s={data:{user:t.userdata._id,profile_id:t.activeProfile._id},url:"profile/delete-profile"};t.$store.dispatch("post",s).then(function(e){if(e.data){t.$swal({icon:"success",title:"Success",text:"Profile deleted successfully!"}),t.user.api_key="",t.user.number="",t.user.twilio_sid="",t.user.twilio_token="",t.user.twilio_number="",t.tNumbers=[],t.twilioNumbers=[],t.activeProfile=e.data,localStorage.removeItem("activeProfile"),t.$refs["my-modal"].hide(),t.$refs.childComponent.getallProfile();var s=t;setTimeout(function(){s.$refs.childComponent.activeFirstProfile()},2e3)}}).catch(function(t){console.log(t)})}else e.isDenied&&t.$swal.fire("Profile not deleted","","info")})},deleteApiKey:function(){var t=this;this.$swal.fire({icon:"info",title:"Do you want to delete this setting?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(e){if(e.isConfirmed){var s={data:{user:t.userdata._id,profile_id:t.activeProfile._id},url:"setting/delete-key"};t.$store.dispatch("post",s).then(function(e){t.$swal({icon:"success",title:"Success",text:"Key deleted successfully!"}),t.user.api_key="",t.user.number="",t.user.twilio_sid="",t.user.twilio_token="",t.user.twilio_number="",t.tNumbers=[],t.twilioNumbers=[],t.activeProfile=e.data,t.$refs.childComponent.getallProfile()}).catch(function(t){console.log(t)})}else e.isDenied&&t.$swal.fire("setting not deleted","","info")})},getNumbers:function(t){var e=this,s=this.user;s.type=t;var i={data:s,url:"setting/get-number"};"telnyx"===t?this.tNumbers=[]:this.twilioNumbers=[],this.$store.dispatch("post",i).then(function(s){"telnyx"===t?e.tNumbers=s.data.data:e.twilioNumbers=s.data}).catch(function(t){console.log(t)})},handleSubmit:function(t){var e=this;if(this.submitted=!0,this.$v.$touch(),""!=this.user.profile||"telnyx"===this.selected&&!this.$v.user.api_key.$error&&!this.$v.user.number.$error&&!this.$v.user.profile.$error||""!=this.user.profile||"twilio"===this.selected&&!this.$v.user.twilio_sid.$error&&!this.$v.user.twilio_token.$error&&!this.$v.user.twilio_number.$error&&!this.$v.user.profile.$error){var s="";if("telnyx"===this.selected)for(var i=0;i<this.tNumbers.length;i++)this.tNumbers[i].phone_number===this.user.number&&(s=this.tNumbers[i].id);else for(var a=0;a<this.twilioNumbers.length;a++)this.twilioNumbers[a].phoneNumber===this.user.twilio_number&&(s=this.twilioNumbers[a].sid);var r={data:{api_key:this.user.api_key,number:this.user.number,user:this.userdata._id,sid:s,type:this.selected,twilio_sid:this.user.twilio_sid,twilio_token:this.user.twilio_token,twilio_number:this.user.twilio_number,setting:this.activeProfile._id,profile:this.user.profile},url:"setting/create"};this.$store.dispatch("post",r).then(function(t){e.$swal({icon:"success",title:"Success",text:"Settings saved successfully!"}),e.$refs["my-modal"].hide(),e.activeProfile=t.data,e.$refs.childComponent.getallProfile(),e.$v.$reset()}).catch(function(t){console.log(t)})}}}},et={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"profile"},[s("div",{staticClass:"d-flex flex-row bd-highlight align-items-center align-self-center"},[s("div",{staticClass:"mt-2"},[s("div",{staticClass:"d-flex flex-row bd-highlight"},[s("div",{staticClass:"bd-highlight"},[s("contact",{attrs:{contacts:t.contacts},on:{onaddContact:t.onaddContact}})],1),t._v(" "),s("div",{staticClass:"bd-highlight"},[s("b-icon",{staticClass:"m-2",attrs:{"font-scale":"1",icon:"telephone","aria-hidden":"true",title:"Call"}})],1),t._v(" "),s("div",{staticClass:"bd-highlight"},[s("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-2",modifiers:{"modal-2":!0}}],staticClass:"m-2",staticStyle:{cursor:"pointer"},attrs:{"font-scale":"1",icon:"pencil-square","aria-hidden":"true",title:"Compose"}})],1)])]),t._v(" "),s("div",{staticClass:"icons mt-2"},[s("b-dropdown",{staticClass:"dropDown",attrs:{variant:"primary"},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("div",{staticClass:"d-flex flex-row align-items-center bd-highlight"},[t.activeProfile?s("div",{staticClass:"d-flex flex-column bd-highlight"},[s("div",{staticClass:"profileName"},[t._v(t._s(t.activeProfile.profile))]),t._v(" "),s("div",{staticClass:"profileNum"},[t._v(t._s(t.activeProfile.number))]),t._v(" "),t.activeProfile.totalCount>0?s("span",{staticClass:"position-absolute top-0 start-100 translate-middle badge border border-light rounded-circle bg-danger p-2"},[s("span",{staticClass:"visually-hidden"},[t._v("unread messages")])]):t._e()]):s("div",[t.userdata?s("span",[t._v(t._s(t.userdata.name))]):t._e()]),t._v(" "),s("div",[s("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"1",icon:"person-badge","aria-hidden":"true",title:"Profiles"}})],1),t._v(" "),s("div",{staticClass:"droupdownAdd"})])]},proxy:!0}])},[t._v(" "),s("b-dropdown-divider"),t._v(" "),t.activeProfile?s("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}]},[s("b-icon",{attrs:{icon:"gear-fill","aria-hidden":"true"}}),t._v("\n            Settings\n          ")],1):t._e(),t._v(" "),t.activeProfile?s("b-dropdown-divider"):t._e(),t._v(" "),s("profile-view",{ref:"childComponent",on:{clicked2:t.onClickChild2,clicked:t.onClickChild}}),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){return t.logout()}}},[s("b-icon",{attrs:{icon:"power","aria-hidden":"true"}}),t._v("\n            Logout\n          ")],1)],1)],1)])]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"contact-list"},[t.messageListLoader?s("div",{staticClass:"box-placeholder"},[t._m(1),t._v(" "),s("hr"),t._v(" "),t._m(2),t._v(" "),s("hr"),t._v(" "),t._m(3),t._v(" "),s("hr"),t._v(" "),t._m(4)]):t._e(),t._v(" "),t._l(t.numbers,function(e){return s("div",{key:e._id,staticClass:"contact",class:{activeChat:t.activeChat==e._id},on:{click:function(s){return t.firstChatShow(e)}}},[s("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"2",icon:"person-bounding-box","aria-hidden":"true"}}),t._v(" "),s("div",{staticClass:"contact-preview"},[s("div",{staticClass:"contact-text"},[e.contact?s("h1",{staticClass:"font-name"},[t._v(t._s(e.contact.first_name)+" "+t._s(e.contact.last_name))]):s("h1",{staticClass:"font-name"},[t._v(t._s(e._id))]),t._v(" "),s("p",{staticClass:"font-preview"},[t._v(t._s(t.getValidString(e.message)))])])]),t._v(" "),s("div",{staticClass:"contact-time"},[s("p",{},[t._v(t._s(t._f("moment")(e.created_at,"HH:mm")))]),t._v(" "),e.isview>0?s("span",{staticClass:"badge message_count bg-success",attrs:{id:e._id}},[t._v(t._s(e.isview))]):t._e()])],1)})],2),t._v(" "),s("b-modal",{ref:"my-modal",attrs:{id:"modal-1",size:"lg",title:"Settings","hide-footer":""}},[s("theme-button",{attrs:{"id-hide":"false"}}),t._v(" "),s("form",{staticClass:"ml-2 mr-2",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("b-form-radio-group",{attrs:{id:"btn-radios-2",options:t.options,"button-variant":"outline-primary",size:"lg",name:"radio-btn-outline",buttons:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t._v(" "),s("div",{staticClass:"card form-group mt-4"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row m-auto"},[s("div",{staticClass:"col-auto m-auto mb-1 mb-sm-auto"},[s("label",[s("b-icon",{attrs:{icon:"person-fill","aria-hidden":"true"}}),t._v("\n                Profile\n              ")],1)]),t._v(" "),s("div",{staticClass:"col-sm m-auto col-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.profile,expression:"user.profile"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.user.profile.$error},attrs:{type:"text",placeholder:"Alias/Name"},domProps:{value:t.user.profile},on:{input:function(e){e.target.composing||t.$set(t.user,"profile",e.target.value)}}}),t._v(" "),t.submitted&&t.$v.user.profile.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.user.profile.required?t._e():s("span",[t._v("Profile is required")])]):t._e()]),t._v(" "),s("div",{staticClass:"col-1 m-auto"},[s("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"}},[s("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"},on:{click:function(e){return t.deleteProfile()}}})],1)])])])]),t._v(" "),"telnyx"==t.selected?s("div",{staticClass:"card form-group mt-4"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto m-auto"},[s("label",[s("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),t._v(" "),s("b",[t._v("Telnyx")]),t._v(" API Key\n              ")],1)]),t._v(" "),s("div",{staticClass:"col-sm col-12 m-auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.api_key,expression:"user.api_key"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.user.api_key.$error&&""==t.user.profile},attrs:{type:"text",placeholder:"Telnyx API Key"},domProps:{value:t.user.api_key},on:{input:function(e){e.target.composing||t.$set(t.user,"api_key",e.target.value)}}}),t._v(" "),t.submitted&&t.$v.user.api_key.$error&&""==t.user.profile?s("div",{staticClass:"invalid-feedback"},[t.$v.user.api_key.required?t._e():s("span",[t._v("API Key is required")])]):t._e()])]),t._v(" "),s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto m-auto"},[s("button",{staticClass:"dark-mode btn btn-secondary btn-sm",attrs:{type:"button",id:"get-number"},on:{click:function(e){return t.getNumbers("telnyx")}}},[s("b-icon",{attrs:{icon:"telephone-plus","aria-hidden":"true"}}),t._v("\n                Get Number\n              ")],1)]),t._v(" "),s("div",{staticClass:"col col-lg-6 m-auto"},[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.user.number,expression:"user.number"}],class:{"is-invalid":t.submitted&&t.$v.user.number.$error&&""==t.user.profile},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user,"number",e.target.multiple?s:s[0])}}},t._l(t.tNumbers,function(e){return s("option",{key:e.id,domProps:{value:e.phone_number}},[t._v("\n                    "+t._s(e.phone_number)+"\n                  ")])}),0),t._v(" "),t.submitted&&t.$v.user.number.$error&&""==t.user.profile?s("div",{staticClass:"invalid-feedback"},[t.$v.user.number.required?t._e():s("span",[t._v("Number is required")])]):t._e()])]),t._v(" "),s("div",{staticClass:"col-auto m-auto"},[""!=t.user.api_key?s("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(e){return t.deleteApiKey()}}},[s("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"}})],1):t._e()])])])]):t._e(),t._v(" "),"twilio"==t.selected?s("div",{staticClass:"card form-group mt-4"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto col-lg-3 m-auto"},[s("label",[s("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),t._v(" "),s("b",[t._v("Twilio")]),t._v(" SID\n              ")],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm col-lg-9 m-auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.twilio_sid,expression:"user.twilio_sid"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.user.twilio_sid.$error&&""==t.user.profile},attrs:{type:"text",placeholder:"Twilio SID"},domProps:{value:t.user.twilio_sid},on:{input:function(e){e.target.composing||t.$set(t.user,"twilio_sid",e.target.value)}}}),t._v(" "),t.submitted&&t.$v.user.twilio_sid.$error&&""==t.user.profile?s("div",{staticClass:"invalid-feedback"},[t.$v.user.twilio_sid.required?t._e():s("span",[t._v("Twilio sid is required")])]):t._e()])]),t._v(" "),s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto col-lg-3 m-auto"},[s("label",[s("b-icon",{attrs:{icon:"key","aria-hidden":"true"}}),t._v(" "),s("b",[t._v("Twilio")]),t._v(" Token\n              ")],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm col-lg-9 m-auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.twilio_token,expression:"user.twilio_token"}],staticClass:"form-control ",class:{"is-invalid":t.submitted&&t.$v.user.twilio_token.$error&&""==t.user.profile},attrs:{type:"text",placeholder:"Twilio Token"},domProps:{value:t.user.twilio_token},on:{input:function(e){e.target.composing||t.$set(t.user,"twilio_token",e.target.value)}}}),t._v(" "),t.submitted&&t.$v.user.twilio_token.$error&&""==t.user.profile?s("div",{staticClass:"invalid-feedback"},[t.$v.user.twilio_token.required?t._e():s("span",[t._v("Twilio token is required")])]):t._e()])]),t._v(" "),s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-auto m-auto"},[s("button",{staticClass:"dark-mode btn btn-secondary btn-sm",attrs:{type:"button",id:"get-number-twilio"},on:{click:function(e){return t.getNumbers("twilio")}}},[s("b-icon",{attrs:{icon:"telephone-plus","aria-hidden":"true"}}),t._v("\n                Get Number\n              ")],1)]),t._v(" "),s("div",{staticClass:"col col-lg-6 m-auto"},[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.user.twilio_number,expression:"user.twilio_number"}],class:{"is-invalid":t.submitted&&t.$v.user.twilio_number.$error&&""==t.user.profile},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user,"twilio_number",e.target.multiple?s:s[0])}}},t._l(t.twilioNumbers,function(e){return s("option",{key:e.sid,domProps:{value:e.phoneNumber}},[t._v(t._s(e.phoneNumber))])}),0),t._v(" "),t.submitted&&t.$v.user.twilio_number.$error&&""==t.user.profile?s("div",{staticClass:"invalid-feedback"},[t.$v.user.twilio_number.required?t._e():s("span",[t._v("Number is required")])]):t._e()])]),t._v(" "),s("div",{staticClass:"col-auto m-auto"},[""!=t.user.api_key?s("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(e){return t.deleteApiKey()}}},[s("b-icon",{attrs:{"font-scale":"1.5",icon:"trash","aria-hidden":"true"}})],1):t._e()])])])]):t._e(),t._v(" "),s("div",{staticClass:"d-grid d-md-flex"},[s("button",{staticClass:"btn btn-success mt-4",attrs:{type:"submit",id:"login-button"}},[t._v("Save")])])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrap-search"},[e("div",{staticClass:"search"},[e("i",{staticClass:"fa fa-search fa",attrs:{"aria-hidden":"true"}}),this._v(" "),e("input",{staticClass:"input-search",attrs:{type:"text",placeholder:"Search"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"p-4"},[e("span",{staticClass:"category text link"}),this._v(" "),e("h4",{staticClass:"text line"}),this._v(" "),e("h4",{staticClass:"text"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image"},[e("div",{staticClass:"embed-responsive embed-responsive-16by9"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"excerpt p-4"},[e("div",{staticClass:"text line"}),this._v(" "),e("div",{staticClass:"text line"}),this._v(" "),e("div",{staticClass:"text"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"excerpt p-4"},[e("div",{staticClass:"text line"}),this._v(" "),e("div",{staticClass:"text line"}),this._v(" "),e("div",{staticClass:"text"})])}]};var st=s("VU/8")(tt,et,!1,function(t){s("wF2+")},"data-v-049ff2c7",null).exports,it=s("vdhV"),at=s.n(it),rt=s("x6bz"),ot={name:"dashboard",components:{NumberList:st,VueTagsInput:at.a,ThemeButton:o},data:function(){return{isLoading:!1,fullPage:!0,contacts:[],selectedContact:"",dropArea:null,progressBar:null,filesDone:0,filesToDo:0,uploadProgress:[],uploadedImages:[],activeChatData:!1,activeProfile:null,activeChat:"",msg:"Welcome to dashboard",tags:[],sms:{numbers:"",message:""},setting:{},chatListLoader:!1,submitted2:!1,userdata:null,access_token:null,headers:null,messages:[],messageBody:"",socket:null,baseurl:"",vw:0,vh:0,modelMms:!1,modelFileValu:"",zoomImage:""}},created:function(){window.addEventListener("resize",this.updateVw,{passive:!0})},destroyed:function(){window.removeEventListener("resize",this.updateVw,{passive:!0})},mounted:function(){var t=this;this.$cookie.get("access_token")||this.$router.push("/"),this.updateVw(),"http://localhost:8080"===window.location.origin&&(this.baseurl="http://localhost:3000");var e=rt(this.baseurl,{transports:["websocket"]});this.socket=e;var s=this;this.socket.on("new_message",function(t){s.getNumberList(),s.activeChatData&&s.showChat(s.activeChat)}),this.userdata=JSON.parse(this.$cookie.get("userdata")),this.access_token=this.$cookie.get("access_token"),this.socket.emit("join_profile_channel",this.userdata._id.toString()),this.socket.on("user_message",function(t){s.notifyMe(t.number,t.message),s.activeChatData?s.showChat(s.activeChat):(s.$refs.numberList.getOneProfile(),s.$refs.numberList.refreshProfile()),s.$refs.numberList.getNumberList()}),this.headers={headers:{token:this.access_token}},this.dropArea=document.getElementById("drop-area1"),["dragenter","dragover","dragleave","drop"].forEach(function(e){t.dropArea.addEventListener(e,t.preventDefaults,!1)}),["dragenter","dragover"].forEach(function(e){t.dropArea.addEventListener(e,t.highlight,!1)}),["dragleave","drop"].forEach(function(e){t.dropArea.addEventListener(e,t.unhighlight,!1)}),this.dropArea.addEventListener("drop",this.handleDrop,!1),this.progressBar=document.getElementById("progress-bar")},validations:{sms:{numbers:{required:L.required},message:{required:L.required}}},methods:{messageRefresh:function(){this.messages=[]},contactChangeEvent:function(t){console.log(this.sms.numbers);var e={text:t.target.value,tiClasses:["ti-valid"]};this.tags.push(e),this.selectedContact=""},onaddContact:function(t){this.contacts=t},hiddenImage:function(){this.zoomImage="",document.getElementById("hidden").style.display="none"},showImage:function(t){this.zoomImage=t,document.getElementById("hidden").style.display="block"},choseFile2:function(){document.getElementById("model_file_input").click()},file_upload:function(){document.getElementById("fileElem").click()},initializeProgress:function(t){this.progressBar.value=0,this.uploadProgress=[];for(var e=this.numFiles;e>0;e--)this.uploadProgress.push(0)},updateProgress:function(t,e){this.uploadProgress[t]=e;var s=this.uploadProgress.reduce(function(t,e){return t+e},0)/this.uploadProgress.length;this.progressBar.value=s},progressDone:function(){this.filesDone++,this.progressBar.value=this.filesDone/this.filesToDo*100},handleDrop:function(t){var e=t.dataTransfer.files;this.handleFiles(e)},handleFiles:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){this.modelMms=!0;for(var e=[],s=0;s<t.length;s++)e.push(t[s].name);this.modelFileValu=e.join()}else this.modelMms=!1;t=[].concat(j()(t)),this.initializeProgress(t.length),t.forEach(this.uploadFile)},previewFile:function(t){var e=new FileReader;e.readAsDataURL(t),e.onloadend=function(){var t=document.createElement("img");t.style.width="150px",t.src=e.result,document.getElementById("gallery").appendChild(t)}},removeFromPrevie:function(t){for(var e=[],s=0;s<this.uploadedImages.length;s++)this.uploadedImages[s]!==t&&e.push(this.uploadedImages[s]);this.uploadedImages=e,this.uploadedImages.length<=0&&(document.getElementById("drop-area").style.display="none")},uploadFile:function(t,e){var s=this.baseurl+"/api/media/upload-files",i=new XMLHttpRequest,a=new FormData;i.open("POST",s,!0),i.setRequestHeader("token",this.access_token);var r=this;i.upload.addEventListener("progress",function(t){r.updateProgress(e,100*t.loaded/t.total||100)}),i.addEventListener("readystatechange",function(t){if(4===i.readyState&&200===i.status){var e=JSON.parse(i.responseText);r.uploadedImages.push(""+e.data.media)}else 4===i.readyState&&i.status}),a.append("file",t),i.send(a)},highlight:function(t){document.getElementById("drop-area").style.display="block",this.dropArea.classList.add("highlight")},unhighlight:function(t){this.dropArea.classList.remove("highlight")},preventDefaults:function(t){t.preventDefault(),t.stopPropagation()},activeProfileView:function(t){void 0!==t.refresh&&t.refresh&&(this.messages=[]),this.activeProfile=t},onClickChild:function(t){this.firstChatShow(t)},notifyMe:function(t,e){var s="https://www.operationprivacy.com/img/favicon/favicon.ico";if("Notification"in window)if("granted"===Notification.permission){new Notification("Message from "+t,{body:e,dir:"auto",icon:s})}else"denied"!==Notification.permission&&Notification.requestPermission(function(i){("permission"in Notification||(Notification.permission=i),"granted"===i)&&new Notification("Message from "+t,{body:e,dir:"auto",icon:s})});else alert("This browser does not support desktop notification")},deletechat:function(){var t=this;this.$swal.fire({icon:"info",title:"Do you want to delete this chat?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes, Delete",denyButtonText:"No"}).then(function(e){if(e.isConfirmed){var s={data:{user:t.userdata._id,number:t.activeChat},url:"setting/message-list-delete"};t.$store.dispatch("post",s).then(function(e){t.activeChatData&&t.showChat(t.activeChat),t.$refs.numberList.getNumberList()}).catch(function(t){console.log(t)})}else e.isDenied&&t.$swal.fire("chat not deleted","","info")})},sendSms:function(){if(this.isLoading=!0,""===this.messageBody.trim()&&0===this.uploadedImages.length)return this.$swal({icon:"error",title:"Oops...",text:"Message or file required"}),void(this.isLoading=!1);var t=[JSON.parse(localStorage.getItem("activenumber"))._id];this.commonSendMessage(t,this.messageBody)},commonSendMessage:function(t,e){var s=this,i={data:{user:this.userdata._id,numbers:t,message:e,profile:this.activeProfile,media:this.uploadedImages},url:"setting/send-sms"};this.$store.dispatch("post",i).then(function(t){s.messageBody="",s.sms.numbers="",s.sms.message="",s.uploadedImages=[],s.modelFileValu="",document.getElementById("drop-area").style.display="none",s.tags=[],s.$refs.numberList.getNumberList(),s.activeChatData&&s.showChat(s.activeChat),s.$refs["my-modal2"].hide(),s.vw<576&&s.$refs.mySidebar2.hide(),s.isLoading=!1}).catch(function(t){console.log(t)})},firstChatShow:function(t){this.chatListLoader=!0;var e=document.getElementById(t._id);e&&e.remove(),this.showChat(t),document.getElementById("drop-area").style.display="none",this.uploadedImages=[],this.vw<576&&this.$refs.mySidebar2.hide()},showChat:function(t){var e=this;this.activeChat=t,this.activeChatData=!0;var s={data:{user:this.userdata._id,number:t,profile:this.activeProfile},url:"setting/message-list"};this.$store.dispatch("post",s).then(function(t){e.messages=t,e.chatListLoader=!1,setTimeout(function(){var t=document.getElementById("chat-container");t.scrollTop=t.scrollHeight,t.animate({scrollTop:t.scrollHeight})},1e3),e.$refs.numberList.refreshProfile(),e.$refs.numberList.getOneProfile()}).catch(function(t){console.log(t)})},handleSubmit2:function(t){if(this.submitted2=!0,this.$v.$touch(),this.isLoading=!0,this.tags.length<=0)this.$swal({icon:"error",title:"Oops...",text:"please enter number!"});else{for(var e=[],s=0;s<this.tags.length;s++)e.push(this.tags[s].text);!this.$v.sms.message.$error||this.uploadedImages.length>0?this.commonSendMessage(e,this.sms.message):(this.$swal({icon:"error",title:"Oops...",text:"Message or file required!"}),this.isLoading=!1)}},updateVw:function(){this.vw=this.getVw(),this.vh=this.getVh();var t=this.vh-120;document.getElementById("wrapbody").style.height=this.vh+"px",document.getElementById("chat_body").style.height=t+"px"},getVw:function(){return Math.round(Math.max(document.documentElement.clientWidth||0,window.innerWidth||0))},getVh:function(){return Math.round(Math.max(document.documentElement.innerHeight||0,window.innerHeight||0))}}},nt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap",attrs:{id:"wrapbody"}},[t.isLoading?s("div",{attrs:{id:"loader"}},[t._m(0)]):t._e(),t._v(" "),s("theme-button",{attrs:{"id-hide":"true"}}),t._v(" "),t.vw<576?s("b-sidebar",{ref:"mySidebar2",staticClass:"d-sm-none",attrs:{id:"sidebar-no-header","aria-labelledby":"sidebar-no-header-title","no-header":"",shadow:"",backdrop:"",visible:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hide;return[s("div",{staticClass:"d-flex flex-row-reverse bd-highlight"},[s("div",{staticClass:"bd-highlight dropDown"},[s("b-button",{staticClass:"float-right d-flex",attrs:{size:"sm",variant:"primary"}},[s("b-icon",{attrs:{icon:"x",scale:"1"},on:{click:i}})],1)],1)]),t._v(" "),s("number-list",{ref:"numberList",on:{onaddContact:t.onaddContact,activeChat:t.activeProfileView,clicked:t.onClickChild}})]}}],null,!1,2507129991)}):t._e(),t._v(" "),s("section",{staticClass:"col-auto col-md-4 d-none d-sm-block"},[t.vw>=576?s("number-list",{ref:"numberList",on:{onaddContact:t.onaddContact,activeChat:t.activeProfileView,clicked:t.onClickChild}}):t._e()],1),t._v(" "),s("section",{staticClass:"col col-md-8 pb-2",attrs:{id:"drop-area1"}},[s("div",{staticClass:"chat-head"},[s("b-icon",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-no-header",modifiers:{"sidebar-no-header":!0}}],staticClass:"mx-2 my-auto d-sm-none",attrs:{"font-scale":"2",icon:"chevron-right","aria-hidden":"true"}}),t._v(" "),s("b-icon",{staticClass:"mx-2 my-auto",attrs:{"font-scale":"2",icon:"person-bounding-box","aria-hidden":"true"}}),t._v(" "),s("div",{staticClass:"chat-name"},[t.activeChat?s("h1",{staticClass:"font-name"},[t.activeChat.contact?s("div",{staticClass:"d-flex align-items-start align-self-center"},[s("div",{staticClass:"mt-2 ml-4"},[t._v(t._s(t.activeChat.contact.first_name)+" "+t._s(t.activeChat.contact.last_name))])]):t._e(),t._v(" "),s("div",{staticClass:"d-flex align-items-start align-self-center"},[s("div",{staticClass:"mt-2 ml-4"},[t._v(t._s(t.activeChat._id))])])]):t._e()]),t._v(" "),s("div",{staticClass:"d-flex m-auto"},[s("span",{staticStyle:{cursor:"pointer"},attrs:{title:"Delete"},on:{click:function(e){return t.deletechat()}}},[s("b-icon",{attrs:{"font-scale":"2",icon:"trash","aria-hidden":"true"}})],1)])],1),t._v(" "),s("div",{class:!this.activeChat||t.modelMms?"d-none":""},[s("div",{class:t.uploadedImages.length>0?"activeImageArea":"inactive",staticStyle:{"z-index":"1"},attrs:{id:"drop-area"}},[s("form",{staticClass:"my-form"},[s("p",[t._v("Upload multiple files by dragging and dropping images inside this box")]),t._v(" "),s("input",{attrs:{type:"file",id:"fileElem",multiple:"",accept:"image/*"},on:{change:function(e){return t.handleFiles(e.target.files)}}})]),t._v(" "),s("div",{staticClass:"row",attrs:{id:"gallery"}},t._l(t.uploadedImages,function(e){return s("div",{key:e,staticClass:"col-lg-4"},[s("img",{staticStyle:{width:"150px"},attrs:{src:e}}),t._v(" "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.removeFromPrevie(e)}}},[s("span",{staticClass:"start-100 translate-middle badge border border-light rounded-circle bg-danger"},[t._v("X")])])])}),0),t._v(" "),s("progress",{staticStyle:{display:"none"},attrs:{id:"progress-bar",max:"100",value:"0"}})])]),t._v(" "),s("div",{staticClass:"wrap-chat",attrs:{id:"chat_body"}},[t.chatListLoader?s("div",{staticClass:"chat row"},[t._m(1),t._v(" "),t._m(2)]):t._e(),t._v(" "),s("div",{staticClass:"chat",attrs:{id:"chat-container"}},[t.activeChatData?s("div",t._l(t.messages,function(e){return s("div",{key:e._id},[s("div",{staticClass:"chat-bubble",class:{me:"send"==e.type,you:"receive"==e.type}},[s("div",{class:{"my-mouth":"send"==e.type,"your-mouth":"receive"==e.type}}),t._v(" "),s("div",{staticClass:"content"},[e.media&&JSON.parse(e.media)&&JSON.parse(e.media).length>0?s("span",t._l(JSON.parse(e.media),function(e){return s("span",{key:e},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.showImage(e)}}},[s("img",{attrs:{src:e,alt:"Image"}})])])}),0):t._e(),t._v("\n                "+t._s(e.message)+"\n              ")]),t._v(" "),s("div",{staticClass:"time"},[t._v("\n                "+t._s(t._f("moment")(e.created_at,"HH:mm"))+"\n              ")])])])}),0):t._e()])]),t._v(" "),s("div",{staticClass:"row wrap-container"},[s("div",{staticClass:"col-md-12 wrap-container2"},[t.activeChatData?s("div",{staticClass:"wrap-message"},[s("div",{staticClass:"message pl-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.messageBody,expression:"messageBody"}],staticClass:"input-message",attrs:{type:"text",placeholder:"Type message here"},domProps:{value:t.messageBody},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendSms.apply(null,arguments)},input:function(e){e.target.composing||(t.messageBody=e.target.value)}}}),t._v(" "),s("a",{staticClass:"m-2",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.file_upload()}}},[s("b-icon",{attrs:{icon:"paperclip",scale:"2"}})],1)]),t._v(" "),s("div",{staticClass:"btn btn-primary m-2",staticStyle:{height:"36px"},on:{click:function(e){return t.sendSms()}}},[s("b-icon",{attrs:{icon:"arrow-right-circle-fill","aria-hidden":"true"}})],1)]):t._e()])])]),t._v(" "),s("b-modal",{ref:"my-modal2",attrs:{id:"modal-2",size:"lg",title:"Compose Message","hide-footer":""}},[s("span",{staticClass:"small text-secondary"},[t._v("Input (+) and country code followed by the 10 digit phone number. If no country code is provided (+1) is assumed. Multiple numbers will be sent as Bulk SMS (individual sms's to recipients). "),s("span",{staticClass:"small text-center"},[t._v("[Telnyx does not support group texting]")])]),t._v(" "),s("form",{staticClass:"ml-2 mr-2",on:{submit:function(e){return e.preventDefault(),t.handleSubmit2.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-4"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedContact,expression:"selectedContact"}],staticClass:"form-control chat-input",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedContact=e.target.multiple?s:s[0]},function(e){return t.contactChangeEvent(e)}]}},[s("option",{attrs:{value:""}},[t._v(" Select Contact ")]),t._v(" "),t._l(t.contacts,function(e){return s("option",{key:e._id,domProps:{value:e.number}},[t._v(t._s(e.first_name)+" "+t._s(e.last_name)+" - "+t._s(e.number))])})],2)]),t._v(" "),s("div",{staticClass:"form-group mt-4"},[s("vue-tags-input",{staticClass:"form-control chat-input",attrs:{tags:t.tags,placeholder:"Enter phone number"},on:{"tags-changed":function(e){return t.tags=e}},model:{value:t.sms.numbers,callback:function(e){t.$set(t.sms,"numbers",e)},expression:"sms.numbers"}}),t._v(" "),t.tags.length<=0?s("div",{staticClass:"invalid-feedback"},[s("span",[t._v("Numbers are required")])]):t._e()],1),t._v(" "),s("div",{staticClass:"form-group mb-2 mt-4"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sms.message,expression:"sms.message"}],staticClass:"form-control chat-input",class:{"is-invalid":t.submitted2&&t.$v.sms.message.$error},attrs:{rows:"8",placeholder:"Type Message here"},domProps:{value:t.sms.message},on:{input:function(e){e.target.composing||t.$set(t.sms,"message",e.target.value)}}}),t._v(" "),t.submitted2&&t.$v.sms.message.$error?s("div",{staticClass:"invalid-feedback"},[t.$v.sms.message.required?t._e():s("span",[t._v("Message is required")])]):t._e()]),t._v(" "),s("div",{staticClass:"input-group mb-3"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text paperClip chat-input",attrs:{id:"basic-addon1"},on:{click:function(e){return t.choseFile2()}}},[s("b-icon",{attrs:{icon:"paperclip"}})],1)]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.modelFileValu,expression:"modelFileValu"}],staticClass:"form-control chat-input",attrs:{type:"text",placeholder:"Choose file","aria-label":"Username",readonly:"","aria-describedby":"basic-addon1"},domProps:{value:t.modelFileValu},on:{click:function(e){return t.choseFile2()},input:function(e){e.target.composing||(t.modelFileValu=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group mb-2 mt-4 d-none"},[s("input",{staticClass:"form-control chat-input",attrs:{type:"file",id:"model_file_input",multiple:"",accept:"image/*"},on:{change:function(e){return t.handleFiles(e.target.files,!0)}}})]),t._v(" "),s("div",{staticClass:"d-grid d-md-flex"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",id:"login-button"}},[t._v("Send Message")])])])]),t._v(" "),s("div",{attrs:{id:"hidden"},on:{click:function(e){return t.hiddenImage()}}},[s("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{height:"100vh",width:"100vw"}},[s("img",{staticClass:"img-fluid",attrs:{alt:"Responsive image",src:t.zoomImage}})])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex loader justify-content-center align-items-center"},[e("div",{staticClass:"sp sp-circle"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box-placeholder chat_loader"},[e("div",{staticClass:"excerpt p-4"},[e("div",{staticClass:"text line"}),this._v(" "),e("div",{staticClass:"text line"}),this._v(" "),e("div",{staticClass:"text"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box-placeholder chat_loader"},[e("div",{staticClass:"excerpt p-4"},[e("div",{staticClass:"text line"}),this._v(" "),e("div",{staticClass:"text line"}),this._v(" "),e("div",{staticClass:"text"})])])}]};var lt=s("VU/8")(ot,nt,!1,function(t){s("5vny")},"data-v-139b0adb",null).exports,ct=s("Tqaz"),dt=s("a+8X"),ut=s.n(dt);s("Jmt5"),s("9M+g");s("CuRo"),i.default.use(ct.a),i.default.use(ct.b),i.default.component("input-tag",ut.a),i.default.use(p.a),i.default.use(g.a);var mt=new p.a({mode:"history",routes:[{path:"/",name:"login",component:T},{path:"/signup",name:"signup",component:A},{path:"/dashboard",name:"dashboard",component:lt}]}),vt=s("NOK/"),ht=s.n(vt),pt=(s("UdIB"),s("NYxO"));i.default.use(pt.a);var ft=new pt.a.Store({modules:{common:q}}),gt=s("bNL2"),bt=s.n(gt),_t=s("lrIR"),Ct=s("K/Lq");window.axios=s("mtWM"),i.default.use(bt.a),i.default.use(_t.a),N.init(),i.default.use(Ct),i.default.config.productionTip=!1,i.default.use(ht.a),i.default.use(s("8AgW")),new i.default({el:"#app",router:mt,store:ft,components:{App:h},template:"<App/>"})},O6hW:function(t,e){},UdIB:function(t,e){},XQQ7:function(t,e){},YZOz:function(t,e){},kM3w:function(t,e){},tvpj:function(t,e){},"wF2+":function(t,e){},xqfx:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cdcd8e1407805f131c03.js.map